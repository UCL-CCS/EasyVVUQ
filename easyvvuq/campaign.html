<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 6.6.0" />
    <title>easyvvuq.campaign API documentation</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%2244.5%202.5%2015%2015%22%3E%3Cpath%20d%3D%22M49.351%2021.041c-.233-.721-.546-2.408-.772-4.076-.042-.09-.067-.187-.046-.288-.166-1.347-.277-2.625-.241-3.351-1.378-1.008-2.271-2.586-2.271-4.362%200-.976.272-1.935.788-2.774.057-.094.122-.18.184-.268-.033-.167-.052-.339-.052-.516%200-1.477%201.202-2.679%202.679-2.679.791%200%201.496.352%201.987.9a6.3%206.3%200%200%201%201.001.029c.492-.564%201.207-.929%202.012-.929%201.477%200%202.679%201.202%202.679%202.679a2.65%202.65%200%200%201-.269%201.148c.383.747.595%201.572.595%202.41%200%202.311-1.507%204.29-3.635%205.107.037.699.147%202.27.423%203.294l.137.461c.156%202.136-4.612%205.166-5.199%203.215zm.127-4.919a4.78%204.78%200%200%200%20.775-.584c-.172-.115-.505-.254-.88-.378zm.331%202.302l.828-.502c-.202-.143-.576-.328-.984-.49zm.45%202.157l.701-.403c-.214-.115-.536-.249-.891-.376l.19.779zM49.13%204.141c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm.735-.389a1.15%201.15%200%200%201%20.314.783%201.16%201.16%200%200%201-1.162%201.162c-.457%200-.842-.27-1.032-.653-.026.117-.042.238-.042.362a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.843-.626-1.535-1.436-1.654zm3.076%201.654a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.037-.009-.072-.011-.109-.21.3-.541.508-.935.508a1.16%201.16%200%200%201-1.162-1.162%201.14%201.14%200%200%201%20.474-.912c-.015%200-.03-.005-.045-.005-.926.001-1.679.754-1.679%201.68zm1.861-1.265c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm1.823%204.823c0-.52-.103-1.035-.288-1.52-.466.394-1.06.64-1.717.64-1.144%200-2.116-.725-2.499-1.738-.383%201.012-1.355%201.738-2.499%201.738-.867%200-1.631-.421-2.121-1.062-.307.605-.478%201.267-.478%201.942%200%202.486%202.153%204.51%204.801%204.51s4.801-2.023%204.801-4.51zm-3.032%209.156l-.146-.492c-.276-1.02-.395-2.457-.444-3.268a6.11%206.11%200%200%201-1.18.115%206.01%206.01%200%200%201-2.536-.562l.006.175c.802.215%201.848.612%202.021%201.25.079.295-.021.601-.274.837l-.598.501c.667.304%201.243.698%201.311%201.179.02.144.022.507-.393.787l-.564.365c1.285.521%201.361.96%201.381%201.126.018.142.011.496-.427.746l-.854.489c.064-1.19%201.985-2.585%202.697-3.248zM49.34%209.925c0-.667%201-.667%201%200%200%20.653.818%201.205%201.787%201.205s1.787-.552%201.787-1.205c0-.667%201-.667%201%200%200%201.216-1.25%202.205-2.787%202.205s-2.787-.989-2.787-2.205zm-.887-7.633c-.093.077-.205.114-.317.114a.5.5%200%200%201-.318-.886L49.183.397a.5.5%200%200%201%20.703.068.5.5%200%200%201-.069.703zm7.661-.065c-.086%200-.173-.022-.253-.068l-1.523-.893c-.575-.337-.069-1.2.506-.863l1.523.892a.5.5%200%200%201%20.179.685c-.094.158-.261.247-.432.247z%22%20fill%3D%22%233bb300%22/%3E%3C/svg%3E"/>


<style type="text/css">/*! * Bootstrap Reboot v5.0.0-beta1 (https://getbootstrap.com/) * Copyright 2011-2020 The Bootstrap Authors * Copyright 2011-2020 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}[tabindex="-1"]:focus:not(:focus-visible){outline:0!important}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus{outline:dotted 1px;outline:-webkit-focus-ring-color auto 5px}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
<style type="text/css">/*! pygments syntax highlighting */pre{line-height:125%;}td.linenos pre{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}span.linenos{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}td.linenos pre.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}span.linenos.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}.pdoc .hll{background-color:#ffffcc}.pdoc{background:#f8f8f8;}.pdoc .c{color:#408080; font-style:italic}.pdoc .err{border:1px solid #FF0000}.pdoc .k{color:#008000; font-weight:bold}.pdoc .o{color:#666666}.pdoc .ch{color:#408080; font-style:italic}.pdoc .cm{color:#408080; font-style:italic}.pdoc .cp{color:#BC7A00}.pdoc .cpf{color:#408080; font-style:italic}.pdoc .c1{color:#408080; font-style:italic}.pdoc .cs{color:#408080; font-style:italic}.pdoc .gd{color:#A00000}.pdoc .ge{font-style:italic}.pdoc .gr{color:#FF0000}.pdoc .gh{color:#000080; font-weight:bold}.pdoc .gi{color:#00A000}.pdoc .go{color:#888888}.pdoc .gp{color:#000080; font-weight:bold}.pdoc .gs{font-weight:bold}.pdoc .gu{color:#800080; font-weight:bold}.pdoc .gt{color:#0044DD}.pdoc .kc{color:#008000; font-weight:bold}.pdoc .kd{color:#008000; font-weight:bold}.pdoc .kn{color:#008000; font-weight:bold}.pdoc .kp{color:#008000}.pdoc .kr{color:#008000; font-weight:bold}.pdoc .kt{color:#B00040}.pdoc .m{color:#666666}.pdoc .s{color:#BA2121}.pdoc .na{color:#7D9029}.pdoc .nb{color:#008000}.pdoc .nc{color:#0000FF; font-weight:bold}.pdoc .no{color:#880000}.pdoc .nd{color:#AA22FF}.pdoc .ni{color:#999999; font-weight:bold}.pdoc .ne{color:#D2413A; font-weight:bold}.pdoc .nf{color:#0000FF}.pdoc .nl{color:#A0A000}.pdoc .nn{color:#0000FF; font-weight:bold}.pdoc .nt{color:#008000; font-weight:bold}.pdoc .nv{color:#19177C}.pdoc .ow{color:#AA22FF; font-weight:bold}.pdoc .w{color:#bbbbbb}.pdoc .mb{color:#666666}.pdoc .mf{color:#666666}.pdoc .mh{color:#666666}.pdoc .mi{color:#666666}.pdoc .mo{color:#666666}.pdoc .sa{color:#BA2121}.pdoc .sb{color:#BA2121}.pdoc .sc{color:#BA2121}.pdoc .dl{color:#BA2121}.pdoc .sd{color:#BA2121; font-style:italic}.pdoc .s2{color:#BA2121}.pdoc .se{color:#BB6622; font-weight:bold}.pdoc .sh{color:#BA2121}.pdoc .si{color:#BB6688; font-weight:bold}.pdoc .sx{color:#008000}.pdoc .sr{color:#BB6688}.pdoc .s1{color:#BA2121}.pdoc .ss{color:#19177C}.pdoc .bp{color:#008000}.pdoc .fm{color:#0000FF}.pdoc .vc{color:#19177C}.pdoc .vg{color:#19177C}.pdoc .vi{color:#19177C}.pdoc .vm{color:#19177C}.pdoc .il{color:#666666}</style>
<style type="text/css">/*! pdoc */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f7f7f7;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}body{background-color:var(--pdoc-background);}html, body{width:100%;height:100%;}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main{padding:2rem 3vw;}.git-button{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}#navtoggle{display:none;}}#togglestate{display:none;}nav.pdoc{--pad:1.75rem;--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc li{display:block;margin:0;padding:.2rem 0 .2rem var(--indent);transition:all 100ms;}nav.pdoc > div > ul > li{padding-left:0;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}html, main{scroll-behavior:smooth;}.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3, .pdoc h4{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{background-color:var(--code);border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{--shift:-40px;text-align:right;margin-top:var(--shift);margin-bottom:calc(0px - var(--shift));clear:both;filter:opacity(1);}.pdoc details:not([open]){height:0;overflow:visible;}.pdoc details > summary{font-size:.75rem;cursor:pointer;color:var(--muted);border-width:0;padding:0 .7em;display:inline-block;display:inline list-item;user-select:none;}.pdoc details > summary:focus{outline:0;}.pdoc details > div{margin-top:calc(0px - var(--shift) / 2);text-align:left;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc > section:first-of-type > .docstring{margin-bottom:3rem;}.pdoc .docstring pre{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-size:1.5rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{color:var(--text);margin:1rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}</style>
</head>
<body>        <nav class="pdoc">
            <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
            <input id="togglestate" type="checkbox">
            <div>
                        <a class="pdoc-button module-list-button" href="../easyvvuq.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                            &nbsp;easyvvuq</a>




                    <h2>API Documentation</h2>
                        <ul class="memberlist">
            <li>
                    <a class="class" href="#Campaign">Campaign</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Campaign.__init__">Campaign</a>
                        </li>
                        <li>
                                <a class="variable" href="#Campaign.campaign_dir">campaign_dir</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.init_db">init_db</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.add_app">add_app</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.set_app">set_app</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.replace_actions">replace_actions</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.set_sampler">set_sampler</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.add_runs">add_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.draw_samples">draw_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.list_runs">list_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_campaign_runs_dir">get_campaign_runs_dir</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.relocate">relocate</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.execute">execute</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.apply_for_each_sample">apply_for_each_sample</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.iterate">iterate</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.recollate">recollate</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_collation_result">get_collation_result</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_invalid_runs">get_invalid_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.apply_analysis">apply_analysis</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.analyse">analyse</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_last_analysis">get_last_analysis</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_active_sampler">get_active_sampler</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.ignore_runs">ignore_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.rerun">rerun</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_active_app">get_active_app</a>
                        </li>
                </ul>

            </li>
    </ul>


                    <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev">
                        built with <span class="visually-hidden">pdoc</span><img
                            alt="pdoc logo"
                            src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
                    </a>
            </div>
        </nav>
    <main class="pdoc">
            <section>
                    <h1 class="modulename">
<a href="./../easyvvuq.html">easyvvuq</a><wbr>.campaign    </h1>

                        <div class="docstring"><p>EasyVVUQ Campaign</p>

<p>This module contains the Campaign class that is used to coordinate all
EasyVVUQ workflows.</p>
</div>

                        <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;EasyVVUQ Campaign</span>

<span class="sd">This module contains the Campaign class that is used to coordinate all</span>
<span class="sd">EasyVVUQ workflows.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">easyvvuq</span>
<span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ProcessPoolExecutor</span>
<span class="kn">from</span> <span class="nn">easyvvuq</span> <span class="kn">import</span> <span class="n">ParamsSpecification</span><span class="p">,</span> <span class="n">constants</span>
<span class="kn">from</span> <span class="nn">easyvvuq.constants</span> <span class="kn">import</span> <span class="n">default_campaign_prefix</span><span class="p">,</span> <span class="n">Status</span>
<span class="kn">from</span> <span class="nn">easyvvuq.data_structs</span> <span class="kn">import</span> <span class="n">RunInfo</span><span class="p">,</span> <span class="n">CampaignInfo</span><span class="p">,</span> <span class="n">AppInfo</span>
<span class="kn">from</span> <span class="nn">easyvvuq.sampling</span> <span class="kn">import</span> <span class="n">BaseSamplingElement</span>
<span class="kn">from</span> <span class="nn">easyvvuq.actions</span> <span class="kn">import</span> <span class="n">ActionPool</span>
<span class="kn">import</span> <span class="nn">easyvvuq.db.sql</span> <span class="k">as</span> <span class="nn">db</span>

<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>

<span class="s2">    Copyright 2018 Robin A. Richardson, David W. Wright</span>

<span class="s2">    This file is part of EasyVVUQ</span>

<span class="s2">    EasyVVUQ is free software: you can redistribute it and/or modify</span>
<span class="s2">    it under the terms of the Lesser GNU General Public License as published by</span>
<span class="s2">    the Free Software Foundation, either version 3 of the License, or</span>
<span class="s2">    (at your option) any later version.</span>

<span class="s2">    EasyVVUQ is distributed in the hope that it will be useful,</span>
<span class="s2">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="s2">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="s2">    Lesser GNU General Public License for more details.</span>

<span class="s2">    You should have received a copy of the Lesser GNU General Public License</span>
<span class="s2">    along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>

<span class="s2">&quot;&quot;&quot;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;LGPL&quot;</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Campaign</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Campaigns organise the dataflow in EasyVVUQ workflows.</span>

<span class="sd">    The Campaign functions as as state machine for the VVUQ workflows. It uses a</span>
<span class="sd">    database (CampaignDB) to store information on both the target application</span>
<span class="sd">    and the VVUQ algorithms being employed. It also collects data from the simulations</span>
<span class="sd">    and can be used to store and resume your state.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>

<span class="sd">    Multiple campaigns can be combined in a CampaignDB. Hence the particular</span>
<span class="sd">    campaign we are currently working on will be specified using `campaign_id`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name: str</span>
<span class="sd">        Name of the Campaign. Freely chosen, serves as a human-readable way of distinguishing</span>
<span class="sd">        between several campaigns in the same database.</span>
<span class="sd">    params: dict, optional</span>
<span class="sd">        Description of the parameters to associated with the application. Will be used to create</span>
<span class="sd">        an app when creating the campaign. It is also possible to add apps manually using `add_app`</span>
<span class="sd">        method of the Campaign class. But this can be a useful shorthand when working with single</span>
<span class="sd">        app campaigns. To use this functionality both `params` and `actions` has to be specified.</span>
<span class="sd">        The name of this app will be the same as the name of the Campaign.</span>
<span class="sd">    actions: Actions, optional</span>
<span class="sd">        Actions object associated with an application. See description of the `params` parameter </span>
<span class="sd">        for more details.</span>
<span class="sd">    db_location: str, optional</span>
<span class="sd">        Location of the underlying campaign database - either a path or</span>
<span class="sd">        acceptable URI for SQLAlchemy.</span>
<span class="sd">    work_dir: str, optional, default=&#39;./&#39;</span>
<span class="sd">        Path to working directory - used to store campaign directory.</span>
<span class="sd">    state_file: str, optional</span>
<span class="sd">        Path to serialised state - used to initialise the Campaign.</span>
<span class="sd">    change_to_state: bool, optional, default=False</span>
<span class="sd">        Should we change to the directory containing any specified `state_file`</span>
<span class="sd">        in order to make relative paths work.</span>
<span class="sd">    verify_all_runs: bool, optional, default=True</span>
<span class="sd">        Check all new runs being added for unrecognised params (not defined for the currently set</span>
<span class="sd">        app), values lying within defined physical range, type checking etc. This should normally</span>
<span class="sd">        always be set to True, but in cases where the performance is too degraded, the checks can</span>
<span class="sd">        be disabled by setting to False.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    campaign_name : str or None</span>
<span class="sd">        Name for the campaign/workflow.</span>
<span class="sd">    _campaign_dir: str or None</span>
<span class="sd">        Path to the directory campaign uses for local storage (runs inputs etc)</span>
<span class="sd">    db_location : str or None</span>
<span class="sd">        Location of the underlying campaign database - either a path or</span>
<span class="sd">        acceptable URI for SQLAlchemy.</span>
<span class="sd">    _log: list</span>
<span class="sd">        The log of all elements that have been applied, with information about</span>
<span class="sd">        their application</span>
<span class="sd">    campaign_id : int</span>
<span class="sd">        ID number for the current campaign in the db.CampaignDB.</span>
<span class="sd">    campaign_db: easyvvuq.db.Basedb.CampaignDB</span>
<span class="sd">        A campaign database object</span>
<span class="sd">    last_analysis:</span>
<span class="sd">        The result of the most recent analysis carried out on this campaign</span>
<span class="sd">    _active_app: dict</span>
<span class="sd">        Info about currently set app</span>
<span class="sd">    _active_app_name: str</span>
<span class="sd">        Name of currently set app</span>
<span class="sd">    _active_sampler_id: int</span>
<span class="sd">        The database id of the currently set Sampler object</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    A typical instantiation might look like this.</span>

<span class="sd">    &gt;&gt;&gt; params = {</span>
<span class="sd">            &quot;S0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 997}, </span>
<span class="sd">            &quot;I0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 3}, </span>
<span class="sd">            &quot;beta&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.2}, </span>
<span class="sd">            &quot;gamma&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.04, &quot;min&quot;: 0.0, &quot;max&quot;: 1.0},</span>
<span class="sd">            &quot;iterations&quot;: {&quot;type&quot;: &quot;integer&quot;, &quot;default&quot;: 100},</span>
<span class="sd">            &quot;outfile&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;output.csv&quot;}</span>
<span class="sd">        }</span>
<span class="sd">    &gt;&gt;&gt; encoder = uq.encoders.GenericEncoder(template_fname=&#39;sir.template&#39;, delimiter=&#39;$&#39;, target_filename=&#39;input.json&#39;)</span>
<span class="sd">    &gt;&gt;&gt; decoder = uq.decoders.SimpleCSV(target_filename=&#39;output.csv&#39;, output_columns=[&#39;I&#39;])</span>
<span class="sd">    &gt;&gt;&gt; actions = uq.actions.local_execute(encoder, os.path.abspath(&#39;sir&#39;) + &#39; input.json&#39;, decoder)</span>
<span class="sd">    &gt;&gt;&gt; campaign = uq.Campaign(name=&#39;sir&#39;, params=params, actions=actions)</span>

<span class="sd">    A simplified one (without an app) might look simply like this.</span>

<span class="sd">    &gt;&gt;&gt; campaign = Campaign(&#39;simple&#39;)</span>

<span class="sd">    An app then can be added.</span>

<span class="sd">    &gt;&gt;&gt; campaign.add_app(&#39;simple_app&#39;, params=params, actions=actions)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">db_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">work_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
            <span class="n">state_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">change_to_state</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">verify_all_runs</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">work_dir</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span> <span class="o">=</span> <span class="n">verify_all_runs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">db_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="s2">&quot;sqlite:///&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">+</span> <span class="s2">&quot;/campaign.db&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="n">db_location</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">init_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state_dir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># here we assume that the user wants to add an app</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">actions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">campaign_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the path in which to load/save files related to the campaign.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Path to the campaign directory - given as a subdirectory of the</span>
<span class="sd">            working directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">init_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">work_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the connection with the database and either resume or create the campaign.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: str</span>
<span class="sd">            Name of the campaign.</span>
<span class="sd">        work_dir: str</span>
<span class="sd">            Work directory, defaults to cwd.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">CampaignDB</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_active_app</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_dir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">):</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Campaign directory (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="s2">) does not exist.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_sampler_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resume_campaign</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">CampaignInfo</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">campaign_dir_prefix</span><span class="o">=</span><span class="n">default_campaign_prefix</span><span class="p">,</span>
                <span class="n">easyvvuq_version</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span>
                <span class="n">campaign_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">create_campaign</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_active</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add an application to the CampaignDB.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            Name of the application.</span>
<span class="sd">        params : dict</span>
<span class="sd">            Description of the parameters to associate with the application.</span>
<span class="sd">        actions : Actions</span>
<span class="sd">            An instance of Actions containing actions to be executed</span>
<span class="sd">        set_active: bool</span>
<span class="sd">            Should the added app be set to be the currently active app?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Verify input parameters dict</span>
        <span class="n">paramsspec</span> <span class="o">=</span> <span class="n">ParamsSpecification</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">appname</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># validate application input</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">AppInfo</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">paramsspec</span><span class="o">=</span><span class="n">paramsspec</span><span class="p">,</span>
            <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">set_active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set active app for the campaign.</span>

<span class="sd">        Application information is retrieved from `self.campaign_db`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        app_name: str</span>
<span class="sd">            Name of selected app, if `None` given then first app will be</span>
<span class="sd">            selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="n">app_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">app_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_active_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
        <span class="c1"># Resurrect the app encoder, decoder and collation elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">replace_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replace actions for an app with a given name.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        app_name: str</span>
<span class="sd">            Name of the app.</span>
<span class="sd">        actions: Actions</span>
<span class="sd">            `Actions` instance, will replace the current `Actions` of an app.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">replace_actions</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="n">actions</span>

    <span class="k">def</span> <span class="nf">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set active sampler.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sampler : Sampler</span>
<span class="sd">            Sampler that will be used to create runs for the current campaign.</span>
<span class="sd">        update : bool</span>
<span class="sd">            If set to True it will not add the sampler to the database, just change </span>
<span class="sd">            it as the active sampler.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sampler</span><span class="p">,</span> <span class="n">BaseSamplingElement</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;set_sampler() must be passed a sampling element&quot;</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="n">sampler</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_sampler</span><span class="p">(</span><span class="n">sampler</span><span class="p">)</span>
            <span class="n">sampler</span><span class="o">.</span><span class="n">sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add runs to the database.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        runs : list of dicts</span>
<span class="sd">            Each dict defines the value of each model parameter listed in</span>
<span class="sd">            self.params_info for a run to be added to self.runs</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            Will mark runs that fail verification as invalid (but will not raise an exception)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;No app is currently set for this campaign. &quot;</span>
                   <span class="s2">&quot;Use set_app(&#39;name_of_app&#39;).&quot;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">app_default_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s2">&quot;params&quot;</span><span class="p">]</span>
        <span class="n">run_info_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">new_run</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;add_run() was passed new_run of type None. Bad sampler?&quot;</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1"># Verify and complete run with missing/default param values</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mark_invalid</span><span class="p">:</span>
                    <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>
            <span class="c1"># Add to run queue</span>
            <span class="n">run_info</span> <span class="o">=</span> <span class="n">RunInfo</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                               <span class="n">params</span><span class="o">=</span><span class="n">new_run</span><span class="p">,</span>
                               <span class="n">sample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                               <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
                               <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
            <span class="n">run_info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">run_info_list</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_samples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws `num_samples` sets of parameters from the currently set</span>
<span class="sd">        sampler, resulting in `num_samples` new runs added to the</span>
<span class="sd">        runs list. If `num_samples` is 0 (its default value) then</span>
<span class="sd">        this method draws ALL samples from the sampler, until exhaustion (this</span>
<span class="sd">        will fail if the sampler is not finite).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        num_samples : int</span>
<span class="sd">            Number of samples to draw from the active sampling element.</span>
<span class="sd">            By default is 0 (draw ALL samples)</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            If True will mark runs that go outside valid parameter range as INVALID.</span>
<span class="sd">            This is useful for MCMC style methods where you want those runs to evaluate</span>
<span class="sd">            to low probabilities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make sure `num_samples` is not 0 for an infinite generator</span>
        <span class="c1"># (this would add runs forever...)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">is_finite</span><span class="p">()</span> <span class="ow">and</span> <span class="n">num_samples</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sampling_element &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">element_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                   <span class="sa">f</span><span class="s2">&quot;is an infinite generator, therefore a finite number of &quot;</span>
                   <span class="sa">f</span><span class="s2">&quot;draws (n &gt; 0) must be specified.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">num_added</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">new_runs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">:</span>
            <span class="n">new_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_run</span><span class="p">)</span>
            <span class="n">num_added</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">num_samples</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">num_added</span> <span class="o">&gt;=</span> <span class="n">num_samples</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">new_runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="p">)</span>
        <span class="c1"># Write sampler&#39;s new state to database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">update_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_runs</span>

    <span class="k">def</span> <span class="nf">list_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of runs in the CampaignDB.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sampler: int</span>
<span class="sd">            Sampler id to filter for.</span>
<span class="sd">        campaign: int</span>
<span class="sd">            Campaign id to filter for.</span>
<span class="sd">        app_id: int</span>
<span class="sd">            App id to filter for.</span>
<span class="sd">        status: Status</span>
<span class="sd">            Status to filter for.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of runs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
            <span class="n">sampler</span><span class="o">=</span><span class="n">sampler</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="n">app_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_campaign_runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the runs directory from the CampaignDB.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Path in which the runs information will be written.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">relocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">campaign_dir</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Relocate the campaign by specifying a new path where campaign is located.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        new_path: str</span>
<span class="sd">            new runs directory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;specified directory does not exist: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">relocate</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This will draw samples and execute the Actions on those samples.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nsamples: int</span>
<span class="sd">            Number of samples to draw. For infinite samplers or when you want to process </span>
<span class="sd">            samples in batches.</span>
<span class="sd">        pool: Executor</span>
<span class="sd">            A pool object to be used when processing runs (e.g. instance of `ThreadPoolExecutor` or</span>
<span class="sd">            `ProcessPoolExecutor`).</span>
<span class="sd">        mark_invalid: bool</span>
<span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
<span class="sd">            want to avoid the concurrent module for some reason).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
        <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_for_each_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;For each run in this Campaign&#39;s run list, apply the specified action</span>
<span class="sd">        (an object of type Action).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        actions: Actions</span>
<span class="sd">            Actions to be applied to each relevant run in the database.</span>
<span class="sd">        status: Status</span>
<span class="sd">            Will apply the Actions only to those runs whose status is as specified.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
<span class="sd">            want to avoid the concurrent module for some reason).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ActionPool</span>
<span class="sd">            An object containing ActionStatus instances to track action execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Loop through all runs in this campaign with status ENCODED, and</span>
        <span class="c1"># run the specified action on each run&#39;s dir</span>
        <span class="k">def</span> <span class="nf">inits</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">run_id</span><span class="p">,</span> <span class="n">run_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
                    <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]):</span>
                <span class="n">previous</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;campaign_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;rundir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;run_dir&#39;</span><span class="p">]</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;collated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">yield</span> <span class="n">previous</span>
        <span class="k">return</span> <span class="n">ActionPool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">inits</span><span class="o">=</span><span class="n">inits</span><span class="p">(),</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is the equivalent of `execute` for methods that rely on the output of the</span>
<span class="sd">        previous sampling stage (designed for MCMC, should work for others).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nsamples : int</span>
<span class="sd">            Number of samples to draw (during a single iteration).</span>
<span class="sd">        pool : Executor</span>
<span class="sd">            An Executor instance. For example ThreadPoolExecutor or a Dask Client. Defaults</span>
<span class="sd">            to the ThreadPoolExecutor.</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Will execute the `Actions` associated with runs sequentially. Might be more</span>
<span class="sd">            efficient in some situations.</span>

<span class="sd">        Yields</span>
<span class="sd">        ------</span>
<span class="sd">        ActionPool</span>
<span class="sd">            An object containing Futures instances to track action execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
            <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">invalid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_invalid_runs</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ignored_runs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">run_id</span> <span class="ow">in</span> <span class="n">ignored_runs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">)</span><span class="o">.</span>\
                    <span class="nb">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">run_id</span><span class="p">))</span><span class="o">.</span>\
                    <span class="n">update</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">recollate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clears the current collation table, changes all COLLATED status runs</span>
<span class="sd">           back to ENCODED, then runs collate() again</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">collated_run_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">run_ids</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">collated_run_ids</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collate</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_collation_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return dataframe containing all collated results</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        last_iteration : bool</span>
<span class="sd">            Will only return the result of the last iteration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        DataFrame</span>
<span class="sd">            A DataFrame with the simulation results along with the inputs </span>
<span class="sd">            used to produce them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                                            <span class="n">status</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_invalid_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return dataframe containing all results marked as INVALID.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        last_iteration : bool</span>
<span class="sd">            Will only return the result of the last iteration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        DataFrame</span>
<span class="sd">            A DataFrame with the results form simulations that were marked as INVALID.</span>
<span class="sd">            These will usually be the ones that went outside the specified parameter ranges.</span>
<span class="sd">            These still have to be accounted for in some way by some methods (e.g. MCMC).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                                            <span class="n">status</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run the `analysis` element on the output of the last run collation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        analysis : Analysis</span>
<span class="sd">            Element that performs a VVUQ analysis on a dataframe summary of</span>
<span class="sd">            run outputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Apply analysis element to most recent collation result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">data_frame</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">analyse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If available will call an appropriate analysis class on the collation result.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        **kwargs : dict</span>
<span class="sd">            Argument to the analysis class constructor (after sampler).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        AnalysisResults</span>
<span class="sd">            An object representing analysis results. Can be used to interact with those results</span>
<span class="sd">            in some way. Plot, retrieve surrogate models and so on. </span>
<span class="sd">            See `easyvvuq.analysis.AnalysisResults` for further information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">collation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">analysis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">analysis_class</span><span class="p">(</span><span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">collation_result</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This sampler does not have a corresponding analysis class&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_last_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the output of the most recently run analysis element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No last analysis output available.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns formatted summary of the current Campaign state.</span>
<span class="sd">        Enables class to work with standard print() method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;db_location = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;active_sampler_id = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;campaign_name = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;campaign_dir = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;campaign_id = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_active_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the active sampler element in use by this campaign.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The sampler currently in use</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span>

    <span class="k">def</span> <span class="nf">ignore_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Flags the specified runs to be IGNORED in future collation. Note that</span>
<span class="sd">        this does NOT remove previously collated results from the collation table.</span>
<span class="sd">        For that you must refresh the collation by running recollate().</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        list</span>
<span class="sd">            The list of run IDs for the runs that should be set to status IGNORED</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rerun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the status of the specified runs to ENCODED, so that their results</span>
<span class="sd">        may be recollated later (presumably after extending, rerunning or otherwise</span>
<span class="sd">        modifying the data in the relevant run folder). Note that this method will</span>
<span class="sd">        NOT perform any execution - it simply flags the run in EasyVVUQ as being</span>
<span class="sd">        uncollated. Actual execution is (as usual) the job of the user or middleware.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        list</span>
<span class="sd">            The list of run IDs for the runs that should be set to status ENCODED</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">run_ID</span> <span class="ow">in</span> <span class="n">list_of_run_IDs</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_run_status</span><span class="p">(</span><span class="n">run_ID</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot rerun </span><span class="si">{</span><span class="n">run_ID</span><span class="si">}</span><span class="s2"> as it has status NEW, and must&quot;</span>
                       <span class="sa">f</span><span class="s2">&quot;be encoded before execution.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_active_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a dict of information regarding the application that is currently</span>
<span class="sd">        set for this campaign.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span>
</pre></div>

        </details>

            </section>
                <section id="Campaign">
                                <div class="attr class">
        <a class="headerlink" href="#Campaign">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Campaign</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Campaign</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Campaigns organise the dataflow in EasyVVUQ workflows.</span>

<span class="sd">    The Campaign functions as as state machine for the VVUQ workflows. It uses a</span>
<span class="sd">    database (CampaignDB) to store information on both the target application</span>
<span class="sd">    and the VVUQ algorithms being employed. It also collects data from the simulations</span>
<span class="sd">    and can be used to store and resume your state.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>

<span class="sd">    Multiple campaigns can be combined in a CampaignDB. Hence the particular</span>
<span class="sd">    campaign we are currently working on will be specified using `campaign_id`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name: str</span>
<span class="sd">        Name of the Campaign. Freely chosen, serves as a human-readable way of distinguishing</span>
<span class="sd">        between several campaigns in the same database.</span>
<span class="sd">    params: dict, optional</span>
<span class="sd">        Description of the parameters to associated with the application. Will be used to create</span>
<span class="sd">        an app when creating the campaign. It is also possible to add apps manually using `add_app`</span>
<span class="sd">        method of the Campaign class. But this can be a useful shorthand when working with single</span>
<span class="sd">        app campaigns. To use this functionality both `params` and `actions` has to be specified.</span>
<span class="sd">        The name of this app will be the same as the name of the Campaign.</span>
<span class="sd">    actions: Actions, optional</span>
<span class="sd">        Actions object associated with an application. See description of the `params` parameter </span>
<span class="sd">        for more details.</span>
<span class="sd">    db_location: str, optional</span>
<span class="sd">        Location of the underlying campaign database - either a path or</span>
<span class="sd">        acceptable URI for SQLAlchemy.</span>
<span class="sd">    work_dir: str, optional, default=&#39;./&#39;</span>
<span class="sd">        Path to working directory - used to store campaign directory.</span>
<span class="sd">    state_file: str, optional</span>
<span class="sd">        Path to serialised state - used to initialise the Campaign.</span>
<span class="sd">    change_to_state: bool, optional, default=False</span>
<span class="sd">        Should we change to the directory containing any specified `state_file`</span>
<span class="sd">        in order to make relative paths work.</span>
<span class="sd">    verify_all_runs: bool, optional, default=True</span>
<span class="sd">        Check all new runs being added for unrecognised params (not defined for the currently set</span>
<span class="sd">        app), values lying within defined physical range, type checking etc. This should normally</span>
<span class="sd">        always be set to True, but in cases where the performance is too degraded, the checks can</span>
<span class="sd">        be disabled by setting to False.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    campaign_name : str or None</span>
<span class="sd">        Name for the campaign/workflow.</span>
<span class="sd">    _campaign_dir: str or None</span>
<span class="sd">        Path to the directory campaign uses for local storage (runs inputs etc)</span>
<span class="sd">    db_location : str or None</span>
<span class="sd">        Location of the underlying campaign database - either a path or</span>
<span class="sd">        acceptable URI for SQLAlchemy.</span>
<span class="sd">    _log: list</span>
<span class="sd">        The log of all elements that have been applied, with information about</span>
<span class="sd">        their application</span>
<span class="sd">    campaign_id : int</span>
<span class="sd">        ID number for the current campaign in the db.CampaignDB.</span>
<span class="sd">    campaign_db: easyvvuq.db.Basedb.CampaignDB</span>
<span class="sd">        A campaign database object</span>
<span class="sd">    last_analysis:</span>
<span class="sd">        The result of the most recent analysis carried out on this campaign</span>
<span class="sd">    _active_app: dict</span>
<span class="sd">        Info about currently set app</span>
<span class="sd">    _active_app_name: str</span>
<span class="sd">        Name of currently set app</span>
<span class="sd">    _active_sampler_id: int</span>
<span class="sd">        The database id of the currently set Sampler object</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    A typical instantiation might look like this.</span>

<span class="sd">    &gt;&gt;&gt; params = {</span>
<span class="sd">            &quot;S0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 997}, </span>
<span class="sd">            &quot;I0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 3}, </span>
<span class="sd">            &quot;beta&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.2}, </span>
<span class="sd">            &quot;gamma&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.04, &quot;min&quot;: 0.0, &quot;max&quot;: 1.0},</span>
<span class="sd">            &quot;iterations&quot;: {&quot;type&quot;: &quot;integer&quot;, &quot;default&quot;: 100},</span>
<span class="sd">            &quot;outfile&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;output.csv&quot;}</span>
<span class="sd">        }</span>
<span class="sd">    &gt;&gt;&gt; encoder = uq.encoders.GenericEncoder(template_fname=&#39;sir.template&#39;, delimiter=&#39;$&#39;, target_filename=&#39;input.json&#39;)</span>
<span class="sd">    &gt;&gt;&gt; decoder = uq.decoders.SimpleCSV(target_filename=&#39;output.csv&#39;, output_columns=[&#39;I&#39;])</span>
<span class="sd">    &gt;&gt;&gt; actions = uq.actions.local_execute(encoder, os.path.abspath(&#39;sir&#39;) + &#39; input.json&#39;, decoder)</span>
<span class="sd">    &gt;&gt;&gt; campaign = uq.Campaign(name=&#39;sir&#39;, params=params, actions=actions)</span>

<span class="sd">    A simplified one (without an app) might look simply like this.</span>

<span class="sd">    &gt;&gt;&gt; campaign = Campaign(&#39;simple&#39;)</span>

<span class="sd">    An app then can be added.</span>

<span class="sd">    &gt;&gt;&gt; campaign.add_app(&#39;simple_app&#39;, params=params, actions=actions)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">db_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">work_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
            <span class="n">state_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">change_to_state</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">verify_all_runs</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">work_dir</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span> <span class="o">=</span> <span class="n">verify_all_runs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">db_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="s2">&quot;sqlite:///&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">+</span> <span class="s2">&quot;/campaign.db&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="n">db_location</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">init_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state_dir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># here we assume that the user wants to add an app</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">actions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">campaign_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the path in which to load/save files related to the campaign.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Path to the campaign directory - given as a subdirectory of the</span>
<span class="sd">            working directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">init_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">work_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the connection with the database and either resume or create the campaign.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: str</span>
<span class="sd">            Name of the campaign.</span>
<span class="sd">        work_dir: str</span>
<span class="sd">            Work directory, defaults to cwd.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">CampaignDB</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_active_app</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_dir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">):</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Campaign directory (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="s2">) does not exist.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_sampler_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resume_campaign</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">CampaignInfo</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">campaign_dir_prefix</span><span class="o">=</span><span class="n">default_campaign_prefix</span><span class="p">,</span>
                <span class="n">easyvvuq_version</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span>
                <span class="n">campaign_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">create_campaign</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_active</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add an application to the CampaignDB.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            Name of the application.</span>
<span class="sd">        params : dict</span>
<span class="sd">            Description of the parameters to associate with the application.</span>
<span class="sd">        actions : Actions</span>
<span class="sd">            An instance of Actions containing actions to be executed</span>
<span class="sd">        set_active: bool</span>
<span class="sd">            Should the added app be set to be the currently active app?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Verify input parameters dict</span>
        <span class="n">paramsspec</span> <span class="o">=</span> <span class="n">ParamsSpecification</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">appname</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># validate application input</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">AppInfo</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">paramsspec</span><span class="o">=</span><span class="n">paramsspec</span><span class="p">,</span>
            <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">set_active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set active app for the campaign.</span>

<span class="sd">        Application information is retrieved from `self.campaign_db`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        app_name: str</span>
<span class="sd">            Name of selected app, if `None` given then first app will be</span>
<span class="sd">            selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="n">app_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">app_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_active_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
        <span class="c1"># Resurrect the app encoder, decoder and collation elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">replace_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replace actions for an app with a given name.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        app_name: str</span>
<span class="sd">            Name of the app.</span>
<span class="sd">        actions: Actions</span>
<span class="sd">            `Actions` instance, will replace the current `Actions` of an app.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">replace_actions</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="n">actions</span>

    <span class="k">def</span> <span class="nf">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set active sampler.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sampler : Sampler</span>
<span class="sd">            Sampler that will be used to create runs for the current campaign.</span>
<span class="sd">        update : bool</span>
<span class="sd">            If set to True it will not add the sampler to the database, just change </span>
<span class="sd">            it as the active sampler.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sampler</span><span class="p">,</span> <span class="n">BaseSamplingElement</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;set_sampler() must be passed a sampling element&quot;</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="n">sampler</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_sampler</span><span class="p">(</span><span class="n">sampler</span><span class="p">)</span>
            <span class="n">sampler</span><span class="o">.</span><span class="n">sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add runs to the database.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        runs : list of dicts</span>
<span class="sd">            Each dict defines the value of each model parameter listed in</span>
<span class="sd">            self.params_info for a run to be added to self.runs</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            Will mark runs that fail verification as invalid (but will not raise an exception)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;No app is currently set for this campaign. &quot;</span>
                   <span class="s2">&quot;Use set_app(&#39;name_of_app&#39;).&quot;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">app_default_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s2">&quot;params&quot;</span><span class="p">]</span>
        <span class="n">run_info_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">new_run</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;add_run() was passed new_run of type None. Bad sampler?&quot;</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1"># Verify and complete run with missing/default param values</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mark_invalid</span><span class="p">:</span>
                    <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>
            <span class="c1"># Add to run queue</span>
            <span class="n">run_info</span> <span class="o">=</span> <span class="n">RunInfo</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                               <span class="n">params</span><span class="o">=</span><span class="n">new_run</span><span class="p">,</span>
                               <span class="n">sample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                               <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
                               <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
            <span class="n">run_info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">run_info_list</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_samples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws `num_samples` sets of parameters from the currently set</span>
<span class="sd">        sampler, resulting in `num_samples` new runs added to the</span>
<span class="sd">        runs list. If `num_samples` is 0 (its default value) then</span>
<span class="sd">        this method draws ALL samples from the sampler, until exhaustion (this</span>
<span class="sd">        will fail if the sampler is not finite).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        num_samples : int</span>
<span class="sd">            Number of samples to draw from the active sampling element.</span>
<span class="sd">            By default is 0 (draw ALL samples)</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            If True will mark runs that go outside valid parameter range as INVALID.</span>
<span class="sd">            This is useful for MCMC style methods where you want those runs to evaluate</span>
<span class="sd">            to low probabilities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make sure `num_samples` is not 0 for an infinite generator</span>
        <span class="c1"># (this would add runs forever...)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">is_finite</span><span class="p">()</span> <span class="ow">and</span> <span class="n">num_samples</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sampling_element &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">element_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                   <span class="sa">f</span><span class="s2">&quot;is an infinite generator, therefore a finite number of &quot;</span>
                   <span class="sa">f</span><span class="s2">&quot;draws (n &gt; 0) must be specified.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">num_added</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">new_runs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">:</span>
            <span class="n">new_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_run</span><span class="p">)</span>
            <span class="n">num_added</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">num_samples</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">num_added</span> <span class="o">&gt;=</span> <span class="n">num_samples</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">new_runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="p">)</span>
        <span class="c1"># Write sampler&#39;s new state to database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">update_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_runs</span>

    <span class="k">def</span> <span class="nf">list_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of runs in the CampaignDB.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sampler: int</span>
<span class="sd">            Sampler id to filter for.</span>
<span class="sd">        campaign: int</span>
<span class="sd">            Campaign id to filter for.</span>
<span class="sd">        app_id: int</span>
<span class="sd">            App id to filter for.</span>
<span class="sd">        status: Status</span>
<span class="sd">            Status to filter for.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of runs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
            <span class="n">sampler</span><span class="o">=</span><span class="n">sampler</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="n">app_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_campaign_runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the runs directory from the CampaignDB.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Path in which the runs information will be written.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">relocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">campaign_dir</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Relocate the campaign by specifying a new path where campaign is located.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        new_path: str</span>
<span class="sd">            new runs directory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;specified directory does not exist: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">relocate</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This will draw samples and execute the Actions on those samples.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nsamples: int</span>
<span class="sd">            Number of samples to draw. For infinite samplers or when you want to process </span>
<span class="sd">            samples in batches.</span>
<span class="sd">        pool: Executor</span>
<span class="sd">            A pool object to be used when processing runs (e.g. instance of `ThreadPoolExecutor` or</span>
<span class="sd">            `ProcessPoolExecutor`).</span>
<span class="sd">        mark_invalid: bool</span>
<span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
<span class="sd">            want to avoid the concurrent module for some reason).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
        <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_for_each_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;For each run in this Campaign&#39;s run list, apply the specified action</span>
<span class="sd">        (an object of type Action).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        actions: Actions</span>
<span class="sd">            Actions to be applied to each relevant run in the database.</span>
<span class="sd">        status: Status</span>
<span class="sd">            Will apply the Actions only to those runs whose status is as specified.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
<span class="sd">            want to avoid the concurrent module for some reason).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ActionPool</span>
<span class="sd">            An object containing ActionStatus instances to track action execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Loop through all runs in this campaign with status ENCODED, and</span>
        <span class="c1"># run the specified action on each run&#39;s dir</span>
        <span class="k">def</span> <span class="nf">inits</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">run_id</span><span class="p">,</span> <span class="n">run_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
                    <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]):</span>
                <span class="n">previous</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;campaign_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;rundir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;run_dir&#39;</span><span class="p">]</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;collated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">yield</span> <span class="n">previous</span>
        <span class="k">return</span> <span class="n">ActionPool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">inits</span><span class="o">=</span><span class="n">inits</span><span class="p">(),</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is the equivalent of `execute` for methods that rely on the output of the</span>
<span class="sd">        previous sampling stage (designed for MCMC, should work for others).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nsamples : int</span>
<span class="sd">            Number of samples to draw (during a single iteration).</span>
<span class="sd">        pool : Executor</span>
<span class="sd">            An Executor instance. For example ThreadPoolExecutor or a Dask Client. Defaults</span>
<span class="sd">            to the ThreadPoolExecutor.</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Will execute the `Actions` associated with runs sequentially. Might be more</span>
<span class="sd">            efficient in some situations.</span>

<span class="sd">        Yields</span>
<span class="sd">        ------</span>
<span class="sd">        ActionPool</span>
<span class="sd">            An object containing Futures instances to track action execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
            <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">invalid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_invalid_runs</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ignored_runs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">run_id</span> <span class="ow">in</span> <span class="n">ignored_runs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">)</span><span class="o">.</span>\
                    <span class="nb">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">run_id</span><span class="p">))</span><span class="o">.</span>\
                    <span class="n">update</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">recollate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clears the current collation table, changes all COLLATED status runs</span>
<span class="sd">           back to ENCODED, then runs collate() again</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">collated_run_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">run_ids</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">collated_run_ids</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collate</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_collation_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return dataframe containing all collated results</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        last_iteration : bool</span>
<span class="sd">            Will only return the result of the last iteration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        DataFrame</span>
<span class="sd">            A DataFrame with the simulation results along with the inputs </span>
<span class="sd">            used to produce them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                                            <span class="n">status</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_invalid_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return dataframe containing all results marked as INVALID.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        last_iteration : bool</span>
<span class="sd">            Will only return the result of the last iteration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        DataFrame</span>
<span class="sd">            A DataFrame with the results form simulations that were marked as INVALID.</span>
<span class="sd">            These will usually be the ones that went outside the specified parameter ranges.</span>
<span class="sd">            These still have to be accounted for in some way by some methods (e.g. MCMC).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                                            <span class="n">status</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run the `analysis` element on the output of the last run collation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        analysis : Analysis</span>
<span class="sd">            Element that performs a VVUQ analysis on a dataframe summary of</span>
<span class="sd">            run outputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Apply analysis element to most recent collation result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">data_frame</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">analyse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If available will call an appropriate analysis class on the collation result.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        **kwargs : dict</span>
<span class="sd">            Argument to the analysis class constructor (after sampler).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        AnalysisResults</span>
<span class="sd">            An object representing analysis results. Can be used to interact with those results</span>
<span class="sd">            in some way. Plot, retrieve surrogate models and so on. </span>
<span class="sd">            See `easyvvuq.analysis.AnalysisResults` for further information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">collation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">analysis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">analysis_class</span><span class="p">(</span><span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">collation_result</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This sampler does not have a corresponding analysis class&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_last_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the output of the most recently run analysis element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No last analysis output available.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns formatted summary of the current Campaign state.</span>
<span class="sd">        Enables class to work with standard print() method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;db_location = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;active_sampler_id = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;campaign_name = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;campaign_dir = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;campaign_id = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_active_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the active sampler element in use by this campaign.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The sampler currently in use</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span>

    <span class="k">def</span> <span class="nf">ignore_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Flags the specified runs to be IGNORED in future collation. Note that</span>
<span class="sd">        this does NOT remove previously collated results from the collation table.</span>
<span class="sd">        For that you must refresh the collation by running recollate().</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        list</span>
<span class="sd">            The list of run IDs for the runs that should be set to status IGNORED</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rerun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the status of the specified runs to ENCODED, so that their results</span>
<span class="sd">        may be recollated later (presumably after extending, rerunning or otherwise</span>
<span class="sd">        modifying the data in the relevant run folder). Note that this method will</span>
<span class="sd">        NOT perform any execution - it simply flags the run in EasyVVUQ as being</span>
<span class="sd">        uncollated. Actual execution is (as usual) the job of the user or middleware.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        list</span>
<span class="sd">            The list of run IDs for the runs that should be set to status ENCODED</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">run_ID</span> <span class="ow">in</span> <span class="n">list_of_run_IDs</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_run_status</span><span class="p">(</span><span class="n">run_ID</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot rerun </span><span class="si">{</span><span class="n">run_ID</span><span class="si">}</span><span class="s2"> as it has status NEW, and must&quot;</span>
                       <span class="sa">f</span><span class="s2">&quot;be encoded before execution.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_active_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a dict of information regarding the application that is currently</span>
<span class="sd">        set for this campaign.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span>
</pre></div>

        </details>

            <div class="docstring"><p>Campaigns organise the dataflow in EasyVVUQ workflows.</p>

<p>The Campaign functions as as state machine for the VVUQ workflows. It uses a
database (CampaignDB) to store information on both the target application
and the VVUQ algorithms being employed. It also collects data from the simulations
and can be used to store and resume your state.</p>

<h6 id="notes">Notes</h6>

<p>Multiple campaigns can be combined in a CampaignDB. Hence the particular
campaign we are currently working on will be specified using <code>campaign_id</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
Name of the Campaign. Freely chosen, serves as a human-readable way of distinguishing
between several campaigns in the same database.</li>
<li><strong>params</strong> (dict, optional):
Description of the parameters to associated with the application. Will be used to create
an app when creating the campaign. It is also possible to add apps manually using <code><a href="#Campaign.add_app">add_app</a></code>
method of the Campaign class. But this can be a useful shorthand when working with single
app campaigns. To use this functionality both <code>params</code> and <code>actions</code> has to be specified.
The name of this app will be the same as the name of the Campaign.</li>
<li><strong>actions</strong> (Actions, optional):
Actions object associated with an application. See description of the <code>params</code> parameter 
for more details.</li>
<li><strong>db_location</strong> (str, optional):
Location of the underlying campaign database - either a path or
acceptable URI for SQLAlchemy.</li>
<li><strong>work_dir</strong> (str, optional, default='./'):
Path to working directory - used to store campaign directory.</li>
<li><strong>state_file</strong> (str, optional):
Path to serialised state - used to initialise the Campaign.</li>
<li><strong>change_to_state</strong> (bool, optional, default=False):
Should we change to the directory containing any specified <code>state_file</code>
in order to make relative paths work.</li>
<li><strong>verify_all_runs</strong> (bool, optional, default=True):
Check all new runs being added for unrecognised params (not defined for the currently set
app), values lying within defined physical range, type checking etc. This should normally
always be set to True, but in cases where the performance is too degraded, the checks can
be disabled by setting to False.</li>
</ul>

<h6 id="attributes">Attributes</h6>

<ul>
<li><strong>campaign_name</strong> (str or None):
Name for the campaign/workflow.</li>
<li><strong>_campaign_dir</strong> (str or None):
Path to the directory campaign uses for local storage (runs inputs etc)</li>
<li><strong>db_location</strong> (str or None):
Location of the underlying campaign database - either a path or
acceptable URI for SQLAlchemy.</li>
<li><strong>_log</strong> (list):
The log of all elements that have been applied, with information about
their application</li>
<li><strong>campaign_id</strong> (int):
ID number for the current campaign in the db.CampaignDB.</li>
<li><strong>campaign_db</strong> (<a href="db.html#Basedb.CampaignDB">easyvvuq.db.Basedb.CampaignDB</a>):
A campaign database object</li>
<li><strong>last_analysis:</strong>: The result of the most recent analysis carried out on this campaign</li>
<li><strong>_active_app</strong> (dict):
Info about currently set app</li>
<li><strong>_active_app_name</strong> (str):
Name of currently set app</li>
<li><strong>_active_sampler_id</strong> (int):
The database id of the currently set Sampler object</li>
</ul>

<h6 id="examples">Examples</h6>

<p>A typical instantiation might look like this.</p>

<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="go">        &quot;S0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 997}, </span>
<span class="go">        &quot;I0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 3}, </span>
<span class="go">        &quot;beta&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.2}, </span>
<span class="go">        &quot;gamma&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.04, &quot;min&quot;: 0.0, &quot;max&quot;: 1.0},</span>
<span class="go">        &quot;iterations&quot;: {&quot;type&quot;: &quot;integer&quot;, &quot;default&quot;: 100},</span>
<span class="go">        &quot;outfile&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;output.csv&quot;}</span>
<span class="go">    }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoder</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">encoders</span><span class="o">.</span><span class="n">GenericEncoder</span><span class="p">(</span><span class="n">template_fname</span><span class="o">=</span><span class="s1">&#39;sir.template&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="n">target_filename</span><span class="o">=</span><span class="s1">&#39;input.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decoder</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">decoders</span><span class="o">.</span><span class="n">SimpleCSV</span><span class="p">(</span><span class="n">target_filename</span><span class="o">=</span><span class="s1">&#39;output.csv&#39;</span><span class="p">,</span> <span class="n">output_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">actions</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">local_execute</span><span class="p">(</span><span class="n">encoder</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;sir&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; input.json&#39;</span><span class="p">,</span> <span class="n">decoder</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">campaign</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">Campaign</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sir&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>
</code></pre></div>

<p>A simplified one (without an app) might look simply like this.</p>

<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">campaign</span> <span class="o">=</span> <span class="n">Campaign</span><span class="p">(</span><span class="s1">&#39;simple&#39;</span><span class="p">)</span>
</code></pre></div>

<p>An app then can be added.</p>

<div class="codehilite"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">campaign</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="s1">&#39;simple_app&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>
</code></pre></div>
</div>


                            <div id="Campaign.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Campaign</span><span class="signature">(
    name,
    params=None,
    actions=None,
    db_location=None,
    work_dir=&#39;./&#39;,
    state_file=None,
    change_to_state=False,
    verify_all_runs=True
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">db_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">work_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
            <span class="n">state_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">change_to_state</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">verify_all_runs</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">work_dir</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span> <span class="o">=</span> <span class="n">verify_all_runs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">db_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="s2">&quot;sqlite:///&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">+</span> <span class="s2">&quot;/campaign.db&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="n">db_location</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">init_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state_dir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># here we assume that the user wants to add an app</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">actions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="Campaign.campaign_dir" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Campaign.campaign_dir">#&nbsp;&nbsp</a>

        <span class="name">campaign_dir</span>
    </div>

            <div class="docstring"><p>Get the path in which to load/save files related to the campaign.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>str</strong>: Path to the campaign directory - given as a subdirectory of the
working directory.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.init_db" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.init_db">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">init_db</span><span class="signature">(self, name, work_dir=&#39;.&#39;)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">init_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">work_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the connection with the database and either resume or create the campaign.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: str</span>
<span class="sd">            Name of the campaign.</span>
<span class="sd">        work_dir: str</span>
<span class="sd">            Work directory, defaults to cwd.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">CampaignDB</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_active_app</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_dir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">):</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Campaign directory (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="s2">) does not exist.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_sampler_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resume_campaign</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">CampaignInfo</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">campaign_dir_prefix</span><span class="o">=</span><span class="n">default_campaign_prefix</span><span class="p">,</span>
                <span class="n">easyvvuq_version</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span>
                <span class="n">campaign_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">create_campaign</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Initialize the connection with the database and either resume or create the campaign.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
Name of the campaign.</li>
<li><strong>work_dir</strong> (str):
Work directory, defaults to cwd.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.add_app" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.add_app">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">add_app</span><span class="signature">(self, name=None, params=None, actions=None, set_active=True)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">add_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_active</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add an application to the CampaignDB.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            Name of the application.</span>
<span class="sd">        params : dict</span>
<span class="sd">            Description of the parameters to associate with the application.</span>
<span class="sd">        actions : Actions</span>
<span class="sd">            An instance of Actions containing actions to be executed</span>
<span class="sd">        set_active: bool</span>
<span class="sd">            Should the added app be set to be the currently active app?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Verify input parameters dict</span>
        <span class="n">paramsspec</span> <span class="o">=</span> <span class="n">ParamsSpecification</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">appname</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># validate application input</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">AppInfo</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">paramsspec</span><span class="o">=</span><span class="n">paramsspec</span><span class="p">,</span>
            <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">set_active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Add an application to the CampaignDB.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
Name of the application.</li>
<li><strong>params</strong> (dict):
Description of the parameters to associate with the application.</li>
<li><strong>actions</strong> (Actions):
An instance of Actions containing actions to be executed</li>
<li><strong>set_active</strong> (bool):
Should the added app be set to be the currently active app?</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.set_app" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.set_app">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_app</span><span class="signature">(self, app_name)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set active app for the campaign.</span>

<span class="sd">        Application information is retrieved from `self.campaign_db`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        app_name: str</span>
<span class="sd">            Name of selected app, if `None` given then first app will be</span>
<span class="sd">            selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="n">app_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">app_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_active_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
        <span class="c1"># Resurrect the app encoder, decoder and collation elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set active app for the campaign.</p>

<p>Application information is retrieved from <code>self.campaign_db</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>app_name</strong> (str):
Name of selected app, if <code>None</code> given then first app will be
selected.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.replace_actions" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.replace_actions">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">replace_actions</span><span class="signature">(self, app_name, actions)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">replace_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Replace actions for an app with a given name.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        app_name: str</span>
<span class="sd">            Name of the app.</span>
<span class="sd">        actions: Actions</span>
<span class="sd">            `Actions` instance, will replace the current `Actions` of an app.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">replace_actions</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="n">actions</span>
</pre></div>

        </details>

            <div class="docstring"><p>Replace actions for an app with a given name.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>app_name</strong> (str):
Name of the app.</li>
<li><strong>actions</strong> (Actions):
<code>Actions</code> instance, will replace the current <code>Actions</code> of an app.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.set_sampler" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.set_sampler">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_sampler</span><span class="signature">(self, sampler, update=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set active sampler.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sampler : Sampler</span>
<span class="sd">            Sampler that will be used to create runs for the current campaign.</span>
<span class="sd">        update : bool</span>
<span class="sd">            If set to True it will not add the sampler to the database, just change </span>
<span class="sd">            it as the active sampler.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sampler</span><span class="p">,</span> <span class="n">BaseSamplingElement</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;set_sampler() must be passed a sampling element&quot;</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="n">sampler</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_sampler</span><span class="p">(</span><span class="n">sampler</span><span class="p">)</span>
            <span class="n">sampler</span><span class="o">.</span><span class="n">sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set active sampler.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>sampler</strong> (Sampler):
Sampler that will be used to create runs for the current campaign.</li>
<li><strong>update</strong> (bool):
If set to True it will not add the sampler to the database, just change 
it as the active sampler.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.add_runs" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.add_runs">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">add_runs</span><span class="signature">(self, runs, mark_invalid=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">add_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add runs to the database.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        runs : list of dicts</span>
<span class="sd">            Each dict defines the value of each model parameter listed in</span>
<span class="sd">            self.params_info for a run to be added to self.runs</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            Will mark runs that fail verification as invalid (but will not raise an exception)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;No app is currently set for this campaign. &quot;</span>
                   <span class="s2">&quot;Use set_app(&#39;name_of_app&#39;).&quot;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">app_default_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s2">&quot;params&quot;</span><span class="p">]</span>
        <span class="n">run_info_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">new_run</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;add_run() was passed new_run of type None. Bad sampler?&quot;</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1"># Verify and complete run with missing/default param values</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mark_invalid</span><span class="p">:</span>
                    <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>
            <span class="c1"># Add to run queue</span>
            <span class="n">run_info</span> <span class="o">=</span> <span class="n">RunInfo</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                               <span class="n">params</span><span class="o">=</span><span class="n">new_run</span><span class="p">,</span>
                               <span class="n">sample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                               <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
                               <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
            <span class="n">run_info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">run_info_list</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Add runs to the database.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>runs</strong> (list of dicts):
Each dict defines the value of each model parameter listed in
self.params_info for a run to be added to self.runs</li>
<li><strong>mark_invalid</strong> (bool):
Will mark runs that fail verification as invalid (but will not raise an exception)</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.draw_samples" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.draw_samples">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">draw_samples</span><span class="signature">(self, num_samples=0, mark_invalid=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_samples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws `num_samples` sets of parameters from the currently set</span>
<span class="sd">        sampler, resulting in `num_samples` new runs added to the</span>
<span class="sd">        runs list. If `num_samples` is 0 (its default value) then</span>
<span class="sd">        this method draws ALL samples from the sampler, until exhaustion (this</span>
<span class="sd">        will fail if the sampler is not finite).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        num_samples : int</span>
<span class="sd">            Number of samples to draw from the active sampling element.</span>
<span class="sd">            By default is 0 (draw ALL samples)</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            If True will mark runs that go outside valid parameter range as INVALID.</span>
<span class="sd">            This is useful for MCMC style methods where you want those runs to evaluate</span>
<span class="sd">            to low probabilities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make sure `num_samples` is not 0 for an infinite generator</span>
        <span class="c1"># (this would add runs forever...)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">is_finite</span><span class="p">()</span> <span class="ow">and</span> <span class="n">num_samples</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sampling_element &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">element_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                   <span class="sa">f</span><span class="s2">&quot;is an infinite generator, therefore a finite number of &quot;</span>
                   <span class="sa">f</span><span class="s2">&quot;draws (n &gt; 0) must be specified.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">num_added</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">new_runs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">:</span>
            <span class="n">new_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_run</span><span class="p">)</span>
            <span class="n">num_added</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">num_samples</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">num_added</span> <span class="o">&gt;=</span> <span class="n">num_samples</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">new_runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="p">)</span>
        <span class="c1"># Write sampler&#39;s new state to database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">update_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_runs</span>
</pre></div>

        </details>

            <div class="docstring"><p>Draws <code>num_samples</code> sets of parameters from the currently set
sampler, resulting in <code>num_samples</code> new runs added to the
runs list. If <code>num_samples</code> is 0 (its default value) then
this method draws ALL samples from the sampler, until exhaustion (this
will fail if the sampler is not finite).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>num_samples</strong> (int):
Number of samples to draw from the active sampling element.
By default is 0 (draw ALL samples)</li>
<li><strong>mark_invalid</strong> (bool):
If True will mark runs that go outside valid parameter range as INVALID.
This is useful for MCMC style methods where you want those runs to evaluate
to low probabilities.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.list_runs" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.list_runs">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">list_runs</span><span class="signature">(self, sampler=None, campaign=None, app_id=None, status=None)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">list_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of runs in the CampaignDB.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        sampler: int</span>
<span class="sd">            Sampler id to filter for.</span>
<span class="sd">        campaign: int</span>
<span class="sd">            Campaign id to filter for.</span>
<span class="sd">        app_id: int</span>
<span class="sd">            App id to filter for.</span>
<span class="sd">        status: Status</span>
<span class="sd">            Status to filter for.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of runs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
            <span class="n">sampler</span><span class="o">=</span><span class="n">sampler</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="n">app_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">))</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get list of runs in the CampaignDB.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>sampler</strong> (int):
Sampler id to filter for.</li>
<li><strong>campaign</strong> (int):
Campaign id to filter for.</li>
<li><strong>app_id</strong> (int):
App id to filter for.</li>
<li><strong>status</strong> (Status):
Status to filter for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>list of runs</strong></li>
</ul>
</div>


                            </div>
                            <div id="Campaign.get_campaign_runs_dir" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.get_campaign_runs_dir">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_campaign_runs_dir</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_campaign_runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the runs directory from the CampaignDB.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Path in which the runs information will be written.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get the runs directory from the CampaignDB.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>str</strong>: Path in which the runs information will be written.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.relocate" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.relocate">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">relocate</span><span class="signature">(self, campaign_dir)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">relocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">campaign_dir</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Relocate the campaign by specifying a new path where campaign is located.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        new_path: str</span>
<span class="sd">            new runs directory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;specified directory does not exist: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">relocate</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Relocate the campaign by specifying a new path where campaign is located.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>new_path</strong> (str):
new runs directory</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.execute" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.execute">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">execute</span><span class="signature">(self, nsamples=0, pool=None, mark_invalid=False, sequential=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This will draw samples and execute the Actions on those samples.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nsamples: int</span>
<span class="sd">            Number of samples to draw. For infinite samplers or when you want to process </span>
<span class="sd">            samples in batches.</span>
<span class="sd">        pool: Executor</span>
<span class="sd">            A pool object to be used when processing runs (e.g. instance of `ThreadPoolExecutor` or</span>
<span class="sd">            `ProcessPoolExecutor`).</span>
<span class="sd">        mark_invalid: bool</span>
<span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
<span class="sd">            want to avoid the concurrent module for some reason).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
        <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>This will draw samples and execute the Actions on those samples.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>nsamples</strong> (int):
Number of samples to draw. For infinite samplers or when you want to process 
samples in batches.</li>
<li><strong>pool</strong> (Executor):
A pool object to be used when processing runs (e.g. instance of <code>ThreadPoolExecutor</code> or
<code>ProcessPoolExecutor</code>).</li>
<li><strong>mark_invalid</strong> (bool):
Mark runs that go outside the specified input parameter range as INVALID.</li>
<li><strong>sequential</strong> (bool):
Whether to process samples sequentially (sometimes more efficient or you might
want to avoid the concurrent module for some reason).</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.apply_for_each_sample" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.apply_for_each_sample">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">apply_for_each_sample</span><span class="signature">(self, actions, status=&lt;Status.NEW: 1&gt;, sequential=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">apply_for_each_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;For each run in this Campaign&#39;s run list, apply the specified action</span>
<span class="sd">        (an object of type Action).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        actions: Actions</span>
<span class="sd">            Actions to be applied to each relevant run in the database.</span>
<span class="sd">        status: Status</span>
<span class="sd">            Will apply the Actions only to those runs whose status is as specified.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
<span class="sd">            want to avoid the concurrent module for some reason).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ActionPool</span>
<span class="sd">            An object containing ActionStatus instances to track action execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Loop through all runs in this campaign with status ENCODED, and</span>
        <span class="c1"># run the specified action on each run&#39;s dir</span>
        <span class="k">def</span> <span class="nf">inits</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">run_id</span><span class="p">,</span> <span class="n">run_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
                    <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]):</span>
                <span class="n">previous</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;campaign_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;rundir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;run_dir&#39;</span><span class="p">]</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;collated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">yield</span> <span class="n">previous</span>
        <span class="k">return</span> <span class="n">ActionPool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">inits</span><span class="o">=</span><span class="n">inits</span><span class="p">(),</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>For each run in this Campaign's run list, apply the specified action
(an object of type Action).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>actions</strong> (Actions):
Actions to be applied to each relevant run in the database.</li>
<li><strong>status</strong> (Status):
Will apply the Actions only to those runs whose status is as specified.</li>
<li><strong>sequential</strong> (bool):
Whether to process samples sequentially (sometimes more efficient or you might
want to avoid the concurrent module for some reason).</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>ActionPool</strong>: An object containing ActionStatus instances to track action execution.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.iterate" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.iterate">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">iterate</span><span class="signature">(self, nsamples=0, pool=None, mark_invalid=False, sequential=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This is the equivalent of `execute` for methods that rely on the output of the</span>
<span class="sd">        previous sampling stage (designed for MCMC, should work for others).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nsamples : int</span>
<span class="sd">            Number of samples to draw (during a single iteration).</span>
<span class="sd">        pool : Executor</span>
<span class="sd">            An Executor instance. For example ThreadPoolExecutor or a Dask Client. Defaults</span>
<span class="sd">            to the ThreadPoolExecutor.</span>
<span class="sd">        mark_invalid : bool</span>
<span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
<span class="sd">        sequential: bool</span>
<span class="sd">            Will execute the `Actions` associated with runs sequentially. Might be more</span>
<span class="sd">            efficient in some situations.</span>

<span class="sd">        Yields</span>
<span class="sd">        ------</span>
<span class="sd">        ActionPool</span>
<span class="sd">            An object containing Futures instances to track action execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
            <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">invalid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_invalid_runs</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ignored_runs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">run_id</span> <span class="ow">in</span> <span class="n">ignored_runs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">)</span><span class="o">.</span>\
                    <span class="nb">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">run_id</span><span class="p">))</span><span class="o">.</span>\
                    <span class="n">update</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>This is the equivalent of <code><a href="#Campaign.execute">execute</a></code> for methods that rely on the output of the
previous sampling stage (designed for MCMC, should work for others).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>nsamples</strong> (int):
Number of samples to draw (during a single iteration).</li>
<li><strong>pool</strong> (Executor):
An Executor instance. For example ThreadPoolExecutor or a Dask Client. Defaults
to the ThreadPoolExecutor.</li>
<li><strong>mark_invalid</strong> (bool):
Mark runs that go outside the specified input parameter range as INVALID.</li>
<li><strong>sequential</strong> (bool):
Will execute the <code>Actions</code> associated with runs sequentially. Might be more
efficient in some situations.</li>
</ul>

<h6 id="yields">Yields</h6>

<ul>
<li><strong>ActionPool</strong>: An object containing Futures instances to track action execution.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.recollate" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.recollate">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">recollate</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">recollate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clears the current collation table, changes all COLLATED status runs</span>
<span class="sd">           back to ENCODED, then runs collate() again</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">collated_run_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">run_ids</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">collated_run_ids</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collate</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Clears the current collation table, changes all COLLATED status runs
back to ENCODED, then runs collate() again</p>
</div>


                            </div>
                            <div id="Campaign.get_collation_result" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.get_collation_result">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_collation_result</span><span class="signature">(self, last_iteration=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_collation_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return dataframe containing all collated results</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        last_iteration : bool</span>
<span class="sd">            Will only return the result of the last iteration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        DataFrame</span>
<span class="sd">            A DataFrame with the simulation results along with the inputs </span>
<span class="sd">            used to produce them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                                            <span class="n">status</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return dataframe containing all collated results</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>last_iteration</strong> (bool):
Will only return the result of the last iteration.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>DataFrame</strong>: A DataFrame with the simulation results along with the inputs 
used to produce them.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.get_invalid_runs" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.get_invalid_runs">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_invalid_runs</span><span class="signature">(self, last_iteration=False)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_invalid_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return dataframe containing all results marked as INVALID.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        last_iteration : bool</span>
<span class="sd">            Will only return the result of the last iteration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        DataFrame</span>
<span class="sd">            A DataFrame with the results form simulations that were marked as INVALID.</span>
<span class="sd">            These will usually be the ones that went outside the specified parameter ranges.</span>
<span class="sd">            These still have to be accounted for in some way by some methods (e.g. MCMC).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
                                            <span class="n">status</span><span class="o">=</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return dataframe containing all results marked as INVALID.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>last_iteration</strong> (bool):
Will only return the result of the last iteration.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>DataFrame</strong>: A DataFrame with the results form simulations that were marked as INVALID.
These will usually be the ones that went outside the specified parameter ranges.
These still have to be accounted for in some way by some methods (e.g. MCMC).</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.apply_analysis" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.apply_analysis">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">apply_analysis</span><span class="signature">(self, analysis)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">apply_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run the `analysis` element on the output of the last run collation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        analysis : Analysis</span>
<span class="sd">            Element that performs a VVUQ analysis on a dataframe summary of</span>
<span class="sd">            run outputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Apply analysis element to most recent collation result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">data_frame</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">())</span>
</pre></div>

        </details>

            <div class="docstring"><p>Run the <code>analysis</code> element on the output of the last run collation.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>analysis</strong> (Analysis):
Element that performs a VVUQ analysis on a dataframe summary of
run outputs.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.analyse" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.analyse">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">analyse</span><span class="signature">(self, **kwargs)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">analyse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;If available will call an appropriate analysis class on the collation result.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        **kwargs : dict</span>
<span class="sd">            Argument to the analysis class constructor (after sampler).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        AnalysisResults</span>
<span class="sd">            An object representing analysis results. Can be used to interact with those results</span>
<span class="sd">            in some way. Plot, retrieve surrogate models and so on. </span>
<span class="sd">            See `easyvvuq.analysis.AnalysisResults` for further information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">collation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">analysis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">analysis_class</span><span class="p">(</span><span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">collation_result</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This sampler does not have a corresponding analysis class&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>If available will call an appropriate analysis class on the collation result.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>**kwargs</strong> (dict):
Argument to the analysis class constructor (after sampler).</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>AnalysisResults</strong>: An object representing analysis results. Can be used to interact with those results
in some way. Plot, retrieve surrogate models and so on. 
See <code><a href="analysis.html#AnalysisResults">easyvvuq.analysis.AnalysisResults</a></code> for further information.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.get_last_analysis" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.get_last_analysis">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_last_analysis</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_last_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the output of the most recently run analysis element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No last analysis output available.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the output of the most recently run analysis element.</p>
</div>


                            </div>
                            <div id="Campaign.get_active_sampler" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.get_active_sampler">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_active_sampler</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_active_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the active sampler element in use by this campaign.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The sampler currently in use</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span>
</pre></div>

        </details>

            <div class="docstring"><p>Return the active sampler element in use by this campaign.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>The sampler currently in use</strong></li>
</ul>
</div>


                            </div>
                            <div id="Campaign.ignore_runs" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.ignore_runs">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">ignore_runs</span><span class="signature">(self, list_of_run_IDs)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">ignore_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Flags the specified runs to be IGNORED in future collation. Note that</span>
<span class="sd">        this does NOT remove previously collated results from the collation table.</span>
<span class="sd">        For that you must refresh the collation by running recollate().</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        list</span>
<span class="sd">            The list of run IDs for the runs that should be set to status IGNORED</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Flags the specified runs to be IGNORED in future collation. Note that
this does NOT remove previously collated results from the collation table.
For that you must refresh the collation by running recollate().</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list</strong>: The list of run IDs for the runs that should be set to status IGNORED</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.rerun" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.rerun">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">rerun</span><span class="signature">(self, list_of_run_IDs)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">rerun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the status of the specified runs to ENCODED, so that their results</span>
<span class="sd">        may be recollated later (presumably after extending, rerunning or otherwise</span>
<span class="sd">        modifying the data in the relevant run folder). Note that this method will</span>
<span class="sd">        NOT perform any execution - it simply flags the run in EasyVVUQ as being</span>
<span class="sd">        uncollated. Actual execution is (as usual) the job of the user or middleware.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        list</span>
<span class="sd">            The list of run IDs for the runs that should be set to status ENCODED</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">run_ID</span> <span class="ow">in</span> <span class="n">list_of_run_IDs</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_run_status</span><span class="p">(</span><span class="n">run_ID</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot rerun </span><span class="si">{</span><span class="n">run_ID</span><span class="si">}</span><span class="s2"> as it has status NEW, and must&quot;</span>
                       <span class="sa">f</span><span class="s2">&quot;be encoded before execution.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Sets the status of the specified runs to ENCODED, so that their results
may be recollated later (presumably after extending, rerunning or otherwise
modifying the data in the relevant run folder). Note that this method will
NOT perform any execution - it simply flags the run in EasyVVUQ as being
uncollated. Actual execution is (as usual) the job of the user or middleware.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list</strong>: The list of run IDs for the runs that should be set to status ENCODED</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.get_active_app" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Campaign.get_active_app">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_active_app</span><span class="signature">(self)</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_active_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a dict of information regarding the application that is currently</span>
<span class="sd">        set for this campaign.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span>
</pre></div>

        </details>

            <div class="docstring"><p>Returns a dict of information regarding the application that is currently
set for this campaign.</p>
</div>


                            </div>
                </section>
    </main>
</body>
</html>