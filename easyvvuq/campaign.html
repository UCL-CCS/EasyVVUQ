<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>easyvvuq.campaign API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../easyvvuq.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;easyvvuq</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#logger">logger</a>
            </li>
            <li>
                    <a class="class" href="#Campaign">Campaign</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Campaign.__init__">Campaign</a>
                        </li>
                        <li>
                                <a class="variable" href="#Campaign.work_dir">work_dir</a>
                        </li>
                        <li>
                                <a class="variable" href="#Campaign.verify_all_runs">verify_all_runs</a>
                        </li>
                        <li>
                                <a class="variable" href="#Campaign.campaign_name">campaign_name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Campaign.campaign_id">campaign_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Campaign.campaign_db">campaign_db</a>
                        </li>
                        <li>
                                <a class="variable" href="#Campaign.last_analysis">last_analysis</a>
                        </li>
                        <li>
                                <a class="variable" href="#Campaign.campaign_dir">campaign_dir</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.init_db">init_db</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.add_app">add_app</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.set_app">set_app</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.replace_actions">replace_actions</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.set_sampler">set_sampler</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.add_external_runs">add_external_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.add_runs">add_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.draw_samples">draw_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.list_runs">list_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_campaign_runs_dir">get_campaign_runs_dir</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.relocate">relocate</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.execute">execute</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.apply_for_each_sample">apply_for_each_sample</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.iterate">iterate</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.recollate">recollate</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_collation_result">get_collation_result</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_invalid_runs">get_invalid_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.apply_analysis">apply_analysis</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.analyse">analyse</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_last_analysis">get_last_analysis</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_active_sampler">get_active_sampler</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.ignore_runs">ignore_runs</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.rerun">rerun</a>
                        </li>
                        <li>
                                <a class="function" href="#Campaign.get_active_app">get_active_app</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../easyvvuq.html">easyvvuq</a><wbr>.campaign    </h1>

                        <div class="docstring"><p>EasyVVUQ Campaign</p>

<p>This module contains the Campaign class that is used to coordinate all
EasyVVUQ workflows.</p>
</div>

                        <input id="mod-campaign-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-campaign-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;EasyVVUQ Campaign</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">This module contains the Campaign class that is used to coordinate all</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="sd">EasyVVUQ workflows.</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="kn">import</span> <span class="nn">json</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="kn">import</span> <span class="nn">logging</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="kn">import</span> <span class="nn">tempfile</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="kn">import</span> <span class="nn">easyvvuq</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ProcessPoolExecutor</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="kn">from</span> <span class="nn">easyvvuq.constants</span> <span class="kn">import</span> <span class="n">default_campaign_prefix</span><span class="p">,</span> <span class="n">Status</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="kn">from</span> <span class="nn">easyvvuq.data_structs</span> <span class="kn">import</span> <span class="n">RunInfo</span><span class="p">,</span> <span class="n">CampaignInfo</span><span class="p">,</span> <span class="n">AppInfo</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="kn">from</span> <span class="nn">easyvvuq.sampling</span> <span class="kn">import</span> <span class="n">BaseSamplingElement</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="kn">from</span> <span class="nn">easyvvuq.actions</span> <span class="kn">import</span> <span class="n">ActionPool</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="kn">import</span> <span class="nn">easyvvuq.db.sql</span> <span class="k">as</span> <span class="nn">db</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="s2">    Copyright 2018 Robin A. Richardson, David W. Wright</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="s2">    This file is part of EasyVVUQ</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="s2">    EasyVVUQ is free software: you can redistribute it and/or modify</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="s2">    it under the terms of the Lesser GNU General Public License as published by</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="s2">    the Free Software Foundation, either version 3 of the License, or</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="s2">    (at your option) any later version.</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="s2">    EasyVVUQ is distributed in the hope that it will be useful,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="s2">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="s2">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="s2">    Lesser GNU General Public License for more details.</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="s2">    You should have received a copy of the Lesser GNU General Public License</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="s2">    along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;LGPL&quot;</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="k">class</span> <span class="nc">Campaign</span><span class="p">:</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Campaigns organise the dataflow in EasyVVUQ workflows.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">    The Campaign functions as as state machine for the VVUQ workflows. It uses a</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">    database (CampaignDB) to store information on both the target application</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">    and the VVUQ algorithms being employed. It also collects data from the simulations</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">    and can be used to store and resume your state.</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">    Notes</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">    -----</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">    Multiple campaigns can be combined in a CampaignDB. Hence the particular</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">    campaign we are currently working on will be specified using `campaign_id`.</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">    Parameters</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">    ----------</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">    name: str</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">        Name of the Campaign. Freely chosen, serves as a human-readable way of distinguishing</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">        between several campaigns in the same database.</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">    params: dict, optional</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">        Description of the parameters to associated with the application. Will be used to create</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">        an app when creating the campaign. It is also possible to add apps manually using `add_app`</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">        method of the Campaign class. But this can be a useful shorthand when working with single</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">        app campaigns. To use this functionality both `params` and `actions` has to be specified.</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">        The name of this app will be the same as the name of the Campaign.</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">    actions: Actions, optional</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">        Actions object associated with an application. See description of the `params` parameter</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">        for more details.</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">    db_location: str, optional</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">        Location of the underlying campaign database - either a path or</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">        acceptable URI for SQLAlchemy.</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">    work_dir: str, optional, default=&#39;./&#39;</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">        Path to working directory - used to store campaign directory.</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">    change_to_state: bool, optional, default=False</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">        Should we change to the directory containing any specified `state_file`</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">        in order to make relative paths work.</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="sd">    verify_all_runs: bool, optional, default=True</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">        Check all new runs being added for unrecognised params (not defined for the currently set</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">        app), values lying within defined physical range, type checking etc. This should normally</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">        always be set to True, but in cases where the performance is too degraded, the checks can</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">        be disabled by setting to False.</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">    Attributes</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">    ----------</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">    campaign_name : str or None</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">        Name for the campaign/workflow.</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">    _campaign_dir: str or None</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">        Path to the directory campaign uses for local storage (runs inputs etc)</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">    db_location : str or None</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">        Location of the underlying campaign database - either a path or</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">        acceptable URI for SQLAlchemy.</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">    _log: list</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">        The log of all elements that have been applied, with information about</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">        their application</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">    campaign_id : int</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">        ID number for the current campaign in the db.CampaignDB.</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">    campaign_db: easyvvuq.db.Basedb.CampaignDB</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">        A campaign database object</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">    last_analysis:</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">        The result of the most recent analysis carried out on this campaign</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">    _active_app: dict</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">        Info about currently set app</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">    _active_app_name: str</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">        Name of currently set app</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">    _active_sampler_id: int</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">        The database id of the currently set Sampler object</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">    Examples</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">    --------</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">    A typical instantiation might look like this.</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">    &gt;&gt;&gt; params = {</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">            &quot;S0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 997},</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">            &quot;I0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 3},</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">            &quot;beta&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.2},</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">            &quot;gamma&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.04, &quot;min&quot;: 0.0, &quot;max&quot;: 1.0},</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">            &quot;iterations&quot;: {&quot;type&quot;: &quot;integer&quot;, &quot;default&quot;: 100},</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">            &quot;outfile&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;output.csv&quot;}</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">        }</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">    &gt;&gt;&gt; encoder = uq.encoders.GenericEncoder(template_fname=&#39;sir.template&#39;, delimiter=&#39;$&#39;, target_filename=&#39;input.json&#39;)</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">    &gt;&gt;&gt; decoder = uq.decoders.SimpleCSV(target_filename=&#39;output.csv&#39;, output_columns=[&#39;I&#39;])</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">    &gt;&gt;&gt; actions = uq.actions.local_execute(encoder, os.path.abspath(&#39;sir&#39;) + &#39; input.json&#39;, decoder)</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">    &gt;&gt;&gt; campaign = uq.Campaign(name=&#39;sir&#39;, params=params, actions=actions)</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">    A simplified one (without an app) might look simply like this.</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">    &gt;&gt;&gt; campaign = Campaign(&#39;simple&#39;)</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">    An app then can be added.</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="sd">    &gt;&gt;&gt; campaign.add_app(&#39;simple_app&#39;, params=params, actions=actions)</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>            <span class="n">name</span><span class="p">,</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>            <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>            <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>            <span class="n">db_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>            <span class="n">work_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>            <span class="n">change_to_state</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>            <span class="n">verify_all_runs</span><span class="o">=</span><span class="kc">True</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>    <span class="p">):</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">work_dir</span><span class="p">))</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span> <span class="o">=</span> <span class="n">verify_all_runs</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>        <span class="k">if</span> <span class="n">db_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="s2">&quot;sqlite:///&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">+</span> <span class="s2">&quot;/campaign.db&quot;</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="n">db_location</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_state_dir</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>        <span class="c1"># here we assume that the user wants to add an app</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">actions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>    <span class="nd">@property</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">campaign_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the path in which to load/save files related to the campaign.</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">        Returns</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a><span class="sd">        -------</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        str</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">            Path to the campaign directory - given as a subdirectory of the</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">            working directory.</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>    <span class="k">def</span> <span class="nf">init_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">work_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the connection with the database and either resume or create the campaign.</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        Parameters</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        ----------</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">        name: str</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">            Name of the campaign.</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">        work_dir: str</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">            Work directory, defaults to cwd.</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">CampaignDB</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_active_app</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_dir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">):</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Campaign directory (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="s2">) does not exist.&quot;</span><span class="p">)</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_sampler_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">)</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span><span class="p">)</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resume_campaign</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>            <span class="n">info</span> <span class="o">=</span> <span class="n">CampaignInfo</span><span class="p">(</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>                <span class="n">campaign_dir_prefix</span><span class="o">=</span><span class="n">default_campaign_prefix</span><span class="p">,</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>                <span class="n">easyvvuq_version</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>                <span class="n">campaign_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">create_campaign</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>    <span class="k">def</span> <span class="nf">add_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_active</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an application to the CampaignDB.</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">        Parameters</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">        ----------</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">        name : str</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">            Name of the application.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">        params : dict</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="sd">            Description of the parameters to associate with the application.</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="sd">        actions : Actions</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a><span class="sd">            An instance of Actions containing actions to be executed</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="sd">        set_active: bool</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">            Should the added app be set to be the currently active app?</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>        <span class="c1"># Verify input parameters dict</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>        <span class="n">paramsspec</span> <span class="o">=</span> <span class="n">easyvvuq</span><span class="o">.</span><span class="n">ParamsSpecification</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">appname</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>        <span class="c1"># validate application input</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>        <span class="n">app</span> <span class="o">=</span> <span class="n">AppInfo</span><span class="p">(</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>            <span class="n">paramsspec</span><span class="o">=</span><span class="n">paramsspec</span><span class="p">,</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>            <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">,</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="p">)</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>        <span class="k">if</span> <span class="n">set_active</span><span class="p">:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>    <span class="k">def</span> <span class="nf">set_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set active app for the campaign.</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">        Application information is retrieved from `self.campaign_db`.</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">        Parameters</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="sd">        ----------</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a><span class="sd">        app_name: str</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a><span class="sd">            Name of selected app, if `None` given then first app will be</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="sd">            selected.</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="n">app_name</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">app_name</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_active_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>        <span class="c1"># Resurrect the app encoder, decoder and collation elements</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>    <span class="k">def</span> <span class="nf">replace_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace actions for an app with a given name.</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a><span class="sd">        Parameters</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">        ----------</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="sd">        app_name: str</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a><span class="sd">            Name of the app.</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="sd">        actions: Actions</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a><span class="sd">            `Actions` instance, will replace the current `Actions` of an app.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">replace_actions</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">)</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="n">actions</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>    <span class="k">def</span> <span class="nf">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set active sampler.</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a><span class="sd">        Parameters</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="sd">        ----------</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">        sampler : Sampler</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a><span class="sd">            Sampler that will be used to create runs for the current campaign.</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">        update : bool</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">            If set to True it will not add the sampler to the database, just change</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="sd">            it as the active sampler.</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="n">sampler</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">update</span><span class="p">:</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_sampler</span><span class="p">(</span><span class="n">sampler</span><span class="p">)</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>            <span class="n">sampler</span><span class="o">.</span><span class="n">sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span><span class="p">)</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>    <span class="k">def</span> <span class="nf">add_external_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_files</span><span class="p">,</span> <span class="n">output_files</span><span class="p">,</span> <span class="n">input_decoder</span><span class="p">,</span> <span class="n">output_decoder</span><span class="p">):</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes a list of files and adds them to the database. This method is to be</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">        used when adding runs to the EasyVVUQ database that were not executed using</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="sd">        EasyVVUQ.</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">        Parameters</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="sd">        ----------</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="sd">        output_files: list of str</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="sd">            A list of output file paths to be loaded to the database.</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">        decoder: Decoder</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="sd">            A decoder that will be used to parse these files.</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>        <span class="k">for</span> <span class="n">input_file</span> <span class="ow">in</span> <span class="n">input_files</span><span class="p">:</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>            <span class="n">input_decoder</span><span class="o">.</span><span class="n">target_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>            <span class="n">params</span> <span class="o">=</span> <span class="n">input_decoder</span><span class="o">.</span><span class="n">parse_sim_output</span><span class="p">({</span><span class="s1">&#39;run_dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">input_file</span><span class="p">)})</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>            <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>        <span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>        <span class="k">for</span> <span class="n">output_file</span> <span class="ow">in</span> <span class="n">output_files</span><span class="p">:</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>            <span class="n">output_decoder</span><span class="o">.</span><span class="n">target_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">output_decoder</span><span class="o">.</span><span class="n">parse_sim_output</span><span class="p">({</span><span class="s1">&#39;run_dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output_file</span><span class="p">)})</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>            <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>        <span class="k">for</span> <span class="n">params</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">):</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>            <span class="n">table</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">(</span><span class="n">run_name</span><span class="o">=</span><span class="s1">&#39;run_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>                                <span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>                                <span class="n">params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>                                <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>                                <span class="n">run_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_campaign_runs_dir</span><span class="p">(),</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>                                <span class="n">result</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">),</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>                                <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>                                <span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>    <span class="k">def</span> <span class="nf">add_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add runs to the database.</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a><span class="sd">        Parameters</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">        ----------</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">        runs : list of dicts</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a><span class="sd">            Each dict defines the value of each model parameter listed in</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="sd">            self.params_info for a run to be added to self.runs</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a><span class="sd">            Will mark runs that fail verification as invalid (but will not raise an exception)</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;No app is currently set for this campaign. &quot;</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>                   <span class="s2">&quot;Use set_app(&#39;name_of_app&#39;).&quot;</span><span class="p">)</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>        <span class="n">app_default_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s2">&quot;params&quot;</span><span class="p">]</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>        <span class="n">run_info_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>            <span class="k">if</span> <span class="n">new_run</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;add_run() was passed new_run of type None. Bad sampler?&quot;</span><span class="p">)</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>            <span class="c1"># Verify and complete run with missing/default param values</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>                <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span><span class="p">)</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>                <span class="k">if</span> <span class="n">mark_invalid</span><span class="p">:</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>                    <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>                    <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>                    <span class="k">raise</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>            <span class="c1"># Add to run queue</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>            <span class="n">run_info</span> <span class="o">=</span> <span class="n">RunInfo</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>                               <span class="n">params</span><span class="o">=</span><span class="n">new_run</span><span class="p">,</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>                               <span class="n">sample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>                               <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>                               <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>            <span class="n">run_info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run_info</span><span class="p">)</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">run_info_list</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span><span class="p">)</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>    <span class="k">def</span> <span class="nf">draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_samples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Draws `num_samples` sets of parameters from the currently set</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a><span class="sd">        sampler, resulting in `num_samples` new runs added to the</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">        runs list. If `num_samples` is 0 (its default value) then</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="sd">        this method draws ALL samples from the sampler, until exhaustion (this</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">        will fail if the sampler is not finite).</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="sd">        Parameters</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="sd">        ----------</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="sd">        num_samples : int</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="sd">            Number of samples to draw from the active sampling element.</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="sd">            By default is 0 (draw ALL samples)</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">            If True will mark runs that go outside valid parameter range as INVALID.</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">            This is useful for MCMC style methods where you want those runs to evaluate</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a><span class="sd">            to low probabilities.</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>        <span class="c1"># Make sure `num_samples` is not 0 for an infinite generator</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>        <span class="c1"># (this would add runs forever...)</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">is_finite</span><span class="p">()</span> <span class="ow">and</span> <span class="n">num_samples</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sampling_element &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">element_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>                   <span class="sa">f</span><span class="s2">&quot;is an infinite generator, therefore a finite number of &quot;</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>                   <span class="sa">f</span><span class="s2">&quot;draws (n &gt; 0) must be specified.&quot;</span><span class="p">)</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a>        <span class="n">num_added</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a>        <span class="n">new_runs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">:</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>            <span class="n">new_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_run</span><span class="p">)</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>            <span class="n">num_added</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>            <span class="k">if</span> <span class="n">num_samples</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">num_added</span> <span class="o">&gt;=</span> <span class="n">num_samples</span><span class="p">:</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>                <span class="k">break</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">new_runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>        <span class="c1"># Write sampler&#39;s new state to database</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">update_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">)</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>        <span class="k">return</span> <span class="n">new_runs</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>    <span class="k">def</span> <span class="nf">list_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of runs in the CampaignDB.</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a><span class="sd">        Parameters</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a><span class="sd">        ----------</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a><span class="sd">        sampler: int</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a><span class="sd">            Sampler id to filter for.</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a><span class="sd">        campaign: int</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a><span class="sd">            Campaign id to filter for.</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a><span class="sd">        app_id: int</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a><span class="sd">            App id to filter for.</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a><span class="sd">        status: Status</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="sd">            Status to filter for.</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a><span class="sd">        Returns</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a><span class="sd">        -------</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="sd">        list of runs</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>            <span class="n">sampler</span><span class="o">=</span><span class="n">sampler</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="n">app_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">))</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>    <span class="k">def</span> <span class="nf">get_campaign_runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the runs directory from the CampaignDB.</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a><span class="sd">        Returns</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a><span class="sd">        -------</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a><span class="sd">        str</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="sd">            Path in which the runs information will be written.</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>    <span class="k">def</span> <span class="nf">relocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">campaign_dir</span><span class="p">):</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relocate the campaign by specifying a new path where campaign is located.</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a><span class="sd">        Parameters</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a><span class="sd">        ----------</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">        new_path: str</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">            new runs directory</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">):</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;specified directory does not exist: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">))</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">relocate</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This will draw samples and execute the Actions on those samples.</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a><span class="sd">        Parameters</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a><span class="sd">        ----------</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a><span class="sd">        nsamples: int</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a><span class="sd">            Number of samples to draw. For infinite samplers or when you want to process</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a><span class="sd">            samples in batches.</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a><span class="sd">        pool: Executor</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a><span class="sd">            A pool object to be used when processing runs (e.g. instance of `ThreadPoolExecutor` or</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a><span class="sd">            `ProcessPoolExecutor`).</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a><span class="sd">        mark_invalid: bool</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a><span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a><span class="sd">        sequential: bool</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a><span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a><span class="sd">            want to avoid the concurrent module for some reason).</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>        <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>        <span class="k">return</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>    <span class="k">def</span> <span class="nf">apply_for_each_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;For each run in this Campaign&#39;s run list, apply the specified action</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a><span class="sd">        (an object of type Action).</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a><span class="sd">        Parameters</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="sd">        ----------</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a><span class="sd">        actions: Actions</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a><span class="sd">            Actions to be applied to each relevant run in the database.</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a><span class="sd">        status: Status</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a><span class="sd">            Will apply the Actions only to those runs whose status is as specified.</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a><span class="sd">        sequential: bool</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a><span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a><span class="sd">            want to avoid the concurrent module for some reason).</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a><span class="sd">        Returns</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a><span class="sd">        -------</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a><span class="sd">        ActionPool</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a><span class="sd">            An object containing ActionStatus instances to track action execution.</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>        <span class="c1"># Loop through all runs in this campaign with status ENCODED, and</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>        <span class="c1"># run the specified action on each run&#39;s dir</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>        <span class="k">def</span> <span class="nf">inits</span><span class="p">():</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>            <span class="k">for</span> <span class="n">run_id</span><span class="p">,</span> <span class="n">run_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>                    <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]):</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>                <span class="n">previous</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;campaign_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;rundir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;run_dir&#39;</span><span class="p">]</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;collated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>                <span class="k">yield</span> <span class="n">previous</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>        <span class="k">return</span> <span class="n">ActionPool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">inits</span><span class="o">=</span><span class="n">inits</span><span class="p">(),</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This is the equivalent of `execute` for methods that rely on the output of the</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a><span class="sd">        previous sampling stage (designed for MCMC, should work for others).</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a><span class="sd">        Parameters</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a><span class="sd">        ----------</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a><span class="sd">        nsamples : int</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a><span class="sd">            Number of samples to draw (during a single iteration).</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a><span class="sd">        pool : Executor</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a><span class="sd">            An Executor instance. For example ThreadPoolExecutor or a Dask Client. Defaults</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a><span class="sd">            to the ThreadPoolExecutor.</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a><span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a><span class="sd">        sequential: bool</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a><span class="sd">            Will execute the `Actions` associated with runs sequentially. Might be more</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a><span class="sd">            efficient in some situations.</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a><span class="sd">        Yields</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a><span class="sd">        ------</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a><span class="sd">        ActionPool</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a><span class="sd">            An object containing Futures instances to track action execution.</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>            <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>            <span class="k">yield</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a>            <span class="n">invalid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_invalid_runs</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>            <span class="n">ignored_runs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>            <span class="k">for</span> <span class="n">run_id</span> <span class="ow">in</span> <span class="n">ignored_runs</span><span class="p">:</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">)</span><span class="o">.</span>\
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>                    <span class="nb">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">run_id</span><span class="p">))</span><span class="o">.</span>\
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>                    <span class="n">update</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">})</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>    <span class="k">def</span> <span class="nf">recollate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears the current collation table, changes all COLLATED status runs</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a><span class="sd">           back to ENCODED, then runs collate() again</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a>        <span class="n">collated_run_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">run_ids</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">))</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">collated_run_ids</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collate</span><span class="p">()</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>    <span class="k">def</span> <span class="nf">get_collation_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return dataframe containing all collated results</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a><span class="sd">        Parameters</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a><span class="sd">        ----------</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a><span class="sd">        last_iteration : bool</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a><span class="sd">            Will only return the result of the last iteration.</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a><span class="sd">        Returns</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a><span class="sd">        -------</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a><span class="sd">        DataFrame</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a><span class="sd">            A DataFrame with the simulation results along with the inputs</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a><span class="sd">            used to produce them.</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>            <span class="n">status</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>    <span class="k">def</span> <span class="nf">get_invalid_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return dataframe containing all results marked as INVALID.</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a><span class="sd">        Parameters</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a><span class="sd">        ----------</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a><span class="sd">        last_iteration : bool</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a><span class="sd">            Will only return the result of the last iteration.</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a><span class="sd">        Returns</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a><span class="sd">        -------</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a><span class="sd">        DataFrame</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a><span class="sd">            A DataFrame with the results form simulations that were marked as INVALID.</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a><span class="sd">            These will usually be the ones that went outside the specified parameter ranges.</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a><span class="sd">            These still have to be accounted for in some way by some methods (e.g. MCMC).</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a>        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>            <span class="n">status</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span><span class="p">,</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>    <span class="k">def</span> <span class="nf">apply_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis</span><span class="p">):</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the `analysis` element on the output of the last run collation.</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a><span class="sd">        Parameters</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a><span class="sd">        ----------</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a><span class="sd">        analysis : Analysis</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a><span class="sd">            Element that performs a VVUQ analysis on a dataframe summary of</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a><span class="sd">            run outputs.</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a>        <span class="c1"># Apply analysis element to most recent collation result</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">data_frame</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">())</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a>    <span class="k">def</span> <span class="nf">analyse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;If available will call an appropriate analysis class on the collation result.</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a><span class="sd">        Parameters</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a><span class="sd">        ----------</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a><span class="sd">        **kwargs : dict</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a><span class="sd">            Argument to the analysis class constructor (after sampler).</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a><span class="sd">        Returns</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a><span class="sd">        -------</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a><span class="sd">        AnalysisResults</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a><span class="sd">            An object representing analysis results. Can be used to interact with those results</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a><span class="sd">            in some way. Plot, retrieve surrogate models and so on.</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a><span class="sd">            See `easyvvuq.analysis.AnalysisResults` for further information.</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>        <span class="n">collation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">()</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>            <span class="n">analysis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">analysis_class</span><span class="p">(</span><span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>            <span class="k">return</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">collation_result</span><span class="p">)</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This sampler does not have a corresponding analysis class&quot;</span><span class="p">)</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a>    <span class="k">def</span> <span class="nf">get_last_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the output of the most recently run analysis element.</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No last analysis output available.&quot;</span><span class="p">)</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns formatted summary of the current Campaign state.</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a><span class="sd">        Enables class to work with standard print() method</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a>        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;db_location = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a>                <span class="sa">f</span><span class="s2">&quot;active_sampler_id = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a>                <span class="sa">f</span><span class="s2">&quot;campaign_name = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a>                <span class="sa">f</span><span class="s2">&quot;campaign_dir = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a>                <span class="sa">f</span><span class="s2">&quot;campaign_id = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a>    <span class="k">def</span> <span class="nf">get_active_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the active sampler element in use by this campaign.</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a><span class="sd">        Returns</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a><span class="sd">        -------</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a><span class="sd">        The sampler currently in use</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a>    <span class="k">def</span> <span class="nf">ignore_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Flags the specified runs to be IGNORED in future collation. Note that</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a><span class="sd">        this does NOT remove previously collated results from the collation table.</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a><span class="sd">        For that you must refresh the collation by running recollate().</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a><span class="sd">        Parameters</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a><span class="sd">        ----------</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a><span class="sd">        list</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a><span class="sd">            The list of run IDs for the runs that should be set to status IGNORED</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">)</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a>    <span class="k">def</span> <span class="nf">rerun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the status of the specified runs to ENCODED, so that their results</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a><span class="sd">        may be recollated later (presumably after extending, rerunning or otherwise</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a><span class="sd">        modifying the data in the relevant run folder). Note that this method will</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a><span class="sd">        NOT perform any execution - it simply flags the run in EasyVVUQ as being</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a><span class="sd">        uncollated. Actual execution is (as usual) the job of the user or middleware.</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a><span class="sd">        Parameters</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a><span class="sd">        ----------</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a><span class="sd">        list</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a><span class="sd">            The list of run IDs for the runs that should be set to status ENCODED</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a>        <span class="k">for</span> <span class="n">run_ID</span> <span class="ow">in</span> <span class="n">list_of_run_IDs</span><span class="p">:</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_run_status</span><span class="p">(</span><span class="n">run_ID</span><span class="p">)</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a>            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">:</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot rerun </span><span class="si">{</span><span class="n">run_ID</span><span class="si">}</span><span class="s2"> as it has status NEW, and must&quot;</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a>                       <span class="sa">f</span><span class="s2">&quot;be encoded before execution.&quot;</span><span class="p">)</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a>    <span class="k">def</span> <span class="nf">get_active_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a dict of information regarding the application that is currently</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a><span class="sd">        set for this campaign.</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span>
</span></pre></div>


            </section>
                <section id="logger">
                    <div class="attr variable">
            <span class="name">logger</span>        =
<span class="default_value">&lt;Logger <a href="">easyvvuq.campaign</a> (DEBUG)&gt;</span>

        
    </div>
    <a class="headerlink" href="#logger"></a>
    
    

                </section>
                <section id="Campaign">
                            <input id="Campaign-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Campaign</span>:

                <label class="view-source-button" for="Campaign-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign-45"><a href="#Campaign-45"><span class="linenos"> 45</span></a><span class="k">class</span> <span class="nc">Campaign</span><span class="p">:</span>
</span><span id="Campaign-46"><a href="#Campaign-46"><span class="linenos"> 46</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Campaigns organise the dataflow in EasyVVUQ workflows.</span>
</span><span id="Campaign-47"><a href="#Campaign-47"><span class="linenos"> 47</span></a>
</span><span id="Campaign-48"><a href="#Campaign-48"><span class="linenos"> 48</span></a><span class="sd">    The Campaign functions as as state machine for the VVUQ workflows. It uses a</span>
</span><span id="Campaign-49"><a href="#Campaign-49"><span class="linenos"> 49</span></a><span class="sd">    database (CampaignDB) to store information on both the target application</span>
</span><span id="Campaign-50"><a href="#Campaign-50"><span class="linenos"> 50</span></a><span class="sd">    and the VVUQ algorithms being employed. It also collects data from the simulations</span>
</span><span id="Campaign-51"><a href="#Campaign-51"><span class="linenos"> 51</span></a><span class="sd">    and can be used to store and resume your state.</span>
</span><span id="Campaign-52"><a href="#Campaign-52"><span class="linenos"> 52</span></a>
</span><span id="Campaign-53"><a href="#Campaign-53"><span class="linenos"> 53</span></a><span class="sd">    Notes</span>
</span><span id="Campaign-54"><a href="#Campaign-54"><span class="linenos"> 54</span></a><span class="sd">    -----</span>
</span><span id="Campaign-55"><a href="#Campaign-55"><span class="linenos"> 55</span></a>
</span><span id="Campaign-56"><a href="#Campaign-56"><span class="linenos"> 56</span></a><span class="sd">    Multiple campaigns can be combined in a CampaignDB. Hence the particular</span>
</span><span id="Campaign-57"><a href="#Campaign-57"><span class="linenos"> 57</span></a><span class="sd">    campaign we are currently working on will be specified using `campaign_id`.</span>
</span><span id="Campaign-58"><a href="#Campaign-58"><span class="linenos"> 58</span></a>
</span><span id="Campaign-59"><a href="#Campaign-59"><span class="linenos"> 59</span></a><span class="sd">    Parameters</span>
</span><span id="Campaign-60"><a href="#Campaign-60"><span class="linenos"> 60</span></a><span class="sd">    ----------</span>
</span><span id="Campaign-61"><a href="#Campaign-61"><span class="linenos"> 61</span></a><span class="sd">    name: str</span>
</span><span id="Campaign-62"><a href="#Campaign-62"><span class="linenos"> 62</span></a><span class="sd">        Name of the Campaign. Freely chosen, serves as a human-readable way of distinguishing</span>
</span><span id="Campaign-63"><a href="#Campaign-63"><span class="linenos"> 63</span></a><span class="sd">        between several campaigns in the same database.</span>
</span><span id="Campaign-64"><a href="#Campaign-64"><span class="linenos"> 64</span></a><span class="sd">    params: dict, optional</span>
</span><span id="Campaign-65"><a href="#Campaign-65"><span class="linenos"> 65</span></a><span class="sd">        Description of the parameters to associated with the application. Will be used to create</span>
</span><span id="Campaign-66"><a href="#Campaign-66"><span class="linenos"> 66</span></a><span class="sd">        an app when creating the campaign. It is also possible to add apps manually using `add_app`</span>
</span><span id="Campaign-67"><a href="#Campaign-67"><span class="linenos"> 67</span></a><span class="sd">        method of the Campaign class. But this can be a useful shorthand when working with single</span>
</span><span id="Campaign-68"><a href="#Campaign-68"><span class="linenos"> 68</span></a><span class="sd">        app campaigns. To use this functionality both `params` and `actions` has to be specified.</span>
</span><span id="Campaign-69"><a href="#Campaign-69"><span class="linenos"> 69</span></a><span class="sd">        The name of this app will be the same as the name of the Campaign.</span>
</span><span id="Campaign-70"><a href="#Campaign-70"><span class="linenos"> 70</span></a><span class="sd">    actions: Actions, optional</span>
</span><span id="Campaign-71"><a href="#Campaign-71"><span class="linenos"> 71</span></a><span class="sd">        Actions object associated with an application. See description of the `params` parameter</span>
</span><span id="Campaign-72"><a href="#Campaign-72"><span class="linenos"> 72</span></a><span class="sd">        for more details.</span>
</span><span id="Campaign-73"><a href="#Campaign-73"><span class="linenos"> 73</span></a><span class="sd">    db_location: str, optional</span>
</span><span id="Campaign-74"><a href="#Campaign-74"><span class="linenos"> 74</span></a><span class="sd">        Location of the underlying campaign database - either a path or</span>
</span><span id="Campaign-75"><a href="#Campaign-75"><span class="linenos"> 75</span></a><span class="sd">        acceptable URI for SQLAlchemy.</span>
</span><span id="Campaign-76"><a href="#Campaign-76"><span class="linenos"> 76</span></a><span class="sd">    work_dir: str, optional, default=&#39;./&#39;</span>
</span><span id="Campaign-77"><a href="#Campaign-77"><span class="linenos"> 77</span></a><span class="sd">        Path to working directory - used to store campaign directory.</span>
</span><span id="Campaign-78"><a href="#Campaign-78"><span class="linenos"> 78</span></a><span class="sd">    change_to_state: bool, optional, default=False</span>
</span><span id="Campaign-79"><a href="#Campaign-79"><span class="linenos"> 79</span></a><span class="sd">        Should we change to the directory containing any specified `state_file`</span>
</span><span id="Campaign-80"><a href="#Campaign-80"><span class="linenos"> 80</span></a><span class="sd">        in order to make relative paths work.</span>
</span><span id="Campaign-81"><a href="#Campaign-81"><span class="linenos"> 81</span></a><span class="sd">    verify_all_runs: bool, optional, default=True</span>
</span><span id="Campaign-82"><a href="#Campaign-82"><span class="linenos"> 82</span></a><span class="sd">        Check all new runs being added for unrecognised params (not defined for the currently set</span>
</span><span id="Campaign-83"><a href="#Campaign-83"><span class="linenos"> 83</span></a><span class="sd">        app), values lying within defined physical range, type checking etc. This should normally</span>
</span><span id="Campaign-84"><a href="#Campaign-84"><span class="linenos"> 84</span></a><span class="sd">        always be set to True, but in cases where the performance is too degraded, the checks can</span>
</span><span id="Campaign-85"><a href="#Campaign-85"><span class="linenos"> 85</span></a><span class="sd">        be disabled by setting to False.</span>
</span><span id="Campaign-86"><a href="#Campaign-86"><span class="linenos"> 86</span></a>
</span><span id="Campaign-87"><a href="#Campaign-87"><span class="linenos"> 87</span></a><span class="sd">    Attributes</span>
</span><span id="Campaign-88"><a href="#Campaign-88"><span class="linenos"> 88</span></a><span class="sd">    ----------</span>
</span><span id="Campaign-89"><a href="#Campaign-89"><span class="linenos"> 89</span></a><span class="sd">    campaign_name : str or None</span>
</span><span id="Campaign-90"><a href="#Campaign-90"><span class="linenos"> 90</span></a><span class="sd">        Name for the campaign/workflow.</span>
</span><span id="Campaign-91"><a href="#Campaign-91"><span class="linenos"> 91</span></a><span class="sd">    _campaign_dir: str or None</span>
</span><span id="Campaign-92"><a href="#Campaign-92"><span class="linenos"> 92</span></a><span class="sd">        Path to the directory campaign uses for local storage (runs inputs etc)</span>
</span><span id="Campaign-93"><a href="#Campaign-93"><span class="linenos"> 93</span></a><span class="sd">    db_location : str or None</span>
</span><span id="Campaign-94"><a href="#Campaign-94"><span class="linenos"> 94</span></a><span class="sd">        Location of the underlying campaign database - either a path or</span>
</span><span id="Campaign-95"><a href="#Campaign-95"><span class="linenos"> 95</span></a><span class="sd">        acceptable URI for SQLAlchemy.</span>
</span><span id="Campaign-96"><a href="#Campaign-96"><span class="linenos"> 96</span></a><span class="sd">    _log: list</span>
</span><span id="Campaign-97"><a href="#Campaign-97"><span class="linenos"> 97</span></a><span class="sd">        The log of all elements that have been applied, with information about</span>
</span><span id="Campaign-98"><a href="#Campaign-98"><span class="linenos"> 98</span></a><span class="sd">        their application</span>
</span><span id="Campaign-99"><a href="#Campaign-99"><span class="linenos"> 99</span></a><span class="sd">    campaign_id : int</span>
</span><span id="Campaign-100"><a href="#Campaign-100"><span class="linenos">100</span></a><span class="sd">        ID number for the current campaign in the db.CampaignDB.</span>
</span><span id="Campaign-101"><a href="#Campaign-101"><span class="linenos">101</span></a><span class="sd">    campaign_db: easyvvuq.db.Basedb.CampaignDB</span>
</span><span id="Campaign-102"><a href="#Campaign-102"><span class="linenos">102</span></a><span class="sd">        A campaign database object</span>
</span><span id="Campaign-103"><a href="#Campaign-103"><span class="linenos">103</span></a><span class="sd">    last_analysis:</span>
</span><span id="Campaign-104"><a href="#Campaign-104"><span class="linenos">104</span></a><span class="sd">        The result of the most recent analysis carried out on this campaign</span>
</span><span id="Campaign-105"><a href="#Campaign-105"><span class="linenos">105</span></a><span class="sd">    _active_app: dict</span>
</span><span id="Campaign-106"><a href="#Campaign-106"><span class="linenos">106</span></a><span class="sd">        Info about currently set app</span>
</span><span id="Campaign-107"><a href="#Campaign-107"><span class="linenos">107</span></a><span class="sd">    _active_app_name: str</span>
</span><span id="Campaign-108"><a href="#Campaign-108"><span class="linenos">108</span></a><span class="sd">        Name of currently set app</span>
</span><span id="Campaign-109"><a href="#Campaign-109"><span class="linenos">109</span></a><span class="sd">    _active_sampler_id: int</span>
</span><span id="Campaign-110"><a href="#Campaign-110"><span class="linenos">110</span></a><span class="sd">        The database id of the currently set Sampler object</span>
</span><span id="Campaign-111"><a href="#Campaign-111"><span class="linenos">111</span></a>
</span><span id="Campaign-112"><a href="#Campaign-112"><span class="linenos">112</span></a><span class="sd">    Examples</span>
</span><span id="Campaign-113"><a href="#Campaign-113"><span class="linenos">113</span></a><span class="sd">    --------</span>
</span><span id="Campaign-114"><a href="#Campaign-114"><span class="linenos">114</span></a><span class="sd">    A typical instantiation might look like this.</span>
</span><span id="Campaign-115"><a href="#Campaign-115"><span class="linenos">115</span></a>
</span><span id="Campaign-116"><a href="#Campaign-116"><span class="linenos">116</span></a><span class="sd">    &gt;&gt;&gt; params = {</span>
</span><span id="Campaign-117"><a href="#Campaign-117"><span class="linenos">117</span></a><span class="sd">            &quot;S0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 997},</span>
</span><span id="Campaign-118"><a href="#Campaign-118"><span class="linenos">118</span></a><span class="sd">            &quot;I0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 3},</span>
</span><span id="Campaign-119"><a href="#Campaign-119"><span class="linenos">119</span></a><span class="sd">            &quot;beta&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.2},</span>
</span><span id="Campaign-120"><a href="#Campaign-120"><span class="linenos">120</span></a><span class="sd">            &quot;gamma&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.04, &quot;min&quot;: 0.0, &quot;max&quot;: 1.0},</span>
</span><span id="Campaign-121"><a href="#Campaign-121"><span class="linenos">121</span></a><span class="sd">            &quot;iterations&quot;: {&quot;type&quot;: &quot;integer&quot;, &quot;default&quot;: 100},</span>
</span><span id="Campaign-122"><a href="#Campaign-122"><span class="linenos">122</span></a><span class="sd">            &quot;outfile&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;output.csv&quot;}</span>
</span><span id="Campaign-123"><a href="#Campaign-123"><span class="linenos">123</span></a><span class="sd">        }</span>
</span><span id="Campaign-124"><a href="#Campaign-124"><span class="linenos">124</span></a><span class="sd">    &gt;&gt;&gt; encoder = uq.encoders.GenericEncoder(template_fname=&#39;sir.template&#39;, delimiter=&#39;$&#39;, target_filename=&#39;input.json&#39;)</span>
</span><span id="Campaign-125"><a href="#Campaign-125"><span class="linenos">125</span></a><span class="sd">    &gt;&gt;&gt; decoder = uq.decoders.SimpleCSV(target_filename=&#39;output.csv&#39;, output_columns=[&#39;I&#39;])</span>
</span><span id="Campaign-126"><a href="#Campaign-126"><span class="linenos">126</span></a><span class="sd">    &gt;&gt;&gt; actions = uq.actions.local_execute(encoder, os.path.abspath(&#39;sir&#39;) + &#39; input.json&#39;, decoder)</span>
</span><span id="Campaign-127"><a href="#Campaign-127"><span class="linenos">127</span></a><span class="sd">    &gt;&gt;&gt; campaign = uq.Campaign(name=&#39;sir&#39;, params=params, actions=actions)</span>
</span><span id="Campaign-128"><a href="#Campaign-128"><span class="linenos">128</span></a>
</span><span id="Campaign-129"><a href="#Campaign-129"><span class="linenos">129</span></a><span class="sd">    A simplified one (without an app) might look simply like this.</span>
</span><span id="Campaign-130"><a href="#Campaign-130"><span class="linenos">130</span></a>
</span><span id="Campaign-131"><a href="#Campaign-131"><span class="linenos">131</span></a><span class="sd">    &gt;&gt;&gt; campaign = Campaign(&#39;simple&#39;)</span>
</span><span id="Campaign-132"><a href="#Campaign-132"><span class="linenos">132</span></a>
</span><span id="Campaign-133"><a href="#Campaign-133"><span class="linenos">133</span></a><span class="sd">    An app then can be added.</span>
</span><span id="Campaign-134"><a href="#Campaign-134"><span class="linenos">134</span></a>
</span><span id="Campaign-135"><a href="#Campaign-135"><span class="linenos">135</span></a><span class="sd">    &gt;&gt;&gt; campaign.add_app(&#39;simple_app&#39;, params=params, actions=actions)</span>
</span><span id="Campaign-136"><a href="#Campaign-136"><span class="linenos">136</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Campaign-137"><a href="#Campaign-137"><span class="linenos">137</span></a>
</span><span id="Campaign-138"><a href="#Campaign-138"><span class="linenos">138</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Campaign-139"><a href="#Campaign-139"><span class="linenos">139</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Campaign-140"><a href="#Campaign-140"><span class="linenos">140</span></a>            <span class="n">name</span><span class="p">,</span>
</span><span id="Campaign-141"><a href="#Campaign-141"><span class="linenos">141</span></a>            <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Campaign-142"><a href="#Campaign-142"><span class="linenos">142</span></a>            <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Campaign-143"><a href="#Campaign-143"><span class="linenos">143</span></a>            <span class="n">db_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Campaign-144"><a href="#Campaign-144"><span class="linenos">144</span></a>            <span class="n">work_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
</span><span id="Campaign-145"><a href="#Campaign-145"><span class="linenos">145</span></a>            <span class="n">change_to_state</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Campaign-146"><a href="#Campaign-146"><span class="linenos">146</span></a>            <span class="n">verify_all_runs</span><span class="o">=</span><span class="kc">True</span>
</span><span id="Campaign-147"><a href="#Campaign-147"><span class="linenos">147</span></a>    <span class="p">):</span>
</span><span id="Campaign-148"><a href="#Campaign-148"><span class="linenos">148</span></a>
</span><span id="Campaign-149"><a href="#Campaign-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">work_dir</span><span class="p">))</span>
</span><span id="Campaign-150"><a href="#Campaign-150"><span class="linenos">150</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span> <span class="o">=</span> <span class="n">verify_all_runs</span>
</span><span id="Campaign-151"><a href="#Campaign-151"><span class="linenos">151</span></a>
</span><span id="Campaign-152"><a href="#Campaign-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Campaign-153"><a href="#Campaign-153"><span class="linenos">153</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-154"><a href="#Campaign-154"><span class="linenos">154</span></a>
</span><span id="Campaign-155"><a href="#Campaign-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="n">db_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign-156"><a href="#Campaign-156"><span class="linenos">156</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="Campaign-157"><a href="#Campaign-157"><span class="linenos">157</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="s2">&quot;sqlite:///&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">+</span> <span class="s2">&quot;/campaign.db&quot;</span>
</span><span id="Campaign-158"><a href="#Campaign-158"><span class="linenos">158</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign-159"><a href="#Campaign-159"><span class="linenos">159</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="n">db_location</span>
</span><span id="Campaign-160"><a href="#Campaign-160"><span class="linenos">160</span></a>
</span><span id="Campaign-161"><a href="#Campaign-161"><span class="linenos">161</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-162"><a href="#Campaign-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-163"><a href="#Campaign-163"><span class="linenos">163</span></a>
</span><span id="Campaign-164"><a href="#Campaign-164"><span class="linenos">164</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-165"><a href="#Campaign-165"><span class="linenos">165</span></a>
</span><span id="Campaign-166"><a href="#Campaign-166"><span class="linenos">166</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-167"><a href="#Campaign-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-168"><a href="#Campaign-168"><span class="linenos">168</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-169"><a href="#Campaign-169"><span class="linenos">169</span></a>
</span><span id="Campaign-170"><a href="#Campaign-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-171"><a href="#Campaign-171"><span class="linenos">171</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-172"><a href="#Campaign-172"><span class="linenos">172</span></a>
</span><span id="Campaign-173"><a href="#Campaign-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="Campaign-174"><a href="#Campaign-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_state_dir</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign-175"><a href="#Campaign-175"><span class="linenos">175</span></a>
</span><span id="Campaign-176"><a href="#Campaign-176"><span class="linenos">176</span></a>        <span class="c1"># here we assume that the user wants to add an app</span>
</span><span id="Campaign-177"><a href="#Campaign-177"><span class="linenos">177</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">actions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="Campaign-178"><a href="#Campaign-178"><span class="linenos">178</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>
</span><span id="Campaign-179"><a href="#Campaign-179"><span class="linenos">179</span></a>
</span><span id="Campaign-180"><a href="#Campaign-180"><span class="linenos">180</span></a>    <span class="nd">@property</span>
</span><span id="Campaign-181"><a href="#Campaign-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">campaign_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign-182"><a href="#Campaign-182"><span class="linenos">182</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the path in which to load/save files related to the campaign.</span>
</span><span id="Campaign-183"><a href="#Campaign-183"><span class="linenos">183</span></a>
</span><span id="Campaign-184"><a href="#Campaign-184"><span class="linenos">184</span></a><span class="sd">        Returns</span>
</span><span id="Campaign-185"><a href="#Campaign-185"><span class="linenos">185</span></a><span class="sd">        -------</span>
</span><span id="Campaign-186"><a href="#Campaign-186"><span class="linenos">186</span></a><span class="sd">        str</span>
</span><span id="Campaign-187"><a href="#Campaign-187"><span class="linenos">187</span></a><span class="sd">            Path to the campaign directory - given as a subdirectory of the</span>
</span><span id="Campaign-188"><a href="#Campaign-188"><span class="linenos">188</span></a><span class="sd">            working directory.</span>
</span><span id="Campaign-189"><a href="#Campaign-189"><span class="linenos">189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-190"><a href="#Campaign-190"><span class="linenos">190</span></a>
</span><span id="Campaign-191"><a href="#Campaign-191"><span class="linenos">191</span></a>        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>
</span><span id="Campaign-192"><a href="#Campaign-192"><span class="linenos">192</span></a>
</span><span id="Campaign-193"><a href="#Campaign-193"><span class="linenos">193</span></a>    <span class="k">def</span> <span class="nf">init_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">work_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
</span><span id="Campaign-194"><a href="#Campaign-194"><span class="linenos">194</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the connection with the database and either resume or create the campaign.</span>
</span><span id="Campaign-195"><a href="#Campaign-195"><span class="linenos">195</span></a>
</span><span id="Campaign-196"><a href="#Campaign-196"><span class="linenos">196</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-197"><a href="#Campaign-197"><span class="linenos">197</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-198"><a href="#Campaign-198"><span class="linenos">198</span></a><span class="sd">        name: str</span>
</span><span id="Campaign-199"><a href="#Campaign-199"><span class="linenos">199</span></a><span class="sd">            Name of the campaign.</span>
</span><span id="Campaign-200"><a href="#Campaign-200"><span class="linenos">200</span></a><span class="sd">        work_dir: str</span>
</span><span id="Campaign-201"><a href="#Campaign-201"><span class="linenos">201</span></a><span class="sd">            Work directory, defaults to cwd.</span>
</span><span id="Campaign-202"><a href="#Campaign-202"><span class="linenos">202</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-203"><a href="#Campaign-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">CampaignDB</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="p">)</span>
</span><span id="Campaign-204"><a href="#Campaign-204"><span class="linenos">204</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span><span id="Campaign-205"><a href="#Campaign-205"><span class="linenos">205</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign-206"><a href="#Campaign-206"><span class="linenos">206</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_active_app</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
</span><span id="Campaign-207"><a href="#Campaign-207"><span class="linenos">207</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Campaign-208"><a href="#Campaign-208"><span class="linenos">208</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_dir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign-209"><a href="#Campaign-209"><span class="linenos">209</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">):</span>
</span><span id="Campaign-210"><a href="#Campaign-210"><span class="linenos">210</span></a>                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Campaign directory (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="s2">) does not exist.&quot;</span><span class="p">)</span>
</span><span id="Campaign-211"><a href="#Campaign-211"><span class="linenos">211</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="Campaign-212"><a href="#Campaign-212"><span class="linenos">212</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_sampler_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">)</span>
</span><span id="Campaign-213"><a href="#Campaign-213"><span class="linenos">213</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
</span><span id="Campaign-214"><a href="#Campaign-214"><span class="linenos">214</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span><span class="p">)</span>
</span><span id="Campaign-215"><a href="#Campaign-215"><span class="linenos">215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resume_campaign</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign-216"><a href="#Campaign-216"><span class="linenos">216</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign-217"><a href="#Campaign-217"><span class="linenos">217</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign-218"><a href="#Campaign-218"><span class="linenos">218</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="Campaign-219"><a href="#Campaign-219"><span class="linenos">219</span></a>            <span class="n">info</span> <span class="o">=</span> <span class="n">CampaignInfo</span><span class="p">(</span>
</span><span id="Campaign-220"><a href="#Campaign-220"><span class="linenos">220</span></a>                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="Campaign-221"><a href="#Campaign-221"><span class="linenos">221</span></a>                <span class="n">campaign_dir_prefix</span><span class="o">=</span><span class="n">default_campaign_prefix</span><span class="p">,</span>
</span><span id="Campaign-222"><a href="#Campaign-222"><span class="linenos">222</span></a>                <span class="n">easyvvuq_version</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span>
</span><span id="Campaign-223"><a href="#Campaign-223"><span class="linenos">223</span></a>                <span class="n">campaign_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>
</span><span id="Campaign-224"><a href="#Campaign-224"><span class="linenos">224</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">create_campaign</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</span><span id="Campaign-225"><a href="#Campaign-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Campaign-226"><a href="#Campaign-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span><span id="Campaign-227"><a href="#Campaign-227"><span class="linenos">227</span></a>
</span><span id="Campaign-228"><a href="#Campaign-228"><span class="linenos">228</span></a>    <span class="k">def</span> <span class="nf">add_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_active</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="Campaign-229"><a href="#Campaign-229"><span class="linenos">229</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an application to the CampaignDB.</span>
</span><span id="Campaign-230"><a href="#Campaign-230"><span class="linenos">230</span></a>
</span><span id="Campaign-231"><a href="#Campaign-231"><span class="linenos">231</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-232"><a href="#Campaign-232"><span class="linenos">232</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-233"><a href="#Campaign-233"><span class="linenos">233</span></a><span class="sd">        name : str</span>
</span><span id="Campaign-234"><a href="#Campaign-234"><span class="linenos">234</span></a><span class="sd">            Name of the application.</span>
</span><span id="Campaign-235"><a href="#Campaign-235"><span class="linenos">235</span></a><span class="sd">        params : dict</span>
</span><span id="Campaign-236"><a href="#Campaign-236"><span class="linenos">236</span></a><span class="sd">            Description of the parameters to associate with the application.</span>
</span><span id="Campaign-237"><a href="#Campaign-237"><span class="linenos">237</span></a><span class="sd">        actions : Actions</span>
</span><span id="Campaign-238"><a href="#Campaign-238"><span class="linenos">238</span></a><span class="sd">            An instance of Actions containing actions to be executed</span>
</span><span id="Campaign-239"><a href="#Campaign-239"><span class="linenos">239</span></a><span class="sd">        set_active: bool</span>
</span><span id="Campaign-240"><a href="#Campaign-240"><span class="linenos">240</span></a><span class="sd">            Should the added app be set to be the currently active app?</span>
</span><span id="Campaign-241"><a href="#Campaign-241"><span class="linenos">241</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-242"><a href="#Campaign-242"><span class="linenos">242</span></a>        <span class="c1"># Verify input parameters dict</span>
</span><span id="Campaign-243"><a href="#Campaign-243"><span class="linenos">243</span></a>        <span class="n">paramsspec</span> <span class="o">=</span> <span class="n">easyvvuq</span><span class="o">.</span><span class="n">ParamsSpecification</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">appname</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign-244"><a href="#Campaign-244"><span class="linenos">244</span></a>        <span class="c1"># validate application input</span>
</span><span id="Campaign-245"><a href="#Campaign-245"><span class="linenos">245</span></a>        <span class="n">app</span> <span class="o">=</span> <span class="n">AppInfo</span><span class="p">(</span>
</span><span id="Campaign-246"><a href="#Campaign-246"><span class="linenos">246</span></a>            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="Campaign-247"><a href="#Campaign-247"><span class="linenos">247</span></a>            <span class="n">paramsspec</span><span class="o">=</span><span class="n">paramsspec</span><span class="p">,</span>
</span><span id="Campaign-248"><a href="#Campaign-248"><span class="linenos">248</span></a>            <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">,</span>
</span><span id="Campaign-249"><a href="#Campaign-249"><span class="linenos">249</span></a>        <span class="p">)</span>
</span><span id="Campaign-250"><a href="#Campaign-250"><span class="linenos">250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</span><span id="Campaign-251"><a href="#Campaign-251"><span class="linenos">251</span></a>        <span class="k">if</span> <span class="n">set_active</span><span class="p">:</span>
</span><span id="Campaign-252"><a href="#Campaign-252"><span class="linenos">252</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign-253"><a href="#Campaign-253"><span class="linenos">253</span></a>
</span><span id="Campaign-254"><a href="#Campaign-254"><span class="linenos">254</span></a>    <span class="k">def</span> <span class="nf">set_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
</span><span id="Campaign-255"><a href="#Campaign-255"><span class="linenos">255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set active app for the campaign.</span>
</span><span id="Campaign-256"><a href="#Campaign-256"><span class="linenos">256</span></a>
</span><span id="Campaign-257"><a href="#Campaign-257"><span class="linenos">257</span></a><span class="sd">        Application information is retrieved from `self.campaign_db`.</span>
</span><span id="Campaign-258"><a href="#Campaign-258"><span class="linenos">258</span></a>
</span><span id="Campaign-259"><a href="#Campaign-259"><span class="linenos">259</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-260"><a href="#Campaign-260"><span class="linenos">260</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-261"><a href="#Campaign-261"><span class="linenos">261</span></a><span class="sd">        app_name: str</span>
</span><span id="Campaign-262"><a href="#Campaign-262"><span class="linenos">262</span></a><span class="sd">            Name of selected app, if `None` given then first app will be</span>
</span><span id="Campaign-263"><a href="#Campaign-263"><span class="linenos">263</span></a><span class="sd">            selected.</span>
</span><span id="Campaign-264"><a href="#Campaign-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-265"><a href="#Campaign-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="n">app_name</span>
</span><span id="Campaign-266"><a href="#Campaign-266"><span class="linenos">266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">app_name</span><span class="p">)</span>
</span><span id="Campaign-267"><a href="#Campaign-267"><span class="linenos">267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_active_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
</span><span id="Campaign-268"><a href="#Campaign-268"><span class="linenos">268</span></a>        <span class="c1"># Resurrect the app encoder, decoder and collation elements</span>
</span><span id="Campaign-269"><a href="#Campaign-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
</span><span id="Campaign-270"><a href="#Campaign-270"><span class="linenos">270</span></a>
</span><span id="Campaign-271"><a href="#Campaign-271"><span class="linenos">271</span></a>    <span class="k">def</span> <span class="nf">replace_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
</span><span id="Campaign-272"><a href="#Campaign-272"><span class="linenos">272</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace actions for an app with a given name.</span>
</span><span id="Campaign-273"><a href="#Campaign-273"><span class="linenos">273</span></a>
</span><span id="Campaign-274"><a href="#Campaign-274"><span class="linenos">274</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-275"><a href="#Campaign-275"><span class="linenos">275</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-276"><a href="#Campaign-276"><span class="linenos">276</span></a><span class="sd">        app_name: str</span>
</span><span id="Campaign-277"><a href="#Campaign-277"><span class="linenos">277</span></a><span class="sd">            Name of the app.</span>
</span><span id="Campaign-278"><a href="#Campaign-278"><span class="linenos">278</span></a><span class="sd">        actions: Actions</span>
</span><span id="Campaign-279"><a href="#Campaign-279"><span class="linenos">279</span></a><span class="sd">            `Actions` instance, will replace the current `Actions` of an app.</span>
</span><span id="Campaign-280"><a href="#Campaign-280"><span class="linenos">280</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-281"><a href="#Campaign-281"><span class="linenos">281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">replace_actions</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">)</span>
</span><span id="Campaign-282"><a href="#Campaign-282"><span class="linenos">282</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="n">actions</span>
</span><span id="Campaign-283"><a href="#Campaign-283"><span class="linenos">283</span></a>
</span><span id="Campaign-284"><a href="#Campaign-284"><span class="linenos">284</span></a>    <span class="k">def</span> <span class="nf">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign-285"><a href="#Campaign-285"><span class="linenos">285</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set active sampler.</span>
</span><span id="Campaign-286"><a href="#Campaign-286"><span class="linenos">286</span></a>
</span><span id="Campaign-287"><a href="#Campaign-287"><span class="linenos">287</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-288"><a href="#Campaign-288"><span class="linenos">288</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-289"><a href="#Campaign-289"><span class="linenos">289</span></a><span class="sd">        sampler : Sampler</span>
</span><span id="Campaign-290"><a href="#Campaign-290"><span class="linenos">290</span></a><span class="sd">            Sampler that will be used to create runs for the current campaign.</span>
</span><span id="Campaign-291"><a href="#Campaign-291"><span class="linenos">291</span></a><span class="sd">        update : bool</span>
</span><span id="Campaign-292"><a href="#Campaign-292"><span class="linenos">292</span></a><span class="sd">            If set to True it will not add the sampler to the database, just change</span>
</span><span id="Campaign-293"><a href="#Campaign-293"><span class="linenos">293</span></a><span class="sd">            it as the active sampler.</span>
</span><span id="Campaign-294"><a href="#Campaign-294"><span class="linenos">294</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-295"><a href="#Campaign-295"><span class="linenos">295</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="n">sampler</span>
</span><span id="Campaign-296"><a href="#Campaign-296"><span class="linenos">296</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">update</span><span class="p">:</span>
</span><span id="Campaign-297"><a href="#Campaign-297"><span class="linenos">297</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_sampler</span><span class="p">(</span><span class="n">sampler</span><span class="p">)</span>
</span><span id="Campaign-298"><a href="#Campaign-298"><span class="linenos">298</span></a>            <span class="n">sampler</span><span class="o">.</span><span class="n">sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span>
</span><span id="Campaign-299"><a href="#Campaign-299"><span class="linenos">299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span>
</span><span id="Campaign-300"><a href="#Campaign-300"><span class="linenos">300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span><span class="p">)</span>
</span><span id="Campaign-301"><a href="#Campaign-301"><span class="linenos">301</span></a>
</span><span id="Campaign-302"><a href="#Campaign-302"><span class="linenos">302</span></a>    <span class="k">def</span> <span class="nf">add_external_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_files</span><span class="p">,</span> <span class="n">output_files</span><span class="p">,</span> <span class="n">input_decoder</span><span class="p">,</span> <span class="n">output_decoder</span><span class="p">):</span>
</span><span id="Campaign-303"><a href="#Campaign-303"><span class="linenos">303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes a list of files and adds them to the database. This method is to be</span>
</span><span id="Campaign-304"><a href="#Campaign-304"><span class="linenos">304</span></a><span class="sd">        used when adding runs to the EasyVVUQ database that were not executed using</span>
</span><span id="Campaign-305"><a href="#Campaign-305"><span class="linenos">305</span></a><span class="sd">        EasyVVUQ.</span>
</span><span id="Campaign-306"><a href="#Campaign-306"><span class="linenos">306</span></a>
</span><span id="Campaign-307"><a href="#Campaign-307"><span class="linenos">307</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-308"><a href="#Campaign-308"><span class="linenos">308</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-309"><a href="#Campaign-309"><span class="linenos">309</span></a><span class="sd">        output_files: list of str</span>
</span><span id="Campaign-310"><a href="#Campaign-310"><span class="linenos">310</span></a><span class="sd">            A list of output file paths to be loaded to the database.</span>
</span><span id="Campaign-311"><a href="#Campaign-311"><span class="linenos">311</span></a><span class="sd">        decoder: Decoder</span>
</span><span id="Campaign-312"><a href="#Campaign-312"><span class="linenos">312</span></a><span class="sd">            A decoder that will be used to parse these files.</span>
</span><span id="Campaign-313"><a href="#Campaign-313"><span class="linenos">313</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-314"><a href="#Campaign-314"><span class="linenos">314</span></a>        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Campaign-315"><a href="#Campaign-315"><span class="linenos">315</span></a>        <span class="k">for</span> <span class="n">input_file</span> <span class="ow">in</span> <span class="n">input_files</span><span class="p">:</span>
</span><span id="Campaign-316"><a href="#Campaign-316"><span class="linenos">316</span></a>            <span class="n">input_decoder</span><span class="o">.</span><span class="n">target_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="Campaign-317"><a href="#Campaign-317"><span class="linenos">317</span></a>            <span class="n">params</span> <span class="o">=</span> <span class="n">input_decoder</span><span class="o">.</span><span class="n">parse_sim_output</span><span class="p">({</span><span class="s1">&#39;run_dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">input_file</span><span class="p">)})</span>
</span><span id="Campaign-318"><a href="#Campaign-318"><span class="linenos">318</span></a>            <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="Campaign-319"><a href="#Campaign-319"><span class="linenos">319</span></a>        <span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Campaign-320"><a href="#Campaign-320"><span class="linenos">320</span></a>        <span class="k">for</span> <span class="n">output_file</span> <span class="ow">in</span> <span class="n">output_files</span><span class="p">:</span>
</span><span id="Campaign-321"><a href="#Campaign-321"><span class="linenos">321</span></a>            <span class="n">output_decoder</span><span class="o">.</span><span class="n">target_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="Campaign-322"><a href="#Campaign-322"><span class="linenos">322</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">output_decoder</span><span class="o">.</span><span class="n">parse_sim_output</span><span class="p">({</span><span class="s1">&#39;run_dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output_file</span><span class="p">)})</span>
</span><span id="Campaign-323"><a href="#Campaign-323"><span class="linenos">323</span></a>            <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="Campaign-324"><a href="#Campaign-324"><span class="linenos">324</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Campaign-325"><a href="#Campaign-325"><span class="linenos">325</span></a>        <span class="k">for</span> <span class="n">params</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">):</span>
</span><span id="Campaign-326"><a href="#Campaign-326"><span class="linenos">326</span></a>            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Campaign-327"><a href="#Campaign-327"><span class="linenos">327</span></a>            <span class="n">table</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">(</span><span class="n">run_name</span><span class="o">=</span><span class="s1">&#39;run_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span>
</span><span id="Campaign-328"><a href="#Campaign-328"><span class="linenos">328</span></a>                                <span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="Campaign-329"><a href="#Campaign-329"><span class="linenos">329</span></a>                                <span class="n">params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
</span><span id="Campaign-330"><a href="#Campaign-330"><span class="linenos">330</span></a>                                <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span>
</span><span id="Campaign-331"><a href="#Campaign-331"><span class="linenos">331</span></a>                                <span class="n">run_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_campaign_runs_dir</span><span class="p">(),</span>
</span><span id="Campaign-332"><a href="#Campaign-332"><span class="linenos">332</span></a>                                <span class="n">result</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">),</span>
</span><span id="Campaign-333"><a href="#Campaign-333"><span class="linenos">333</span></a>                                <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
</span><span id="Campaign-334"><a href="#Campaign-334"><span class="linenos">334</span></a>                                <span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
</span><span id="Campaign-335"><a href="#Campaign-335"><span class="linenos">335</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</span><span id="Campaign-336"><a href="#Campaign-336"><span class="linenos">336</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="Campaign-337"><a href="#Campaign-337"><span class="linenos">337</span></a>
</span><span id="Campaign-338"><a href="#Campaign-338"><span class="linenos">338</span></a>    <span class="k">def</span> <span class="nf">add_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign-339"><a href="#Campaign-339"><span class="linenos">339</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add runs to the database.</span>
</span><span id="Campaign-340"><a href="#Campaign-340"><span class="linenos">340</span></a>
</span><span id="Campaign-341"><a href="#Campaign-341"><span class="linenos">341</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-342"><a href="#Campaign-342"><span class="linenos">342</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-343"><a href="#Campaign-343"><span class="linenos">343</span></a><span class="sd">        runs : list of dicts</span>
</span><span id="Campaign-344"><a href="#Campaign-344"><span class="linenos">344</span></a><span class="sd">            Each dict defines the value of each model parameter listed in</span>
</span><span id="Campaign-345"><a href="#Campaign-345"><span class="linenos">345</span></a><span class="sd">            self.params_info for a run to be added to self.runs</span>
</span><span id="Campaign-346"><a href="#Campaign-346"><span class="linenos">346</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="Campaign-347"><a href="#Campaign-347"><span class="linenos">347</span></a><span class="sd">            Will mark runs that fail verification as invalid (but will not raise an exception)</span>
</span><span id="Campaign-348"><a href="#Campaign-348"><span class="linenos">348</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-349"><a href="#Campaign-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign-350"><a href="#Campaign-350"><span class="linenos">350</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;No app is currently set for this campaign. &quot;</span>
</span><span id="Campaign-351"><a href="#Campaign-351"><span class="linenos">351</span></a>                   <span class="s2">&quot;Use set_app(&#39;name_of_app&#39;).&quot;</span><span class="p">)</span>
</span><span id="Campaign-352"><a href="#Campaign-352"><span class="linenos">352</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign-353"><a href="#Campaign-353"><span class="linenos">353</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign-354"><a href="#Campaign-354"><span class="linenos">354</span></a>        <span class="n">app_default_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s2">&quot;params&quot;</span><span class="p">]</span>
</span><span id="Campaign-355"><a href="#Campaign-355"><span class="linenos">355</span></a>        <span class="n">run_info_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Campaign-356"><a href="#Campaign-356"><span class="linenos">356</span></a>        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
</span><span id="Campaign-357"><a href="#Campaign-357"><span class="linenos">357</span></a>            <span class="k">if</span> <span class="n">new_run</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign-358"><a href="#Campaign-358"><span class="linenos">358</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;add_run() was passed new_run of type None. Bad sampler?&quot;</span><span class="p">)</span>
</span><span id="Campaign-359"><a href="#Campaign-359"><span class="linenos">359</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign-360"><a href="#Campaign-360"><span class="linenos">360</span></a>                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign-361"><a href="#Campaign-361"><span class="linenos">361</span></a>            <span class="c1"># Verify and complete run with missing/default param values</span>
</span><span id="Campaign-362"><a href="#Campaign-362"><span class="linenos">362</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span>
</span><span id="Campaign-363"><a href="#Campaign-363"><span class="linenos">363</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Campaign-364"><a href="#Campaign-364"><span class="linenos">364</span></a>                <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span><span class="p">)</span>
</span><span id="Campaign-365"><a href="#Campaign-365"><span class="linenos">365</span></a>            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
</span><span id="Campaign-366"><a href="#Campaign-366"><span class="linenos">366</span></a>                <span class="k">if</span> <span class="n">mark_invalid</span><span class="p">:</span>
</span><span id="Campaign-367"><a href="#Campaign-367"><span class="linenos">367</span></a>                    <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Campaign-368"><a href="#Campaign-368"><span class="linenos">368</span></a>                    <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span>
</span><span id="Campaign-369"><a href="#Campaign-369"><span class="linenos">369</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign-370"><a href="#Campaign-370"><span class="linenos">370</span></a>                    <span class="k">raise</span>
</span><span id="Campaign-371"><a href="#Campaign-371"><span class="linenos">371</span></a>            <span class="c1"># Add to run queue</span>
</span><span id="Campaign-372"><a href="#Campaign-372"><span class="linenos">372</span></a>            <span class="n">run_info</span> <span class="o">=</span> <span class="n">RunInfo</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="Campaign-373"><a href="#Campaign-373"><span class="linenos">373</span></a>                               <span class="n">params</span><span class="o">=</span><span class="n">new_run</span><span class="p">,</span>
</span><span id="Campaign-374"><a href="#Campaign-374"><span class="linenos">374</span></a>                               <span class="n">sample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="Campaign-375"><a href="#Campaign-375"><span class="linenos">375</span></a>                               <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
</span><span id="Campaign-376"><a href="#Campaign-376"><span class="linenos">376</span></a>                               <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
</span><span id="Campaign-377"><a href="#Campaign-377"><span class="linenos">377</span></a>            <span class="n">run_info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run_info</span><span class="p">)</span>
</span><span id="Campaign-378"><a href="#Campaign-378"><span class="linenos">378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">run_info_list</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span><span class="p">)</span>
</span><span id="Campaign-379"><a href="#Campaign-379"><span class="linenos">379</span></a>
</span><span id="Campaign-380"><a href="#Campaign-380"><span class="linenos">380</span></a>    <span class="k">def</span> <span class="nf">draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_samples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign-381"><a href="#Campaign-381"><span class="linenos">381</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Draws `num_samples` sets of parameters from the currently set</span>
</span><span id="Campaign-382"><a href="#Campaign-382"><span class="linenos">382</span></a><span class="sd">        sampler, resulting in `num_samples` new runs added to the</span>
</span><span id="Campaign-383"><a href="#Campaign-383"><span class="linenos">383</span></a><span class="sd">        runs list. If `num_samples` is 0 (its default value) then</span>
</span><span id="Campaign-384"><a href="#Campaign-384"><span class="linenos">384</span></a><span class="sd">        this method draws ALL samples from the sampler, until exhaustion (this</span>
</span><span id="Campaign-385"><a href="#Campaign-385"><span class="linenos">385</span></a><span class="sd">        will fail if the sampler is not finite).</span>
</span><span id="Campaign-386"><a href="#Campaign-386"><span class="linenos">386</span></a>
</span><span id="Campaign-387"><a href="#Campaign-387"><span class="linenos">387</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-388"><a href="#Campaign-388"><span class="linenos">388</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-389"><a href="#Campaign-389"><span class="linenos">389</span></a><span class="sd">        num_samples : int</span>
</span><span id="Campaign-390"><a href="#Campaign-390"><span class="linenos">390</span></a><span class="sd">            Number of samples to draw from the active sampling element.</span>
</span><span id="Campaign-391"><a href="#Campaign-391"><span class="linenos">391</span></a><span class="sd">            By default is 0 (draw ALL samples)</span>
</span><span id="Campaign-392"><a href="#Campaign-392"><span class="linenos">392</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="Campaign-393"><a href="#Campaign-393"><span class="linenos">393</span></a><span class="sd">            If True will mark runs that go outside valid parameter range as INVALID.</span>
</span><span id="Campaign-394"><a href="#Campaign-394"><span class="linenos">394</span></a><span class="sd">            This is useful for MCMC style methods where you want those runs to evaluate</span>
</span><span id="Campaign-395"><a href="#Campaign-395"><span class="linenos">395</span></a><span class="sd">            to low probabilities.</span>
</span><span id="Campaign-396"><a href="#Campaign-396"><span class="linenos">396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-397"><a href="#Campaign-397"><span class="linenos">397</span></a>        <span class="c1"># Make sure `num_samples` is not 0 for an infinite generator</span>
</span><span id="Campaign-398"><a href="#Campaign-398"><span class="linenos">398</span></a>        <span class="c1"># (this would add runs forever...)</span>
</span><span id="Campaign-399"><a href="#Campaign-399"><span class="linenos">399</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">is_finite</span><span class="p">()</span> <span class="ow">and</span> <span class="n">num_samples</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Campaign-400"><a href="#Campaign-400"><span class="linenos">400</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sampling_element &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">element_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
</span><span id="Campaign-401"><a href="#Campaign-401"><span class="linenos">401</span></a>                   <span class="sa">f</span><span class="s2">&quot;is an infinite generator, therefore a finite number of &quot;</span>
</span><span id="Campaign-402"><a href="#Campaign-402"><span class="linenos">402</span></a>                   <span class="sa">f</span><span class="s2">&quot;draws (n &gt; 0) must be specified.&quot;</span><span class="p">)</span>
</span><span id="Campaign-403"><a href="#Campaign-403"><span class="linenos">403</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign-404"><a href="#Campaign-404"><span class="linenos">404</span></a>        <span class="n">num_added</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Campaign-405"><a href="#Campaign-405"><span class="linenos">405</span></a>        <span class="n">new_runs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Campaign-406"><a href="#Campaign-406"><span class="linenos">406</span></a>        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">:</span>
</span><span id="Campaign-407"><a href="#Campaign-407"><span class="linenos">407</span></a>            <span class="n">new_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_run</span><span class="p">)</span>
</span><span id="Campaign-408"><a href="#Campaign-408"><span class="linenos">408</span></a>            <span class="n">num_added</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Campaign-409"><a href="#Campaign-409"><span class="linenos">409</span></a>            <span class="k">if</span> <span class="n">num_samples</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">num_added</span> <span class="o">&gt;=</span> <span class="n">num_samples</span><span class="p">:</span>
</span><span id="Campaign-410"><a href="#Campaign-410"><span class="linenos">410</span></a>                <span class="k">break</span>
</span><span id="Campaign-411"><a href="#Campaign-411"><span class="linenos">411</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">new_runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="Campaign-412"><a href="#Campaign-412"><span class="linenos">412</span></a>        <span class="c1"># Write sampler&#39;s new state to database</span>
</span><span id="Campaign-413"><a href="#Campaign-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">update_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">)</span>
</span><span id="Campaign-414"><a href="#Campaign-414"><span class="linenos">414</span></a>        <span class="k">return</span> <span class="n">new_runs</span>
</span><span id="Campaign-415"><a href="#Campaign-415"><span class="linenos">415</span></a>
</span><span id="Campaign-416"><a href="#Campaign-416"><span class="linenos">416</span></a>    <span class="k">def</span> <span class="nf">list_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Campaign-417"><a href="#Campaign-417"><span class="linenos">417</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of runs in the CampaignDB.</span>
</span><span id="Campaign-418"><a href="#Campaign-418"><span class="linenos">418</span></a>
</span><span id="Campaign-419"><a href="#Campaign-419"><span class="linenos">419</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-420"><a href="#Campaign-420"><span class="linenos">420</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-421"><a href="#Campaign-421"><span class="linenos">421</span></a><span class="sd">        sampler: int</span>
</span><span id="Campaign-422"><a href="#Campaign-422"><span class="linenos">422</span></a><span class="sd">            Sampler id to filter for.</span>
</span><span id="Campaign-423"><a href="#Campaign-423"><span class="linenos">423</span></a><span class="sd">        campaign: int</span>
</span><span id="Campaign-424"><a href="#Campaign-424"><span class="linenos">424</span></a><span class="sd">            Campaign id to filter for.</span>
</span><span id="Campaign-425"><a href="#Campaign-425"><span class="linenos">425</span></a><span class="sd">        app_id: int</span>
</span><span id="Campaign-426"><a href="#Campaign-426"><span class="linenos">426</span></a><span class="sd">            App id to filter for.</span>
</span><span id="Campaign-427"><a href="#Campaign-427"><span class="linenos">427</span></a><span class="sd">        status: Status</span>
</span><span id="Campaign-428"><a href="#Campaign-428"><span class="linenos">428</span></a><span class="sd">            Status to filter for.</span>
</span><span id="Campaign-429"><a href="#Campaign-429"><span class="linenos">429</span></a>
</span><span id="Campaign-430"><a href="#Campaign-430"><span class="linenos">430</span></a><span class="sd">        Returns</span>
</span><span id="Campaign-431"><a href="#Campaign-431"><span class="linenos">431</span></a><span class="sd">        -------</span>
</span><span id="Campaign-432"><a href="#Campaign-432"><span class="linenos">432</span></a><span class="sd">        list of runs</span>
</span><span id="Campaign-433"><a href="#Campaign-433"><span class="linenos">433</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-434"><a href="#Campaign-434"><span class="linenos">434</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
</span><span id="Campaign-435"><a href="#Campaign-435"><span class="linenos">435</span></a>            <span class="n">sampler</span><span class="o">=</span><span class="n">sampler</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="n">app_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">))</span>
</span><span id="Campaign-436"><a href="#Campaign-436"><span class="linenos">436</span></a>
</span><span id="Campaign-437"><a href="#Campaign-437"><span class="linenos">437</span></a>    <span class="k">def</span> <span class="nf">get_campaign_runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign-438"><a href="#Campaign-438"><span class="linenos">438</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the runs directory from the CampaignDB.</span>
</span><span id="Campaign-439"><a href="#Campaign-439"><span class="linenos">439</span></a>
</span><span id="Campaign-440"><a href="#Campaign-440"><span class="linenos">440</span></a><span class="sd">        Returns</span>
</span><span id="Campaign-441"><a href="#Campaign-441"><span class="linenos">441</span></a><span class="sd">        -------</span>
</span><span id="Campaign-442"><a href="#Campaign-442"><span class="linenos">442</span></a><span class="sd">        str</span>
</span><span id="Campaign-443"><a href="#Campaign-443"><span class="linenos">443</span></a><span class="sd">            Path in which the runs information will be written.</span>
</span><span id="Campaign-444"><a href="#Campaign-444"><span class="linenos">444</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-445"><a href="#Campaign-445"><span class="linenos">445</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span><span id="Campaign-446"><a href="#Campaign-446"><span class="linenos">446</span></a>
</span><span id="Campaign-447"><a href="#Campaign-447"><span class="linenos">447</span></a>    <span class="k">def</span> <span class="nf">relocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">campaign_dir</span><span class="p">):</span>
</span><span id="Campaign-448"><a href="#Campaign-448"><span class="linenos">448</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relocate the campaign by specifying a new path where campaign is located.</span>
</span><span id="Campaign-449"><a href="#Campaign-449"><span class="linenos">449</span></a>
</span><span id="Campaign-450"><a href="#Campaign-450"><span class="linenos">450</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-451"><a href="#Campaign-451"><span class="linenos">451</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-452"><a href="#Campaign-452"><span class="linenos">452</span></a><span class="sd">        new_path: str</span>
</span><span id="Campaign-453"><a href="#Campaign-453"><span class="linenos">453</span></a><span class="sd">            new runs directory</span>
</span><span id="Campaign-454"><a href="#Campaign-454"><span class="linenos">454</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-455"><a href="#Campaign-455"><span class="linenos">455</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">):</span>
</span><span id="Campaign-456"><a href="#Campaign-456"><span class="linenos">456</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;specified directory does not exist: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">))</span>
</span><span id="Campaign-457"><a href="#Campaign-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">relocate</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span><span id="Campaign-458"><a href="#Campaign-458"><span class="linenos">458</span></a>
</span><span id="Campaign-459"><a href="#Campaign-459"><span class="linenos">459</span></a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign-460"><a href="#Campaign-460"><span class="linenos">460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This will draw samples and execute the Actions on those samples.</span>
</span><span id="Campaign-461"><a href="#Campaign-461"><span class="linenos">461</span></a>
</span><span id="Campaign-462"><a href="#Campaign-462"><span class="linenos">462</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-463"><a href="#Campaign-463"><span class="linenos">463</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-464"><a href="#Campaign-464"><span class="linenos">464</span></a><span class="sd">        nsamples: int</span>
</span><span id="Campaign-465"><a href="#Campaign-465"><span class="linenos">465</span></a><span class="sd">            Number of samples to draw. For infinite samplers or when you want to process</span>
</span><span id="Campaign-466"><a href="#Campaign-466"><span class="linenos">466</span></a><span class="sd">            samples in batches.</span>
</span><span id="Campaign-467"><a href="#Campaign-467"><span class="linenos">467</span></a><span class="sd">        pool: Executor</span>
</span><span id="Campaign-468"><a href="#Campaign-468"><span class="linenos">468</span></a><span class="sd">            A pool object to be used when processing runs (e.g. instance of `ThreadPoolExecutor` or</span>
</span><span id="Campaign-469"><a href="#Campaign-469"><span class="linenos">469</span></a><span class="sd">            `ProcessPoolExecutor`).</span>
</span><span id="Campaign-470"><a href="#Campaign-470"><span class="linenos">470</span></a><span class="sd">        mark_invalid: bool</span>
</span><span id="Campaign-471"><a href="#Campaign-471"><span class="linenos">471</span></a><span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
</span><span id="Campaign-472"><a href="#Campaign-472"><span class="linenos">472</span></a><span class="sd">        sequential: bool</span>
</span><span id="Campaign-473"><a href="#Campaign-473"><span class="linenos">473</span></a><span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
</span><span id="Campaign-474"><a href="#Campaign-474"><span class="linenos">474</span></a><span class="sd">            want to avoid the concurrent module for some reason).</span>
</span><span id="Campaign-475"><a href="#Campaign-475"><span class="linenos">475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-476"><a href="#Campaign-476"><span class="linenos">476</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="Campaign-477"><a href="#Campaign-477"><span class="linenos">477</span></a>        <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
</span><span id="Campaign-478"><a href="#Campaign-478"><span class="linenos">478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span><span id="Campaign-479"><a href="#Campaign-479"><span class="linenos">479</span></a>        <span class="k">return</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
</span><span id="Campaign-480"><a href="#Campaign-480"><span class="linenos">480</span></a>
</span><span id="Campaign-481"><a href="#Campaign-481"><span class="linenos">481</span></a>    <span class="k">def</span> <span class="nf">apply_for_each_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign-482"><a href="#Campaign-482"><span class="linenos">482</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;For each run in this Campaign&#39;s run list, apply the specified action</span>
</span><span id="Campaign-483"><a href="#Campaign-483"><span class="linenos">483</span></a><span class="sd">        (an object of type Action).</span>
</span><span id="Campaign-484"><a href="#Campaign-484"><span class="linenos">484</span></a>
</span><span id="Campaign-485"><a href="#Campaign-485"><span class="linenos">485</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-486"><a href="#Campaign-486"><span class="linenos">486</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-487"><a href="#Campaign-487"><span class="linenos">487</span></a><span class="sd">        actions: Actions</span>
</span><span id="Campaign-488"><a href="#Campaign-488"><span class="linenos">488</span></a><span class="sd">            Actions to be applied to each relevant run in the database.</span>
</span><span id="Campaign-489"><a href="#Campaign-489"><span class="linenos">489</span></a><span class="sd">        status: Status</span>
</span><span id="Campaign-490"><a href="#Campaign-490"><span class="linenos">490</span></a><span class="sd">            Will apply the Actions only to those runs whose status is as specified.</span>
</span><span id="Campaign-491"><a href="#Campaign-491"><span class="linenos">491</span></a><span class="sd">        sequential: bool</span>
</span><span id="Campaign-492"><a href="#Campaign-492"><span class="linenos">492</span></a><span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
</span><span id="Campaign-493"><a href="#Campaign-493"><span class="linenos">493</span></a><span class="sd">            want to avoid the concurrent module for some reason).</span>
</span><span id="Campaign-494"><a href="#Campaign-494"><span class="linenos">494</span></a>
</span><span id="Campaign-495"><a href="#Campaign-495"><span class="linenos">495</span></a><span class="sd">        Returns</span>
</span><span id="Campaign-496"><a href="#Campaign-496"><span class="linenos">496</span></a><span class="sd">        -------</span>
</span><span id="Campaign-497"><a href="#Campaign-497"><span class="linenos">497</span></a><span class="sd">        ActionPool</span>
</span><span id="Campaign-498"><a href="#Campaign-498"><span class="linenos">498</span></a><span class="sd">            An object containing ActionStatus instances to track action execution.</span>
</span><span id="Campaign-499"><a href="#Campaign-499"><span class="linenos">499</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-500"><a href="#Campaign-500"><span class="linenos">500</span></a>        <span class="c1"># Loop through all runs in this campaign with status ENCODED, and</span>
</span><span id="Campaign-501"><a href="#Campaign-501"><span class="linenos">501</span></a>        <span class="c1"># run the specified action on each run&#39;s dir</span>
</span><span id="Campaign-502"><a href="#Campaign-502"><span class="linenos">502</span></a>        <span class="k">def</span> <span class="nf">inits</span><span class="p">():</span>
</span><span id="Campaign-503"><a href="#Campaign-503"><span class="linenos">503</span></a>            <span class="k">for</span> <span class="n">run_id</span><span class="p">,</span> <span class="n">run_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
</span><span id="Campaign-504"><a href="#Campaign-504"><span class="linenos">504</span></a>                    <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]):</span>
</span><span id="Campaign-505"><a href="#Campaign-505"><span class="linenos">505</span></a>                <span class="n">previous</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Campaign-506"><a href="#Campaign-506"><span class="linenos">506</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>
</span><span id="Campaign-507"><a href="#Campaign-507"><span class="linenos">507</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;campaign_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span>
</span><span id="Campaign-508"><a href="#Campaign-508"><span class="linenos">508</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;rundir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;run_dir&#39;</span><span class="p">]</span>
</span><span id="Campaign-509"><a href="#Campaign-509"><span class="linenos">509</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span>
</span><span id="Campaign-510"><a href="#Campaign-510"><span class="linenos">510</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Campaign-511"><a href="#Campaign-511"><span class="linenos">511</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;collated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Campaign-512"><a href="#Campaign-512"><span class="linenos">512</span></a>                <span class="k">yield</span> <span class="n">previous</span>
</span><span id="Campaign-513"><a href="#Campaign-513"><span class="linenos">513</span></a>        <span class="k">return</span> <span class="n">ActionPool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">inits</span><span class="o">=</span><span class="n">inits</span><span class="p">(),</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span><span id="Campaign-514"><a href="#Campaign-514"><span class="linenos">514</span></a>
</span><span id="Campaign-515"><a href="#Campaign-515"><span class="linenos">515</span></a>    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign-516"><a href="#Campaign-516"><span class="linenos">516</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This is the equivalent of `execute` for methods that rely on the output of the</span>
</span><span id="Campaign-517"><a href="#Campaign-517"><span class="linenos">517</span></a><span class="sd">        previous sampling stage (designed for MCMC, should work for others).</span>
</span><span id="Campaign-518"><a href="#Campaign-518"><span class="linenos">518</span></a>
</span><span id="Campaign-519"><a href="#Campaign-519"><span class="linenos">519</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-520"><a href="#Campaign-520"><span class="linenos">520</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-521"><a href="#Campaign-521"><span class="linenos">521</span></a><span class="sd">        nsamples : int</span>
</span><span id="Campaign-522"><a href="#Campaign-522"><span class="linenos">522</span></a><span class="sd">            Number of samples to draw (during a single iteration).</span>
</span><span id="Campaign-523"><a href="#Campaign-523"><span class="linenos">523</span></a><span class="sd">        pool : Executor</span>
</span><span id="Campaign-524"><a href="#Campaign-524"><span class="linenos">524</span></a><span class="sd">            An Executor instance. For example ThreadPoolExecutor or a Dask Client. Defaults</span>
</span><span id="Campaign-525"><a href="#Campaign-525"><span class="linenos">525</span></a><span class="sd">            to the ThreadPoolExecutor.</span>
</span><span id="Campaign-526"><a href="#Campaign-526"><span class="linenos">526</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="Campaign-527"><a href="#Campaign-527"><span class="linenos">527</span></a><span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
</span><span id="Campaign-528"><a href="#Campaign-528"><span class="linenos">528</span></a><span class="sd">        sequential: bool</span>
</span><span id="Campaign-529"><a href="#Campaign-529"><span class="linenos">529</span></a><span class="sd">            Will execute the `Actions` associated with runs sequentially. Might be more</span>
</span><span id="Campaign-530"><a href="#Campaign-530"><span class="linenos">530</span></a><span class="sd">            efficient in some situations.</span>
</span><span id="Campaign-531"><a href="#Campaign-531"><span class="linenos">531</span></a>
</span><span id="Campaign-532"><a href="#Campaign-532"><span class="linenos">532</span></a><span class="sd">        Yields</span>
</span><span id="Campaign-533"><a href="#Campaign-533"><span class="linenos">533</span></a><span class="sd">        ------</span>
</span><span id="Campaign-534"><a href="#Campaign-534"><span class="linenos">534</span></a><span class="sd">        ActionPool</span>
</span><span id="Campaign-535"><a href="#Campaign-535"><span class="linenos">535</span></a><span class="sd">            An object containing Futures instances to track action execution.</span>
</span><span id="Campaign-536"><a href="#Campaign-536"><span class="linenos">536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-537"><a href="#Campaign-537"><span class="linenos">537</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="Campaign-538"><a href="#Campaign-538"><span class="linenos">538</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="Campaign-539"><a href="#Campaign-539"><span class="linenos">539</span></a>            <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
</span><span id="Campaign-540"><a href="#Campaign-540"><span class="linenos">540</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span><span id="Campaign-541"><a href="#Campaign-541"><span class="linenos">541</span></a>            <span class="k">yield</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
</span><span id="Campaign-542"><a href="#Campaign-542"><span class="linenos">542</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Campaign-543"><a href="#Campaign-543"><span class="linenos">543</span></a>            <span class="n">invalid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_invalid_runs</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Campaign-544"><a href="#Campaign-544"><span class="linenos">544</span></a>            <span class="n">ignored_runs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>
</span><span id="Campaign-545"><a href="#Campaign-545"><span class="linenos">545</span></a>            <span class="k">for</span> <span class="n">run_id</span> <span class="ow">in</span> <span class="n">ignored_runs</span><span class="p">:</span>
</span><span id="Campaign-546"><a href="#Campaign-546"><span class="linenos">546</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">)</span><span class="o">.</span>\
</span><span id="Campaign-547"><a href="#Campaign-547"><span class="linenos">547</span></a>                    <span class="nb">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">run_id</span><span class="p">))</span><span class="o">.</span>\
</span><span id="Campaign-548"><a href="#Campaign-548"><span class="linenos">548</span></a>                    <span class="n">update</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">})</span>
</span><span id="Campaign-549"><a href="#Campaign-549"><span class="linenos">549</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span id="Campaign-550"><a href="#Campaign-550"><span class="linenos">550</span></a>
</span><span id="Campaign-551"><a href="#Campaign-551"><span class="linenos">551</span></a>    <span class="k">def</span> <span class="nf">recollate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign-552"><a href="#Campaign-552"><span class="linenos">552</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears the current collation table, changes all COLLATED status runs</span>
</span><span id="Campaign-553"><a href="#Campaign-553"><span class="linenos">553</span></a><span class="sd">           back to ENCODED, then runs collate() again</span>
</span><span id="Campaign-554"><a href="#Campaign-554"><span class="linenos">554</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-555"><a href="#Campaign-555"><span class="linenos">555</span></a>        <span class="n">collated_run_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">run_ids</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">))</span>
</span><span id="Campaign-556"><a href="#Campaign-556"><span class="linenos">556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">collated_run_ids</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
</span><span id="Campaign-557"><a href="#Campaign-557"><span class="linenos">557</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collate</span><span class="p">()</span>
</span><span id="Campaign-558"><a href="#Campaign-558"><span class="linenos">558</span></a>
</span><span id="Campaign-559"><a href="#Campaign-559"><span class="linenos">559</span></a>    <span class="k">def</span> <span class="nf">get_collation_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign-560"><a href="#Campaign-560"><span class="linenos">560</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return dataframe containing all collated results</span>
</span><span id="Campaign-561"><a href="#Campaign-561"><span class="linenos">561</span></a>
</span><span id="Campaign-562"><a href="#Campaign-562"><span class="linenos">562</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-563"><a href="#Campaign-563"><span class="linenos">563</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-564"><a href="#Campaign-564"><span class="linenos">564</span></a><span class="sd">        last_iteration : bool</span>
</span><span id="Campaign-565"><a href="#Campaign-565"><span class="linenos">565</span></a><span class="sd">            Will only return the result of the last iteration.</span>
</span><span id="Campaign-566"><a href="#Campaign-566"><span class="linenos">566</span></a>
</span><span id="Campaign-567"><a href="#Campaign-567"><span class="linenos">567</span></a><span class="sd">        Returns</span>
</span><span id="Campaign-568"><a href="#Campaign-568"><span class="linenos">568</span></a><span class="sd">        -------</span>
</span><span id="Campaign-569"><a href="#Campaign-569"><span class="linenos">569</span></a><span class="sd">        DataFrame</span>
</span><span id="Campaign-570"><a href="#Campaign-570"><span class="linenos">570</span></a><span class="sd">            A DataFrame with the simulation results along with the inputs</span>
</span><span id="Campaign-571"><a href="#Campaign-571"><span class="linenos">571</span></a><span class="sd">            used to produce them.</span>
</span><span id="Campaign-572"><a href="#Campaign-572"><span class="linenos">572</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-573"><a href="#Campaign-573"><span class="linenos">573</span></a>        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
</span><span id="Campaign-574"><a href="#Campaign-574"><span class="linenos">574</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="Campaign-575"><a href="#Campaign-575"><span class="linenos">575</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign-576"><a href="#Campaign-576"><span class="linenos">576</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="Campaign-577"><a href="#Campaign-577"><span class="linenos">577</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span>
</span><span id="Campaign-578"><a href="#Campaign-578"><span class="linenos">578</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span><span id="Campaign-579"><a href="#Campaign-579"><span class="linenos">579</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="Campaign-580"><a href="#Campaign-580"><span class="linenos">580</span></a>            <span class="n">status</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span>
</span><span id="Campaign-581"><a href="#Campaign-581"><span class="linenos">581</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>
</span><span id="Campaign-582"><a href="#Campaign-582"><span class="linenos">582</span></a>
</span><span id="Campaign-583"><a href="#Campaign-583"><span class="linenos">583</span></a>    <span class="k">def</span> <span class="nf">get_invalid_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign-584"><a href="#Campaign-584"><span class="linenos">584</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return dataframe containing all results marked as INVALID.</span>
</span><span id="Campaign-585"><a href="#Campaign-585"><span class="linenos">585</span></a>
</span><span id="Campaign-586"><a href="#Campaign-586"><span class="linenos">586</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-587"><a href="#Campaign-587"><span class="linenos">587</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-588"><a href="#Campaign-588"><span class="linenos">588</span></a><span class="sd">        last_iteration : bool</span>
</span><span id="Campaign-589"><a href="#Campaign-589"><span class="linenos">589</span></a><span class="sd">            Will only return the result of the last iteration.</span>
</span><span id="Campaign-590"><a href="#Campaign-590"><span class="linenos">590</span></a>
</span><span id="Campaign-591"><a href="#Campaign-591"><span class="linenos">591</span></a><span class="sd">        Returns</span>
</span><span id="Campaign-592"><a href="#Campaign-592"><span class="linenos">592</span></a><span class="sd">        -------</span>
</span><span id="Campaign-593"><a href="#Campaign-593"><span class="linenos">593</span></a><span class="sd">        DataFrame</span>
</span><span id="Campaign-594"><a href="#Campaign-594"><span class="linenos">594</span></a><span class="sd">            A DataFrame with the results form simulations that were marked as INVALID.</span>
</span><span id="Campaign-595"><a href="#Campaign-595"><span class="linenos">595</span></a><span class="sd">            These will usually be the ones that went outside the specified parameter ranges.</span>
</span><span id="Campaign-596"><a href="#Campaign-596"><span class="linenos">596</span></a><span class="sd">            These still have to be accounted for in some way by some methods (e.g. MCMC).</span>
</span><span id="Campaign-597"><a href="#Campaign-597"><span class="linenos">597</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-598"><a href="#Campaign-598"><span class="linenos">598</span></a>        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
</span><span id="Campaign-599"><a href="#Campaign-599"><span class="linenos">599</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="Campaign-600"><a href="#Campaign-600"><span class="linenos">600</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign-601"><a href="#Campaign-601"><span class="linenos">601</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="Campaign-602"><a href="#Campaign-602"><span class="linenos">602</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span>
</span><span id="Campaign-603"><a href="#Campaign-603"><span class="linenos">603</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span><span id="Campaign-604"><a href="#Campaign-604"><span class="linenos">604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="Campaign-605"><a href="#Campaign-605"><span class="linenos">605</span></a>            <span class="n">status</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span><span class="p">,</span>
</span><span id="Campaign-606"><a href="#Campaign-606"><span class="linenos">606</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>
</span><span id="Campaign-607"><a href="#Campaign-607"><span class="linenos">607</span></a>
</span><span id="Campaign-608"><a href="#Campaign-608"><span class="linenos">608</span></a>    <span class="k">def</span> <span class="nf">apply_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis</span><span class="p">):</span>
</span><span id="Campaign-609"><a href="#Campaign-609"><span class="linenos">609</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the `analysis` element on the output of the last run collation.</span>
</span><span id="Campaign-610"><a href="#Campaign-610"><span class="linenos">610</span></a>
</span><span id="Campaign-611"><a href="#Campaign-611"><span class="linenos">611</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-612"><a href="#Campaign-612"><span class="linenos">612</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-613"><a href="#Campaign-613"><span class="linenos">613</span></a><span class="sd">        analysis : Analysis</span>
</span><span id="Campaign-614"><a href="#Campaign-614"><span class="linenos">614</span></a><span class="sd">            Element that performs a VVUQ analysis on a dataframe summary of</span>
</span><span id="Campaign-615"><a href="#Campaign-615"><span class="linenos">615</span></a><span class="sd">            run outputs.</span>
</span><span id="Campaign-616"><a href="#Campaign-616"><span class="linenos">616</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-617"><a href="#Campaign-617"><span class="linenos">617</span></a>        <span class="c1"># Apply analysis element to most recent collation result</span>
</span><span id="Campaign-618"><a href="#Campaign-618"><span class="linenos">618</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">data_frame</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">())</span>
</span><span id="Campaign-619"><a href="#Campaign-619"><span class="linenos">619</span></a>
</span><span id="Campaign-620"><a href="#Campaign-620"><span class="linenos">620</span></a>    <span class="k">def</span> <span class="nf">analyse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Campaign-621"><a href="#Campaign-621"><span class="linenos">621</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;If available will call an appropriate analysis class on the collation result.</span>
</span><span id="Campaign-622"><a href="#Campaign-622"><span class="linenos">622</span></a>
</span><span id="Campaign-623"><a href="#Campaign-623"><span class="linenos">623</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-624"><a href="#Campaign-624"><span class="linenos">624</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-625"><a href="#Campaign-625"><span class="linenos">625</span></a><span class="sd">        **kwargs : dict</span>
</span><span id="Campaign-626"><a href="#Campaign-626"><span class="linenos">626</span></a><span class="sd">            Argument to the analysis class constructor (after sampler).</span>
</span><span id="Campaign-627"><a href="#Campaign-627"><span class="linenos">627</span></a>
</span><span id="Campaign-628"><a href="#Campaign-628"><span class="linenos">628</span></a><span class="sd">        Returns</span>
</span><span id="Campaign-629"><a href="#Campaign-629"><span class="linenos">629</span></a><span class="sd">        -------</span>
</span><span id="Campaign-630"><a href="#Campaign-630"><span class="linenos">630</span></a><span class="sd">        AnalysisResults</span>
</span><span id="Campaign-631"><a href="#Campaign-631"><span class="linenos">631</span></a><span class="sd">            An object representing analysis results. Can be used to interact with those results</span>
</span><span id="Campaign-632"><a href="#Campaign-632"><span class="linenos">632</span></a><span class="sd">            in some way. Plot, retrieve surrogate models and so on.</span>
</span><span id="Campaign-633"><a href="#Campaign-633"><span class="linenos">633</span></a><span class="sd">            See `easyvvuq.analysis.AnalysisResults` for further information.</span>
</span><span id="Campaign-634"><a href="#Campaign-634"><span class="linenos">634</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-635"><a href="#Campaign-635"><span class="linenos">635</span></a>        <span class="n">collation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">()</span>
</span><span id="Campaign-636"><a href="#Campaign-636"><span class="linenos">636</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Campaign-637"><a href="#Campaign-637"><span class="linenos">637</span></a>            <span class="n">analysis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">analysis_class</span><span class="p">(</span><span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Campaign-638"><a href="#Campaign-638"><span class="linenos">638</span></a>            <span class="k">return</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">collation_result</span><span class="p">)</span>
</span><span id="Campaign-639"><a href="#Campaign-639"><span class="linenos">639</span></a>        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
</span><span id="Campaign-640"><a href="#Campaign-640"><span class="linenos">640</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This sampler does not have a corresponding analysis class&quot;</span><span class="p">)</span>
</span><span id="Campaign-641"><a href="#Campaign-641"><span class="linenos">641</span></a>
</span><span id="Campaign-642"><a href="#Campaign-642"><span class="linenos">642</span></a>    <span class="k">def</span> <span class="nf">get_last_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign-643"><a href="#Campaign-643"><span class="linenos">643</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the output of the most recently run analysis element.</span>
</span><span id="Campaign-644"><a href="#Campaign-644"><span class="linenos">644</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-645"><a href="#Campaign-645"><span class="linenos">645</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign-646"><a href="#Campaign-646"><span class="linenos">646</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No last analysis output available.&quot;</span><span class="p">)</span>
</span><span id="Campaign-647"><a href="#Campaign-647"><span class="linenos">647</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span>
</span><span id="Campaign-648"><a href="#Campaign-648"><span class="linenos">648</span></a>
</span><span id="Campaign-649"><a href="#Campaign-649"><span class="linenos">649</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign-650"><a href="#Campaign-650"><span class="linenos">650</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns formatted summary of the current Campaign state.</span>
</span><span id="Campaign-651"><a href="#Campaign-651"><span class="linenos">651</span></a><span class="sd">        Enables class to work with standard print() method</span>
</span><span id="Campaign-652"><a href="#Campaign-652"><span class="linenos">652</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-653"><a href="#Campaign-653"><span class="linenos">653</span></a>        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;db_location = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Campaign-654"><a href="#Campaign-654"><span class="linenos">654</span></a>                <span class="sa">f</span><span class="s2">&quot;active_sampler_id = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Campaign-655"><a href="#Campaign-655"><span class="linenos">655</span></a>                <span class="sa">f</span><span class="s2">&quot;campaign_name = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Campaign-656"><a href="#Campaign-656"><span class="linenos">656</span></a>                <span class="sa">f</span><span class="s2">&quot;campaign_dir = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Campaign-657"><a href="#Campaign-657"><span class="linenos">657</span></a>                <span class="sa">f</span><span class="s2">&quot;campaign_id = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Campaign-658"><a href="#Campaign-658"><span class="linenos">658</span></a>
</span><span id="Campaign-659"><a href="#Campaign-659"><span class="linenos">659</span></a>    <span class="k">def</span> <span class="nf">get_active_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign-660"><a href="#Campaign-660"><span class="linenos">660</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the active sampler element in use by this campaign.</span>
</span><span id="Campaign-661"><a href="#Campaign-661"><span class="linenos">661</span></a>
</span><span id="Campaign-662"><a href="#Campaign-662"><span class="linenos">662</span></a><span class="sd">        Returns</span>
</span><span id="Campaign-663"><a href="#Campaign-663"><span class="linenos">663</span></a><span class="sd">        -------</span>
</span><span id="Campaign-664"><a href="#Campaign-664"><span class="linenos">664</span></a><span class="sd">        The sampler currently in use</span>
</span><span id="Campaign-665"><a href="#Campaign-665"><span class="linenos">665</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-666"><a href="#Campaign-666"><span class="linenos">666</span></a>
</span><span id="Campaign-667"><a href="#Campaign-667"><span class="linenos">667</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span>
</span><span id="Campaign-668"><a href="#Campaign-668"><span class="linenos">668</span></a>
</span><span id="Campaign-669"><a href="#Campaign-669"><span class="linenos">669</span></a>    <span class="k">def</span> <span class="nf">ignore_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
</span><span id="Campaign-670"><a href="#Campaign-670"><span class="linenos">670</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Flags the specified runs to be IGNORED in future collation. Note that</span>
</span><span id="Campaign-671"><a href="#Campaign-671"><span class="linenos">671</span></a><span class="sd">        this does NOT remove previously collated results from the collation table.</span>
</span><span id="Campaign-672"><a href="#Campaign-672"><span class="linenos">672</span></a><span class="sd">        For that you must refresh the collation by running recollate().</span>
</span><span id="Campaign-673"><a href="#Campaign-673"><span class="linenos">673</span></a>
</span><span id="Campaign-674"><a href="#Campaign-674"><span class="linenos">674</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-675"><a href="#Campaign-675"><span class="linenos">675</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-676"><a href="#Campaign-676"><span class="linenos">676</span></a><span class="sd">        list</span>
</span><span id="Campaign-677"><a href="#Campaign-677"><span class="linenos">677</span></a><span class="sd">            The list of run IDs for the runs that should be set to status IGNORED</span>
</span><span id="Campaign-678"><a href="#Campaign-678"><span class="linenos">678</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-679"><a href="#Campaign-679"><span class="linenos">679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">)</span>
</span><span id="Campaign-680"><a href="#Campaign-680"><span class="linenos">680</span></a>
</span><span id="Campaign-681"><a href="#Campaign-681"><span class="linenos">681</span></a>    <span class="k">def</span> <span class="nf">rerun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
</span><span id="Campaign-682"><a href="#Campaign-682"><span class="linenos">682</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the status of the specified runs to ENCODED, so that their results</span>
</span><span id="Campaign-683"><a href="#Campaign-683"><span class="linenos">683</span></a><span class="sd">        may be recollated later (presumably after extending, rerunning or otherwise</span>
</span><span id="Campaign-684"><a href="#Campaign-684"><span class="linenos">684</span></a><span class="sd">        modifying the data in the relevant run folder). Note that this method will</span>
</span><span id="Campaign-685"><a href="#Campaign-685"><span class="linenos">685</span></a><span class="sd">        NOT perform any execution - it simply flags the run in EasyVVUQ as being</span>
</span><span id="Campaign-686"><a href="#Campaign-686"><span class="linenos">686</span></a><span class="sd">        uncollated. Actual execution is (as usual) the job of the user or middleware.</span>
</span><span id="Campaign-687"><a href="#Campaign-687"><span class="linenos">687</span></a>
</span><span id="Campaign-688"><a href="#Campaign-688"><span class="linenos">688</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign-689"><a href="#Campaign-689"><span class="linenos">689</span></a><span class="sd">        ----------</span>
</span><span id="Campaign-690"><a href="#Campaign-690"><span class="linenos">690</span></a><span class="sd">        list</span>
</span><span id="Campaign-691"><a href="#Campaign-691"><span class="linenos">691</span></a><span class="sd">            The list of run IDs for the runs that should be set to status ENCODED</span>
</span><span id="Campaign-692"><a href="#Campaign-692"><span class="linenos">692</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-693"><a href="#Campaign-693"><span class="linenos">693</span></a>
</span><span id="Campaign-694"><a href="#Campaign-694"><span class="linenos">694</span></a>        <span class="k">for</span> <span class="n">run_ID</span> <span class="ow">in</span> <span class="n">list_of_run_IDs</span><span class="p">:</span>
</span><span id="Campaign-695"><a href="#Campaign-695"><span class="linenos">695</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_run_status</span><span class="p">(</span><span class="n">run_ID</span><span class="p">)</span>
</span><span id="Campaign-696"><a href="#Campaign-696"><span class="linenos">696</span></a>            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">:</span>
</span><span id="Campaign-697"><a href="#Campaign-697"><span class="linenos">697</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot rerun </span><span class="si">{</span><span class="n">run_ID</span><span class="si">}</span><span class="s2"> as it has status NEW, and must&quot;</span>
</span><span id="Campaign-698"><a href="#Campaign-698"><span class="linenos">698</span></a>                       <span class="sa">f</span><span class="s2">&quot;be encoded before execution.&quot;</span><span class="p">)</span>
</span><span id="Campaign-699"><a href="#Campaign-699"><span class="linenos">699</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign-700"><a href="#Campaign-700"><span class="linenos">700</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
</span><span id="Campaign-701"><a href="#Campaign-701"><span class="linenos">701</span></a>
</span><span id="Campaign-702"><a href="#Campaign-702"><span class="linenos">702</span></a>    <span class="k">def</span> <span class="nf">get_active_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign-703"><a href="#Campaign-703"><span class="linenos">703</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a dict of information regarding the application that is currently</span>
</span><span id="Campaign-704"><a href="#Campaign-704"><span class="linenos">704</span></a><span class="sd">        set for this campaign.</span>
</span><span id="Campaign-705"><a href="#Campaign-705"><span class="linenos">705</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign-706"><a href="#Campaign-706"><span class="linenos">706</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span>
</span></pre></div>


            <div class="docstring"><p>Campaigns organise the dataflow in EasyVVUQ workflows.</p>

<p>The Campaign functions as as state machine for the VVUQ workflows. It uses a
database (CampaignDB) to store information on both the target application
and the VVUQ algorithms being employed. It also collects data from the simulations
and can be used to store and resume your state.</p>

<h6 id="notes">Notes</h6>

<p>Multiple campaigns can be combined in a CampaignDB. Hence the particular
campaign we are currently working on will be specified using <code><a href="#Campaign.campaign_id">campaign_id</a></code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
Name of the Campaign. Freely chosen, serves as a human-readable way of distinguishing
between several campaigns in the same database.</li>
<li><strong>params</strong> (dict, optional):
Description of the parameters to associated with the application. Will be used to create
an app when creating the campaign. It is also possible to add apps manually using <code><a href="#Campaign.add_app">add_app</a></code>
method of the Campaign class. But this can be a useful shorthand when working with single
app campaigns. To use this functionality both <code>params</code> and <code>actions</code> has to be specified.
The name of this app will be the same as the name of the Campaign.</li>
<li><strong>actions</strong> (Actions, optional):
Actions object associated with an application. See description of the <code>params</code> parameter
for more details.</li>
<li><strong>db_location</strong> (str, optional):
Location of the underlying campaign database - either a path or
acceptable URI for SQLAlchemy.</li>
<li><strong>work_dir</strong> (str, optional, default='./'):
Path to working directory - used to store campaign directory.</li>
<li><strong>change_to_state</strong> (bool, optional, default=False):
Should we change to the directory containing any specified <code>state_file</code>
in order to make relative paths work.</li>
<li><strong>verify_all_runs</strong> (bool, optional, default=True):
Check all new runs being added for unrecognised params (not defined for the currently set
app), values lying within defined physical range, type checking etc. This should normally
always be set to True, but in cases where the performance is too degraded, the checks can
be disabled by setting to False.</li>
</ul>

<h6 id="attributes">Attributes</h6>

<ul>
<li><strong>campaign_name</strong> (str or None):
Name for the campaign/workflow.</li>
<li><strong>_campaign_dir</strong> (str or None):
Path to the directory campaign uses for local storage (runs inputs etc)</li>
<li><strong>db_location</strong> (str or None):
Location of the underlying campaign database - either a path or
acceptable URI for SQLAlchemy.</li>
<li><strong>_log</strong> (list):
The log of all elements that have been applied, with information about
their application</li>
<li><strong>campaign_id</strong> (int):
ID number for the current campaign in the db.CampaignDB.</li>
<li><strong>campaign_db</strong> (easyvvuq.db.Basedb.CampaignDB):
A campaign database object</li>
<li><strong>last_analysis:</strong>: The result of the most recent analysis carried out on this campaign</li>
<li><strong>_active_app</strong> (dict):
Info about currently set app</li>
<li><strong>_active_app_name</strong> (str):
Name of currently set app</li>
<li><strong>_active_sampler_id</strong> (int):
The database id of the currently set Sampler object</li>
</ul>

<h6 id="examples">Examples</h6>

<p>A typical instantiation might look like this.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="go">        &quot;S0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 997},</span>
<span class="go">        &quot;I0&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 3},</span>
<span class="go">        &quot;beta&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.2},</span>
<span class="go">        &quot;gamma&quot;: {&quot;type&quot;: &quot;float&quot;, &quot;default&quot;: 0.04, &quot;min&quot;: 0.0, &quot;max&quot;: 1.0},</span>
<span class="go">        &quot;iterations&quot;: {&quot;type&quot;: &quot;integer&quot;, &quot;default&quot;: 100},</span>
<span class="go">        &quot;outfile&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;default&quot;: &quot;output.csv&quot;}</span>
<span class="go">    }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoder</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">encoders</span><span class="o">.</span><span class="n">GenericEncoder</span><span class="p">(</span><span class="n">template_fname</span><span class="o">=</span><span class="s1">&#39;sir.template&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="n">target_filename</span><span class="o">=</span><span class="s1">&#39;input.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decoder</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">decoders</span><span class="o">.</span><span class="n">SimpleCSV</span><span class="p">(</span><span class="n">target_filename</span><span class="o">=</span><span class="s1">&#39;output.csv&#39;</span><span class="p">,</span> <span class="n">output_columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">actions</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">local_execute</span><span class="p">(</span><span class="n">encoder</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;sir&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; input.json&#39;</span><span class="p">,</span> <span class="n">decoder</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">campaign</span> <span class="o">=</span> <span class="n">uq</span><span class="o">.</span><span class="n">Campaign</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sir&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>
</code></pre>
</div>

<p>A simplified one (without an app) might look simply like this.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">campaign</span> <span class="o">=</span> <span class="n">Campaign</span><span class="p">(</span><span class="s1">&#39;simple&#39;</span><span class="p">)</span>
</code></pre>
</div>

<p>An app then can be added.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">campaign</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="s1">&#39;simple_app&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>
</code></pre>
</div>
</div>


                            <div id="Campaign.__init__" class="classattr">
                                        <input id="Campaign.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Campaign</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span>,</span><span class="param">	<span class="n">params</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">actions</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">db_location</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">work_dir</span><span class="o">=</span><span class="s1">&#39;./&#39;</span>,</span><span class="param">	<span class="n">change_to_state</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">verify_all_runs</span><span class="o">=</span><span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="Campaign.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.__init__-138"><a href="#Campaign.__init__-138"><span class="linenos">138</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Campaign.__init__-139"><a href="#Campaign.__init__-139"><span class="linenos">139</span></a>            <span class="bp">self</span><span class="p">,</span>
</span><span id="Campaign.__init__-140"><a href="#Campaign.__init__-140"><span class="linenos">140</span></a>            <span class="n">name</span><span class="p">,</span>
</span><span id="Campaign.__init__-141"><a href="#Campaign.__init__-141"><span class="linenos">141</span></a>            <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Campaign.__init__-142"><a href="#Campaign.__init__-142"><span class="linenos">142</span></a>            <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Campaign.__init__-143"><a href="#Campaign.__init__-143"><span class="linenos">143</span></a>            <span class="n">db_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="Campaign.__init__-144"><a href="#Campaign.__init__-144"><span class="linenos">144</span></a>            <span class="n">work_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
</span><span id="Campaign.__init__-145"><a href="#Campaign.__init__-145"><span class="linenos">145</span></a>            <span class="n">change_to_state</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Campaign.__init__-146"><a href="#Campaign.__init__-146"><span class="linenos">146</span></a>            <span class="n">verify_all_runs</span><span class="o">=</span><span class="kc">True</span>
</span><span id="Campaign.__init__-147"><a href="#Campaign.__init__-147"><span class="linenos">147</span></a>    <span class="p">):</span>
</span><span id="Campaign.__init__-148"><a href="#Campaign.__init__-148"><span class="linenos">148</span></a>
</span><span id="Campaign.__init__-149"><a href="#Campaign.__init__-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">work_dir</span><span class="p">))</span>
</span><span id="Campaign.__init__-150"><a href="#Campaign.__init__-150"><span class="linenos">150</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span> <span class="o">=</span> <span class="n">verify_all_runs</span>
</span><span id="Campaign.__init__-151"><a href="#Campaign.__init__-151"><span class="linenos">151</span></a>
</span><span id="Campaign.__init__-152"><a href="#Campaign.__init__-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Campaign.__init__-153"><a href="#Campaign.__init__-153"><span class="linenos">153</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-154"><a href="#Campaign.__init__-154"><span class="linenos">154</span></a>
</span><span id="Campaign.__init__-155"><a href="#Campaign.__init__-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="n">db_location</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign.__init__-156"><a href="#Campaign.__init__-156"><span class="linenos">156</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="Campaign.__init__-157"><a href="#Campaign.__init__-157"><span class="linenos">157</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="s2">&quot;sqlite:///&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">+</span> <span class="s2">&quot;/campaign.db&quot;</span>
</span><span id="Campaign.__init__-158"><a href="#Campaign.__init__-158"><span class="linenos">158</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign.__init__-159"><a href="#Campaign.__init__-159"><span class="linenos">159</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">db_location</span> <span class="o">=</span> <span class="n">db_location</span>
</span><span id="Campaign.__init__-160"><a href="#Campaign.__init__-160"><span class="linenos">160</span></a>
</span><span id="Campaign.__init__-161"><a href="#Campaign.__init__-161"><span class="linenos">161</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-162"><a href="#Campaign.__init__-162"><span class="linenos">162</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-163"><a href="#Campaign.__init__-163"><span class="linenos">163</span></a>
</span><span id="Campaign.__init__-164"><a href="#Campaign.__init__-164"><span class="linenos">164</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-165"><a href="#Campaign.__init__-165"><span class="linenos">165</span></a>
</span><span id="Campaign.__init__-166"><a href="#Campaign.__init__-166"><span class="linenos">166</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-167"><a href="#Campaign.__init__-167"><span class="linenos">167</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-168"><a href="#Campaign.__init__-168"><span class="linenos">168</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-169"><a href="#Campaign.__init__-169"><span class="linenos">169</span></a>
</span><span id="Campaign.__init__-170"><a href="#Campaign.__init__-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-171"><a href="#Campaign.__init__-171"><span class="linenos">171</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-172"><a href="#Campaign.__init__-172"><span class="linenos">172</span></a>
</span><span id="Campaign.__init__-173"><a href="#Campaign.__init__-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="Campaign.__init__-174"><a href="#Campaign.__init__-174"><span class="linenos">174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_state_dir</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Campaign.__init__-175"><a href="#Campaign.__init__-175"><span class="linenos">175</span></a>
</span><span id="Campaign.__init__-176"><a href="#Campaign.__init__-176"><span class="linenos">176</span></a>        <span class="c1"># here we assume that the user wants to add an app</span>
</span><span id="Campaign.__init__-177"><a href="#Campaign.__init__-177"><span class="linenos">177</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">actions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="Campaign.__init__-178"><a href="#Campaign.__init__-178"><span class="linenos">178</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Campaign.work_dir" class="classattr">
                                <div class="attr variable">
            <span class="name">work_dir</span>

        
    </div>
    <a class="headerlink" href="#Campaign.work_dir"></a>
    
    

                            </div>
                            <div id="Campaign.verify_all_runs" class="classattr">
                                <div class="attr variable">
            <span class="name">verify_all_runs</span>

        
    </div>
    <a class="headerlink" href="#Campaign.verify_all_runs"></a>
    
    

                            </div>
                            <div id="Campaign.campaign_name" class="classattr">
                                <div class="attr variable">
            <span class="name">campaign_name</span>

        
    </div>
    <a class="headerlink" href="#Campaign.campaign_name"></a>
    
    

                            </div>
                            <div id="Campaign.campaign_id" class="classattr">
                                <div class="attr variable">
            <span class="name">campaign_id</span>

        
    </div>
    <a class="headerlink" href="#Campaign.campaign_id"></a>
    
    

                            </div>
                            <div id="Campaign.campaign_db" class="classattr">
                                <div class="attr variable">
            <span class="name">campaign_db</span>

        
    </div>
    <a class="headerlink" href="#Campaign.campaign_db"></a>
    
    

                            </div>
                            <div id="Campaign.last_analysis" class="classattr">
                                <div class="attr variable">
            <span class="name">last_analysis</span>

        
    </div>
    <a class="headerlink" href="#Campaign.last_analysis"></a>
    
    

                            </div>
                            <div id="Campaign.campaign_dir" class="classattr">
                                <div class="attr variable">
            <span class="name">campaign_dir</span>

        
    </div>
    <a class="headerlink" href="#Campaign.campaign_dir"></a>
    
            <div class="docstring"><p>Get the path in which to load/save files related to the campaign.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>str</strong>: Path to the campaign directory - given as a subdirectory of the
working directory.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.init_db" class="classattr">
                                        <input id="Campaign.init_db-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">init_db</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span>, </span><span class="param"><span class="n">work_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.init_db-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.init_db"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.init_db-193"><a href="#Campaign.init_db-193"><span class="linenos">193</span></a>    <span class="k">def</span> <span class="nf">init_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">work_dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
</span><span id="Campaign.init_db-194"><a href="#Campaign.init_db-194"><span class="linenos">194</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the connection with the database and either resume or create the campaign.</span>
</span><span id="Campaign.init_db-195"><a href="#Campaign.init_db-195"><span class="linenos">195</span></a>
</span><span id="Campaign.init_db-196"><a href="#Campaign.init_db-196"><span class="linenos">196</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.init_db-197"><a href="#Campaign.init_db-197"><span class="linenos">197</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.init_db-198"><a href="#Campaign.init_db-198"><span class="linenos">198</span></a><span class="sd">        name: str</span>
</span><span id="Campaign.init_db-199"><a href="#Campaign.init_db-199"><span class="linenos">199</span></a><span class="sd">            Name of the campaign.</span>
</span><span id="Campaign.init_db-200"><a href="#Campaign.init_db-200"><span class="linenos">200</span></a><span class="sd">        work_dir: str</span>
</span><span id="Campaign.init_db-201"><a href="#Campaign.init_db-201"><span class="linenos">201</span></a><span class="sd">            Work directory, defaults to cwd.</span>
</span><span id="Campaign.init_db-202"><a href="#Campaign.init_db-202"><span class="linenos">202</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.init_db-203"><a href="#Campaign.init_db-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">CampaignDB</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_location</span><span class="p">)</span>
</span><span id="Campaign.init_db-204"><a href="#Campaign.init_db-204"><span class="linenos">204</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span><span id="Campaign.init_db-205"><a href="#Campaign.init_db-205"><span class="linenos">205</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign.init_db-206"><a href="#Campaign.init_db-206"><span class="linenos">206</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_active_app</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
</span><span id="Campaign.init_db-207"><a href="#Campaign.init_db-207"><span class="linenos">207</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Campaign.init_db-208"><a href="#Campaign.init_db-208"><span class="linenos">208</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">campaign_dir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign.init_db-209"><a href="#Campaign.init_db-209"><span class="linenos">209</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">):</span>
</span><span id="Campaign.init_db-210"><a href="#Campaign.init_db-210"><span class="linenos">210</span></a>                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Campaign directory (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_dir</span><span class="si">}</span><span class="s2">) does not exist.&quot;</span><span class="p">)</span>
</span><span id="Campaign.init_db-211"><a href="#Campaign.init_db-211"><span class="linenos">211</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="Campaign.init_db-212"><a href="#Campaign.init_db-212"><span class="linenos">212</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_sampler_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">)</span>
</span><span id="Campaign.init_db-213"><a href="#Campaign.init_db-213"><span class="linenos">213</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
</span><span id="Campaign.init_db-214"><a href="#Campaign.init_db-214"><span class="linenos">214</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span><span class="p">)</span>
</span><span id="Campaign.init_db-215"><a href="#Campaign.init_db-215"><span class="linenos">215</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resume_campaign</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign.init_db-216"><a href="#Campaign.init_db-216"><span class="linenos">216</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign.init_db-217"><a href="#Campaign.init_db-217"><span class="linenos">217</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign.init_db-218"><a href="#Campaign.init_db-218"><span class="linenos">218</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">)</span>
</span><span id="Campaign.init_db-219"><a href="#Campaign.init_db-219"><span class="linenos">219</span></a>            <span class="n">info</span> <span class="o">=</span> <span class="n">CampaignInfo</span><span class="p">(</span>
</span><span id="Campaign.init_db-220"><a href="#Campaign.init_db-220"><span class="linenos">220</span></a>                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="Campaign.init_db-221"><a href="#Campaign.init_db-221"><span class="linenos">221</span></a>                <span class="n">campaign_dir_prefix</span><span class="o">=</span><span class="n">default_campaign_prefix</span><span class="p">,</span>
</span><span id="Campaign.init_db-222"><a href="#Campaign.init_db-222"><span class="linenos">222</span></a>                <span class="n">easyvvuq_version</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span>
</span><span id="Campaign.init_db-223"><a href="#Campaign.init_db-223"><span class="linenos">223</span></a>                <span class="n">campaign_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span><span class="p">)</span>
</span><span id="Campaign.init_db-224"><a href="#Campaign.init_db-224"><span class="linenos">224</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">create_campaign</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</span><span id="Campaign.init_db-225"><a href="#Campaign.init_db-225"><span class="linenos">225</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Campaign.init_db-226"><a href="#Campaign.init_db-226"><span class="linenos">226</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_campaign_id</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the connection with the database and either resume or create the campaign.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
Name of the campaign.</li>
<li><strong>work_dir</strong> (str):
Work directory, defaults to cwd.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.add_app" class="classattr">
                                        <input id="Campaign.add_app-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_app</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">params</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">actions</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">set_active</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.add_app-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.add_app"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.add_app-228"><a href="#Campaign.add_app-228"><span class="linenos">228</span></a>    <span class="k">def</span> <span class="nf">add_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">actions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">set_active</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="Campaign.add_app-229"><a href="#Campaign.add_app-229"><span class="linenos">229</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an application to the CampaignDB.</span>
</span><span id="Campaign.add_app-230"><a href="#Campaign.add_app-230"><span class="linenos">230</span></a>
</span><span id="Campaign.add_app-231"><a href="#Campaign.add_app-231"><span class="linenos">231</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.add_app-232"><a href="#Campaign.add_app-232"><span class="linenos">232</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.add_app-233"><a href="#Campaign.add_app-233"><span class="linenos">233</span></a><span class="sd">        name : str</span>
</span><span id="Campaign.add_app-234"><a href="#Campaign.add_app-234"><span class="linenos">234</span></a><span class="sd">            Name of the application.</span>
</span><span id="Campaign.add_app-235"><a href="#Campaign.add_app-235"><span class="linenos">235</span></a><span class="sd">        params : dict</span>
</span><span id="Campaign.add_app-236"><a href="#Campaign.add_app-236"><span class="linenos">236</span></a><span class="sd">            Description of the parameters to associate with the application.</span>
</span><span id="Campaign.add_app-237"><a href="#Campaign.add_app-237"><span class="linenos">237</span></a><span class="sd">        actions : Actions</span>
</span><span id="Campaign.add_app-238"><a href="#Campaign.add_app-238"><span class="linenos">238</span></a><span class="sd">            An instance of Actions containing actions to be executed</span>
</span><span id="Campaign.add_app-239"><a href="#Campaign.add_app-239"><span class="linenos">239</span></a><span class="sd">        set_active: bool</span>
</span><span id="Campaign.add_app-240"><a href="#Campaign.add_app-240"><span class="linenos">240</span></a><span class="sd">            Should the added app be set to be the currently active app?</span>
</span><span id="Campaign.add_app-241"><a href="#Campaign.add_app-241"><span class="linenos">241</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.add_app-242"><a href="#Campaign.add_app-242"><span class="linenos">242</span></a>        <span class="c1"># Verify input parameters dict</span>
</span><span id="Campaign.add_app-243"><a href="#Campaign.add_app-243"><span class="linenos">243</span></a>        <span class="n">paramsspec</span> <span class="o">=</span> <span class="n">easyvvuq</span><span class="o">.</span><span class="n">ParamsSpecification</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">appname</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span><span id="Campaign.add_app-244"><a href="#Campaign.add_app-244"><span class="linenos">244</span></a>        <span class="c1"># validate application input</span>
</span><span id="Campaign.add_app-245"><a href="#Campaign.add_app-245"><span class="linenos">245</span></a>        <span class="n">app</span> <span class="o">=</span> <span class="n">AppInfo</span><span class="p">(</span>
</span><span id="Campaign.add_app-246"><a href="#Campaign.add_app-246"><span class="linenos">246</span></a>            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
</span><span id="Campaign.add_app-247"><a href="#Campaign.add_app-247"><span class="linenos">247</span></a>            <span class="n">paramsspec</span><span class="o">=</span><span class="n">paramsspec</span><span class="p">,</span>
</span><span id="Campaign.add_app-248"><a href="#Campaign.add_app-248"><span class="linenos">248</span></a>            <span class="n">actions</span><span class="o">=</span><span class="n">actions</span><span class="p">,</span>
</span><span id="Campaign.add_app-249"><a href="#Campaign.add_app-249"><span class="linenos">249</span></a>        <span class="p">)</span>
</span><span id="Campaign.add_app-250"><a href="#Campaign.add_app-250"><span class="linenos">250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</span><span id="Campaign.add_app-251"><a href="#Campaign.add_app-251"><span class="linenos">251</span></a>        <span class="k">if</span> <span class="n">set_active</span><span class="p">:</span>
</span><span id="Campaign.add_app-252"><a href="#Campaign.add_app-252"><span class="linenos">252</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_app</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add an application to the CampaignDB.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
Name of the application.</li>
<li><strong>params</strong> (dict):
Description of the parameters to associate with the application.</li>
<li><strong>actions</strong> (Actions):
An instance of Actions containing actions to be executed</li>
<li><strong>set_active</strong> (bool):
Should the added app be set to be the currently active app?</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.set_app" class="classattr">
                                        <input id="Campaign.set_app-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_app</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">app_name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.set_app-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.set_app"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.set_app-254"><a href="#Campaign.set_app-254"><span class="linenos">254</span></a>    <span class="k">def</span> <span class="nf">set_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
</span><span id="Campaign.set_app-255"><a href="#Campaign.set_app-255"><span class="linenos">255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set active app for the campaign.</span>
</span><span id="Campaign.set_app-256"><a href="#Campaign.set_app-256"><span class="linenos">256</span></a>
</span><span id="Campaign.set_app-257"><a href="#Campaign.set_app-257"><span class="linenos">257</span></a><span class="sd">        Application information is retrieved from `self.campaign_db`.</span>
</span><span id="Campaign.set_app-258"><a href="#Campaign.set_app-258"><span class="linenos">258</span></a>
</span><span id="Campaign.set_app-259"><a href="#Campaign.set_app-259"><span class="linenos">259</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.set_app-260"><a href="#Campaign.set_app-260"><span class="linenos">260</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.set_app-261"><a href="#Campaign.set_app-261"><span class="linenos">261</span></a><span class="sd">        app_name: str</span>
</span><span id="Campaign.set_app-262"><a href="#Campaign.set_app-262"><span class="linenos">262</span></a><span class="sd">            Name of selected app, if `None` given then first app will be</span>
</span><span id="Campaign.set_app-263"><a href="#Campaign.set_app-263"><span class="linenos">263</span></a><span class="sd">            selected.</span>
</span><span id="Campaign.set_app-264"><a href="#Campaign.set_app-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.set_app-265"><a href="#Campaign.set_app-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_name</span> <span class="o">=</span> <span class="n">app_name</span>
</span><span id="Campaign.set_app-266"><a href="#Campaign.set_app-266"><span class="linenos">266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">app</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">app_name</span><span class="p">)</span>
</span><span id="Campaign.set_app-267"><a href="#Campaign.set_app-267"><span class="linenos">267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_active_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
</span><span id="Campaign.set_app-268"><a href="#Campaign.set_app-268"><span class="linenos">268</span></a>        <span class="c1"># Resurrect the app encoder, decoder and collation elements</span>
</span><span id="Campaign.set_app-269"><a href="#Campaign.set_app-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">resurrect_app</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set active app for the campaign.</p>

<p>Application information is retrieved from <code>self.campaign_db</code>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>app_name</strong> (str):
Name of selected app, if <code>None</code> given then first app will be
selected.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.replace_actions" class="classattr">
                                        <input id="Campaign.replace_actions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">replace_actions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">app_name</span>, </span><span class="param"><span class="n">actions</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.replace_actions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.replace_actions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.replace_actions-271"><a href="#Campaign.replace_actions-271"><span class="linenos">271</span></a>    <span class="k">def</span> <span class="nf">replace_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
</span><span id="Campaign.replace_actions-272"><a href="#Campaign.replace_actions-272"><span class="linenos">272</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace actions for an app with a given name.</span>
</span><span id="Campaign.replace_actions-273"><a href="#Campaign.replace_actions-273"><span class="linenos">273</span></a>
</span><span id="Campaign.replace_actions-274"><a href="#Campaign.replace_actions-274"><span class="linenos">274</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.replace_actions-275"><a href="#Campaign.replace_actions-275"><span class="linenos">275</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.replace_actions-276"><a href="#Campaign.replace_actions-276"><span class="linenos">276</span></a><span class="sd">        app_name: str</span>
</span><span id="Campaign.replace_actions-277"><a href="#Campaign.replace_actions-277"><span class="linenos">277</span></a><span class="sd">            Name of the app.</span>
</span><span id="Campaign.replace_actions-278"><a href="#Campaign.replace_actions-278"><span class="linenos">278</span></a><span class="sd">        actions: Actions</span>
</span><span id="Campaign.replace_actions-279"><a href="#Campaign.replace_actions-279"><span class="linenos">279</span></a><span class="sd">            `Actions` instance, will replace the current `Actions` of an app.</span>
</span><span id="Campaign.replace_actions-280"><a href="#Campaign.replace_actions-280"><span class="linenos">280</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.replace_actions-281"><a href="#Campaign.replace_actions-281"><span class="linenos">281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">replace_actions</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span> <span class="n">actions</span><span class="p">)</span>
</span><span id="Campaign.replace_actions-282"><a href="#Campaign.replace_actions-282"><span class="linenos">282</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span> <span class="o">=</span> <span class="n">actions</span>
</span></pre></div>


            <div class="docstring"><p>Replace actions for an app with a given name.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>app_name</strong> (str):
Name of the app.</li>
<li><strong>actions</strong> (Actions):
<code>Actions</code> instance, will replace the current <code>Actions</code> of an app.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.set_sampler" class="classattr">
                                        <input id="Campaign.set_sampler-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_sampler</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">sampler</span>, </span><span class="param"><span class="n">update</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.set_sampler-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.set_sampler"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.set_sampler-284"><a href="#Campaign.set_sampler-284"><span class="linenos">284</span></a>    <span class="k">def</span> <span class="nf">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign.set_sampler-285"><a href="#Campaign.set_sampler-285"><span class="linenos">285</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set active sampler.</span>
</span><span id="Campaign.set_sampler-286"><a href="#Campaign.set_sampler-286"><span class="linenos">286</span></a>
</span><span id="Campaign.set_sampler-287"><a href="#Campaign.set_sampler-287"><span class="linenos">287</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.set_sampler-288"><a href="#Campaign.set_sampler-288"><span class="linenos">288</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.set_sampler-289"><a href="#Campaign.set_sampler-289"><span class="linenos">289</span></a><span class="sd">        sampler : Sampler</span>
</span><span id="Campaign.set_sampler-290"><a href="#Campaign.set_sampler-290"><span class="linenos">290</span></a><span class="sd">            Sampler that will be used to create runs for the current campaign.</span>
</span><span id="Campaign.set_sampler-291"><a href="#Campaign.set_sampler-291"><span class="linenos">291</span></a><span class="sd">        update : bool</span>
</span><span id="Campaign.set_sampler-292"><a href="#Campaign.set_sampler-292"><span class="linenos">292</span></a><span class="sd">            If set to True it will not add the sampler to the database, just change</span>
</span><span id="Campaign.set_sampler-293"><a href="#Campaign.set_sampler-293"><span class="linenos">293</span></a><span class="sd">            it as the active sampler.</span>
</span><span id="Campaign.set_sampler-294"><a href="#Campaign.set_sampler-294"><span class="linenos">294</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.set_sampler-295"><a href="#Campaign.set_sampler-295"><span class="linenos">295</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span> <span class="o">=</span> <span class="n">sampler</span>
</span><span id="Campaign.set_sampler-296"><a href="#Campaign.set_sampler-296"><span class="linenos">296</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">update</span><span class="p">:</span>
</span><span id="Campaign.set_sampler-297"><a href="#Campaign.set_sampler-297"><span class="linenos">297</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_sampler</span><span class="p">(</span><span class="n">sampler</span><span class="p">)</span>
</span><span id="Campaign.set_sampler-298"><a href="#Campaign.set_sampler-298"><span class="linenos">298</span></a>            <span class="n">sampler</span><span class="o">.</span><span class="n">sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span>
</span><span id="Campaign.set_sampler-299"><a href="#Campaign.set_sampler-299"><span class="linenos">299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span>
</span><span id="Campaign.set_sampler-300"><a href="#Campaign.set_sampler-300"><span class="linenos">300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">sampler_id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set active sampler.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>sampler</strong> (Sampler):
Sampler that will be used to create runs for the current campaign.</li>
<li><strong>update</strong> (bool):
If set to True it will not add the sampler to the database, just change
it as the active sampler.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.add_external_runs" class="classattr">
                                        <input id="Campaign.add_external_runs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_external_runs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">input_files</span>, </span><span class="param"><span class="n">output_files</span>, </span><span class="param"><span class="n">input_decoder</span>, </span><span class="param"><span class="n">output_decoder</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.add_external_runs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.add_external_runs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.add_external_runs-302"><a href="#Campaign.add_external_runs-302"><span class="linenos">302</span></a>    <span class="k">def</span> <span class="nf">add_external_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_files</span><span class="p">,</span> <span class="n">output_files</span><span class="p">,</span> <span class="n">input_decoder</span><span class="p">,</span> <span class="n">output_decoder</span><span class="p">):</span>
</span><span id="Campaign.add_external_runs-303"><a href="#Campaign.add_external_runs-303"><span class="linenos">303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Takes a list of files and adds them to the database. This method is to be</span>
</span><span id="Campaign.add_external_runs-304"><a href="#Campaign.add_external_runs-304"><span class="linenos">304</span></a><span class="sd">        used when adding runs to the EasyVVUQ database that were not executed using</span>
</span><span id="Campaign.add_external_runs-305"><a href="#Campaign.add_external_runs-305"><span class="linenos">305</span></a><span class="sd">        EasyVVUQ.</span>
</span><span id="Campaign.add_external_runs-306"><a href="#Campaign.add_external_runs-306"><span class="linenos">306</span></a>
</span><span id="Campaign.add_external_runs-307"><a href="#Campaign.add_external_runs-307"><span class="linenos">307</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.add_external_runs-308"><a href="#Campaign.add_external_runs-308"><span class="linenos">308</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.add_external_runs-309"><a href="#Campaign.add_external_runs-309"><span class="linenos">309</span></a><span class="sd">        output_files: list of str</span>
</span><span id="Campaign.add_external_runs-310"><a href="#Campaign.add_external_runs-310"><span class="linenos">310</span></a><span class="sd">            A list of output file paths to be loaded to the database.</span>
</span><span id="Campaign.add_external_runs-311"><a href="#Campaign.add_external_runs-311"><span class="linenos">311</span></a><span class="sd">        decoder: Decoder</span>
</span><span id="Campaign.add_external_runs-312"><a href="#Campaign.add_external_runs-312"><span class="linenos">312</span></a><span class="sd">            A decoder that will be used to parse these files.</span>
</span><span id="Campaign.add_external_runs-313"><a href="#Campaign.add_external_runs-313"><span class="linenos">313</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.add_external_runs-314"><a href="#Campaign.add_external_runs-314"><span class="linenos">314</span></a>        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Campaign.add_external_runs-315"><a href="#Campaign.add_external_runs-315"><span class="linenos">315</span></a>        <span class="k">for</span> <span class="n">input_file</span> <span class="ow">in</span> <span class="n">input_files</span><span class="p">:</span>
</span><span id="Campaign.add_external_runs-316"><a href="#Campaign.add_external_runs-316"><span class="linenos">316</span></a>            <span class="n">input_decoder</span><span class="o">.</span><span class="n">target_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="Campaign.add_external_runs-317"><a href="#Campaign.add_external_runs-317"><span class="linenos">317</span></a>            <span class="n">params</span> <span class="o">=</span> <span class="n">input_decoder</span><span class="o">.</span><span class="n">parse_sim_output</span><span class="p">({</span><span class="s1">&#39;run_dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">input_file</span><span class="p">)})</span>
</span><span id="Campaign.add_external_runs-318"><a href="#Campaign.add_external_runs-318"><span class="linenos">318</span></a>            <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="Campaign.add_external_runs-319"><a href="#Campaign.add_external_runs-319"><span class="linenos">319</span></a>        <span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Campaign.add_external_runs-320"><a href="#Campaign.add_external_runs-320"><span class="linenos">320</span></a>        <span class="k">for</span> <span class="n">output_file</span> <span class="ow">in</span> <span class="n">output_files</span><span class="p">:</span>
</span><span id="Campaign.add_external_runs-321"><a href="#Campaign.add_external_runs-321"><span class="linenos">321</span></a>            <span class="n">output_decoder</span><span class="o">.</span><span class="n">target_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="Campaign.add_external_runs-322"><a href="#Campaign.add_external_runs-322"><span class="linenos">322</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">output_decoder</span><span class="o">.</span><span class="n">parse_sim_output</span><span class="p">({</span><span class="s1">&#39;run_dir&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">output_file</span><span class="p">)})</span>
</span><span id="Campaign.add_external_runs-323"><a href="#Campaign.add_external_runs-323"><span class="linenos">323</span></a>            <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="Campaign.add_external_runs-324"><a href="#Campaign.add_external_runs-324"><span class="linenos">324</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Campaign.add_external_runs-325"><a href="#Campaign.add_external_runs-325"><span class="linenos">325</span></a>        <span class="k">for</span> <span class="n">params</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">):</span>
</span><span id="Campaign.add_external_runs-326"><a href="#Campaign.add_external_runs-326"><span class="linenos">326</span></a>            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Campaign.add_external_runs-327"><a href="#Campaign.add_external_runs-327"><span class="linenos">327</span></a>            <span class="n">table</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">(</span><span class="n">run_name</span><span class="o">=</span><span class="s1">&#39;run_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span>
</span><span id="Campaign.add_external_runs-328"><a href="#Campaign.add_external_runs-328"><span class="linenos">328</span></a>                                <span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="Campaign.add_external_runs-329"><a href="#Campaign.add_external_runs-329"><span class="linenos">329</span></a>                                <span class="n">params</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
</span><span id="Campaign.add_external_runs-330"><a href="#Campaign.add_external_runs-330"><span class="linenos">330</span></a>                                <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span>
</span><span id="Campaign.add_external_runs-331"><a href="#Campaign.add_external_runs-331"><span class="linenos">331</span></a>                                <span class="n">run_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_campaign_runs_dir</span><span class="p">(),</span>
</span><span id="Campaign.add_external_runs-332"><a href="#Campaign.add_external_runs-332"><span class="linenos">332</span></a>                                <span class="n">result</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">),</span>
</span><span id="Campaign.add_external_runs-333"><a href="#Campaign.add_external_runs-333"><span class="linenos">333</span></a>                                <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
</span><span id="Campaign.add_external_runs-334"><a href="#Campaign.add_external_runs-334"><span class="linenos">334</span></a>                                <span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">)</span>
</span><span id="Campaign.add_external_runs-335"><a href="#Campaign.add_external_runs-335"><span class="linenos">335</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</span><span id="Campaign.add_external_runs-336"><a href="#Campaign.add_external_runs-336"><span class="linenos">336</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Takes a list of files and adds them to the database. This method is to be
used when adding runs to the EasyVVUQ database that were not executed using
EasyVVUQ.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>output_files</strong> (list of str):
A list of output file paths to be loaded to the database.</li>
<li><strong>decoder</strong> (Decoder):
A decoder that will be used to parse these files.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.add_runs" class="classattr">
                                        <input id="Campaign.add_runs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_runs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">runs</span>, </span><span class="param"><span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.add_runs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.add_runs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.add_runs-338"><a href="#Campaign.add_runs-338"><span class="linenos">338</span></a>    <span class="k">def</span> <span class="nf">add_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign.add_runs-339"><a href="#Campaign.add_runs-339"><span class="linenos">339</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add runs to the database.</span>
</span><span id="Campaign.add_runs-340"><a href="#Campaign.add_runs-340"><span class="linenos">340</span></a>
</span><span id="Campaign.add_runs-341"><a href="#Campaign.add_runs-341"><span class="linenos">341</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.add_runs-342"><a href="#Campaign.add_runs-342"><span class="linenos">342</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.add_runs-343"><a href="#Campaign.add_runs-343"><span class="linenos">343</span></a><span class="sd">        runs : list of dicts</span>
</span><span id="Campaign.add_runs-344"><a href="#Campaign.add_runs-344"><span class="linenos">344</span></a><span class="sd">            Each dict defines the value of each model parameter listed in</span>
</span><span id="Campaign.add_runs-345"><a href="#Campaign.add_runs-345"><span class="linenos">345</span></a><span class="sd">            self.params_info for a run to be added to self.runs</span>
</span><span id="Campaign.add_runs-346"><a href="#Campaign.add_runs-346"><span class="linenos">346</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="Campaign.add_runs-347"><a href="#Campaign.add_runs-347"><span class="linenos">347</span></a><span class="sd">            Will mark runs that fail verification as invalid (but will not raise an exception)</span>
</span><span id="Campaign.add_runs-348"><a href="#Campaign.add_runs-348"><span class="linenos">348</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.add_runs-349"><a href="#Campaign.add_runs-349"><span class="linenos">349</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign.add_runs-350"><a href="#Campaign.add_runs-350"><span class="linenos">350</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;No app is currently set for this campaign. &quot;</span>
</span><span id="Campaign.add_runs-351"><a href="#Campaign.add_runs-351"><span class="linenos">351</span></a>                   <span class="s2">&quot;Use set_app(&#39;name_of_app&#39;).&quot;</span><span class="p">)</span>
</span><span id="Campaign.add_runs-352"><a href="#Campaign.add_runs-352"><span class="linenos">352</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign.add_runs-353"><a href="#Campaign.add_runs-353"><span class="linenos">353</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign.add_runs-354"><a href="#Campaign.add_runs-354"><span class="linenos">354</span></a>        <span class="n">app_default_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s2">&quot;params&quot;</span><span class="p">]</span>
</span><span id="Campaign.add_runs-355"><a href="#Campaign.add_runs-355"><span class="linenos">355</span></a>        <span class="n">run_info_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Campaign.add_runs-356"><a href="#Campaign.add_runs-356"><span class="linenos">356</span></a>        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
</span><span id="Campaign.add_runs-357"><a href="#Campaign.add_runs-357"><span class="linenos">357</span></a>            <span class="k">if</span> <span class="n">new_run</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign.add_runs-358"><a href="#Campaign.add_runs-358"><span class="linenos">358</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;add_run() was passed new_run of type None. Bad sampler?&quot;</span><span class="p">)</span>
</span><span id="Campaign.add_runs-359"><a href="#Campaign.add_runs-359"><span class="linenos">359</span></a>                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign.add_runs-360"><a href="#Campaign.add_runs-360"><span class="linenos">360</span></a>                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign.add_runs-361"><a href="#Campaign.add_runs-361"><span class="linenos">361</span></a>            <span class="c1"># Verify and complete run with missing/default param values</span>
</span><span id="Campaign.add_runs-362"><a href="#Campaign.add_runs-362"><span class="linenos">362</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span>
</span><span id="Campaign.add_runs-363"><a href="#Campaign.add_runs-363"><span class="linenos">363</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Campaign.add_runs-364"><a href="#Campaign.add_runs-364"><span class="linenos">364</span></a>                <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verify_all_runs</span><span class="p">)</span>
</span><span id="Campaign.add_runs-365"><a href="#Campaign.add_runs-365"><span class="linenos">365</span></a>            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
</span><span id="Campaign.add_runs-366"><a href="#Campaign.add_runs-366"><span class="linenos">366</span></a>                <span class="k">if</span> <span class="n">mark_invalid</span><span class="p">:</span>
</span><span id="Campaign.add_runs-367"><a href="#Campaign.add_runs-367"><span class="linenos">367</span></a>                    <span class="n">new_run</span> <span class="o">=</span> <span class="n">app_default_params</span><span class="o">.</span><span class="n">process_run</span><span class="p">(</span><span class="n">new_run</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Campaign.add_runs-368"><a href="#Campaign.add_runs-368"><span class="linenos">368</span></a>                    <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span>
</span><span id="Campaign.add_runs-369"><a href="#Campaign.add_runs-369"><span class="linenos">369</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign.add_runs-370"><a href="#Campaign.add_runs-370"><span class="linenos">370</span></a>                    <span class="k">raise</span>
</span><span id="Campaign.add_runs-371"><a href="#Campaign.add_runs-371"><span class="linenos">371</span></a>            <span class="c1"># Add to run queue</span>
</span><span id="Campaign.add_runs-372"><a href="#Campaign.add_runs-372"><span class="linenos">372</span></a>            <span class="n">run_info</span> <span class="o">=</span> <span class="n">RunInfo</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
</span><span id="Campaign.add_runs-373"><a href="#Campaign.add_runs-373"><span class="linenos">373</span></a>                               <span class="n">params</span><span class="o">=</span><span class="n">new_run</span><span class="p">,</span>
</span><span id="Campaign.add_runs-374"><a href="#Campaign.add_runs-374"><span class="linenos">374</span></a>                               <span class="n">sample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="Campaign.add_runs-375"><a href="#Campaign.add_runs-375"><span class="linenos">375</span></a>                               <span class="n">campaign</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_id</span><span class="p">,</span>
</span><span id="Campaign.add_runs-376"><a href="#Campaign.add_runs-376"><span class="linenos">376</span></a>                               <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
</span><span id="Campaign.add_runs-377"><a href="#Campaign.add_runs-377"><span class="linenos">377</span></a>            <span class="n">run_info_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run_info</span><span class="p">)</span>
</span><span id="Campaign.add_runs-378"><a href="#Campaign.add_runs-378"><span class="linenos">378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">run_info_list</span><span class="p">,</span> <span class="n">iteration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add runs to the database.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>runs</strong> (list of dicts):
Each dict defines the value of each model parameter listed in
self.params_info for a run to be added to self.runs</li>
<li><strong>mark_invalid</strong> (bool):
Will mark runs that fail verification as invalid (but will not raise an exception)</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.draw_samples" class="classattr">
                                        <input id="Campaign.draw_samples-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw_samples</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">num_samples</span><span class="o">=</span><span class="mi">0</span>, </span><span class="param"><span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.draw_samples-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.draw_samples"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.draw_samples-380"><a href="#Campaign.draw_samples-380"><span class="linenos">380</span></a>    <span class="k">def</span> <span class="nf">draw_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_samples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign.draw_samples-381"><a href="#Campaign.draw_samples-381"><span class="linenos">381</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Draws `num_samples` sets of parameters from the currently set</span>
</span><span id="Campaign.draw_samples-382"><a href="#Campaign.draw_samples-382"><span class="linenos">382</span></a><span class="sd">        sampler, resulting in `num_samples` new runs added to the</span>
</span><span id="Campaign.draw_samples-383"><a href="#Campaign.draw_samples-383"><span class="linenos">383</span></a><span class="sd">        runs list. If `num_samples` is 0 (its default value) then</span>
</span><span id="Campaign.draw_samples-384"><a href="#Campaign.draw_samples-384"><span class="linenos">384</span></a><span class="sd">        this method draws ALL samples from the sampler, until exhaustion (this</span>
</span><span id="Campaign.draw_samples-385"><a href="#Campaign.draw_samples-385"><span class="linenos">385</span></a><span class="sd">        will fail if the sampler is not finite).</span>
</span><span id="Campaign.draw_samples-386"><a href="#Campaign.draw_samples-386"><span class="linenos">386</span></a>
</span><span id="Campaign.draw_samples-387"><a href="#Campaign.draw_samples-387"><span class="linenos">387</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.draw_samples-388"><a href="#Campaign.draw_samples-388"><span class="linenos">388</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.draw_samples-389"><a href="#Campaign.draw_samples-389"><span class="linenos">389</span></a><span class="sd">        num_samples : int</span>
</span><span id="Campaign.draw_samples-390"><a href="#Campaign.draw_samples-390"><span class="linenos">390</span></a><span class="sd">            Number of samples to draw from the active sampling element.</span>
</span><span id="Campaign.draw_samples-391"><a href="#Campaign.draw_samples-391"><span class="linenos">391</span></a><span class="sd">            By default is 0 (draw ALL samples)</span>
</span><span id="Campaign.draw_samples-392"><a href="#Campaign.draw_samples-392"><span class="linenos">392</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="Campaign.draw_samples-393"><a href="#Campaign.draw_samples-393"><span class="linenos">393</span></a><span class="sd">            If True will mark runs that go outside valid parameter range as INVALID.</span>
</span><span id="Campaign.draw_samples-394"><a href="#Campaign.draw_samples-394"><span class="linenos">394</span></a><span class="sd">            This is useful for MCMC style methods where you want those runs to evaluate</span>
</span><span id="Campaign.draw_samples-395"><a href="#Campaign.draw_samples-395"><span class="linenos">395</span></a><span class="sd">            to low probabilities.</span>
</span><span id="Campaign.draw_samples-396"><a href="#Campaign.draw_samples-396"><span class="linenos">396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.draw_samples-397"><a href="#Campaign.draw_samples-397"><span class="linenos">397</span></a>        <span class="c1"># Make sure `num_samples` is not 0 for an infinite generator</span>
</span><span id="Campaign.draw_samples-398"><a href="#Campaign.draw_samples-398"><span class="linenos">398</span></a>        <span class="c1"># (this would add runs forever...)</span>
</span><span id="Campaign.draw_samples-399"><a href="#Campaign.draw_samples-399"><span class="linenos">399</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">is_finite</span><span class="p">()</span> <span class="ow">and</span> <span class="n">num_samples</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Campaign.draw_samples-400"><a href="#Campaign.draw_samples-400"><span class="linenos">400</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sampling_element &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">element_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
</span><span id="Campaign.draw_samples-401"><a href="#Campaign.draw_samples-401"><span class="linenos">401</span></a>                   <span class="sa">f</span><span class="s2">&quot;is an infinite generator, therefore a finite number of &quot;</span>
</span><span id="Campaign.draw_samples-402"><a href="#Campaign.draw_samples-402"><span class="linenos">402</span></a>                   <span class="sa">f</span><span class="s2">&quot;draws (n &gt; 0) must be specified.&quot;</span><span class="p">)</span>
</span><span id="Campaign.draw_samples-403"><a href="#Campaign.draw_samples-403"><span class="linenos">403</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign.draw_samples-404"><a href="#Campaign.draw_samples-404"><span class="linenos">404</span></a>        <span class="n">num_added</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Campaign.draw_samples-405"><a href="#Campaign.draw_samples-405"><span class="linenos">405</span></a>        <span class="n">new_runs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Campaign.draw_samples-406"><a href="#Campaign.draw_samples-406"><span class="linenos">406</span></a>        <span class="k">for</span> <span class="n">new_run</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">:</span>
</span><span id="Campaign.draw_samples-407"><a href="#Campaign.draw_samples-407"><span class="linenos">407</span></a>            <span class="n">new_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_run</span><span class="p">)</span>
</span><span id="Campaign.draw_samples-408"><a href="#Campaign.draw_samples-408"><span class="linenos">408</span></a>            <span class="n">num_added</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Campaign.draw_samples-409"><a href="#Campaign.draw_samples-409"><span class="linenos">409</span></a>            <span class="k">if</span> <span class="n">num_samples</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">num_added</span> <span class="o">&gt;=</span> <span class="n">num_samples</span><span class="p">:</span>
</span><span id="Campaign.draw_samples-410"><a href="#Campaign.draw_samples-410"><span class="linenos">410</span></a>                <span class="k">break</span>
</span><span id="Campaign.draw_samples-411"><a href="#Campaign.draw_samples-411"><span class="linenos">411</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">add_runs</span><span class="p">(</span><span class="n">new_runs</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="Campaign.draw_samples-412"><a href="#Campaign.draw_samples-412"><span class="linenos">412</span></a>        <span class="c1"># Write sampler&#39;s new state to database</span>
</span><span id="Campaign.draw_samples-413"><a href="#Campaign.draw_samples-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">update_sampler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">)</span>
</span><span id="Campaign.draw_samples-414"><a href="#Campaign.draw_samples-414"><span class="linenos">414</span></a>        <span class="k">return</span> <span class="n">new_runs</span>
</span></pre></div>


            <div class="docstring"><p>Draws <code>num_samples</code> sets of parameters from the currently set
sampler, resulting in <code>num_samples</code> new runs added to the
runs list. If <code>num_samples</code> is 0 (its default value) then
this method draws ALL samples from the sampler, until exhaustion (this
will fail if the sampler is not finite).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>num_samples</strong> (int):
Number of samples to draw from the active sampling element.
By default is 0 (draw ALL samples)</li>
<li><strong>mark_invalid</strong> (bool):
If True will mark runs that go outside valid parameter range as INVALID.
This is useful for MCMC style methods where you want those runs to evaluate
to low probabilities.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.list_runs" class="classattr">
                                        <input id="Campaign.list_runs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_runs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">sampler</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">campaign</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">app_id</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">status</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.list_runs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.list_runs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.list_runs-416"><a href="#Campaign.list_runs-416"><span class="linenos">416</span></a>    <span class="k">def</span> <span class="nf">list_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Campaign.list_runs-417"><a href="#Campaign.list_runs-417"><span class="linenos">417</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of runs in the CampaignDB.</span>
</span><span id="Campaign.list_runs-418"><a href="#Campaign.list_runs-418"><span class="linenos">418</span></a>
</span><span id="Campaign.list_runs-419"><a href="#Campaign.list_runs-419"><span class="linenos">419</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.list_runs-420"><a href="#Campaign.list_runs-420"><span class="linenos">420</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.list_runs-421"><a href="#Campaign.list_runs-421"><span class="linenos">421</span></a><span class="sd">        sampler: int</span>
</span><span id="Campaign.list_runs-422"><a href="#Campaign.list_runs-422"><span class="linenos">422</span></a><span class="sd">            Sampler id to filter for.</span>
</span><span id="Campaign.list_runs-423"><a href="#Campaign.list_runs-423"><span class="linenos">423</span></a><span class="sd">        campaign: int</span>
</span><span id="Campaign.list_runs-424"><a href="#Campaign.list_runs-424"><span class="linenos">424</span></a><span class="sd">            Campaign id to filter for.</span>
</span><span id="Campaign.list_runs-425"><a href="#Campaign.list_runs-425"><span class="linenos">425</span></a><span class="sd">        app_id: int</span>
</span><span id="Campaign.list_runs-426"><a href="#Campaign.list_runs-426"><span class="linenos">426</span></a><span class="sd">            App id to filter for.</span>
</span><span id="Campaign.list_runs-427"><a href="#Campaign.list_runs-427"><span class="linenos">427</span></a><span class="sd">        status: Status</span>
</span><span id="Campaign.list_runs-428"><a href="#Campaign.list_runs-428"><span class="linenos">428</span></a><span class="sd">            Status to filter for.</span>
</span><span id="Campaign.list_runs-429"><a href="#Campaign.list_runs-429"><span class="linenos">429</span></a>
</span><span id="Campaign.list_runs-430"><a href="#Campaign.list_runs-430"><span class="linenos">430</span></a><span class="sd">        Returns</span>
</span><span id="Campaign.list_runs-431"><a href="#Campaign.list_runs-431"><span class="linenos">431</span></a><span class="sd">        -------</span>
</span><span id="Campaign.list_runs-432"><a href="#Campaign.list_runs-432"><span class="linenos">432</span></a><span class="sd">        list of runs</span>
</span><span id="Campaign.list_runs-433"><a href="#Campaign.list_runs-433"><span class="linenos">433</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.list_runs-434"><a href="#Campaign.list_runs-434"><span class="linenos">434</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
</span><span id="Campaign.list_runs-435"><a href="#Campaign.list_runs-435"><span class="linenos">435</span></a>            <span class="n">sampler</span><span class="o">=</span><span class="n">sampler</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="n">app_id</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Get list of runs in the CampaignDB.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>sampler</strong> (int):
Sampler id to filter for.</li>
<li><strong>campaign</strong> (int):
Campaign id to filter for.</li>
<li><strong>app_id</strong> (int):
App id to filter for.</li>
<li><strong>status</strong> (Status):
Status to filter for.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>list of runs</strong></li>
</ul>
</div>


                            </div>
                            <div id="Campaign.get_campaign_runs_dir" class="classattr">
                                        <input id="Campaign.get_campaign_runs_dir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_campaign_runs_dir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.get_campaign_runs_dir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.get_campaign_runs_dir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.get_campaign_runs_dir-437"><a href="#Campaign.get_campaign_runs_dir-437"><span class="linenos">437</span></a>    <span class="k">def</span> <span class="nf">get_campaign_runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign.get_campaign_runs_dir-438"><a href="#Campaign.get_campaign_runs_dir-438"><span class="linenos">438</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the runs directory from the CampaignDB.</span>
</span><span id="Campaign.get_campaign_runs_dir-439"><a href="#Campaign.get_campaign_runs_dir-439"><span class="linenos">439</span></a>
</span><span id="Campaign.get_campaign_runs_dir-440"><a href="#Campaign.get_campaign_runs_dir-440"><span class="linenos">440</span></a><span class="sd">        Returns</span>
</span><span id="Campaign.get_campaign_runs_dir-441"><a href="#Campaign.get_campaign_runs_dir-441"><span class="linenos">441</span></a><span class="sd">        -------</span>
</span><span id="Campaign.get_campaign_runs_dir-442"><a href="#Campaign.get_campaign_runs_dir-442"><span class="linenos">442</span></a><span class="sd">        str</span>
</span><span id="Campaign.get_campaign_runs_dir-443"><a href="#Campaign.get_campaign_runs_dir-443"><span class="linenos">443</span></a><span class="sd">            Path in which the runs information will be written.</span>
</span><span id="Campaign.get_campaign_runs_dir-444"><a href="#Campaign.get_campaign_runs_dir-444"><span class="linenos">444</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.get_campaign_runs_dir-445"><a href="#Campaign.get_campaign_runs_dir-445"><span class="linenos">445</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get the runs directory from the CampaignDB.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>str</strong>: Path in which the runs information will be written.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.relocate" class="classattr">
                                        <input id="Campaign.relocate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">relocate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">campaign_dir</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.relocate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.relocate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.relocate-447"><a href="#Campaign.relocate-447"><span class="linenos">447</span></a>    <span class="k">def</span> <span class="nf">relocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">campaign_dir</span><span class="p">):</span>
</span><span id="Campaign.relocate-448"><a href="#Campaign.relocate-448"><span class="linenos">448</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Relocate the campaign by specifying a new path where campaign is located.</span>
</span><span id="Campaign.relocate-449"><a href="#Campaign.relocate-449"><span class="linenos">449</span></a>
</span><span id="Campaign.relocate-450"><a href="#Campaign.relocate-450"><span class="linenos">450</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.relocate-451"><a href="#Campaign.relocate-451"><span class="linenos">451</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.relocate-452"><a href="#Campaign.relocate-452"><span class="linenos">452</span></a><span class="sd">        new_path: str</span>
</span><span id="Campaign.relocate-453"><a href="#Campaign.relocate-453"><span class="linenos">453</span></a><span class="sd">            new runs directory</span>
</span><span id="Campaign.relocate-454"><a href="#Campaign.relocate-454"><span class="linenos">454</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.relocate-455"><a href="#Campaign.relocate-455"><span class="linenos">455</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">):</span>
</span><span id="Campaign.relocate-456"><a href="#Campaign.relocate-456"><span class="linenos">456</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;specified directory does not exist: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">))</span>
</span><span id="Campaign.relocate-457"><a href="#Campaign.relocate-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">relocate</span><span class="p">(</span><span class="n">campaign_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Relocate the campaign by specifying a new path where campaign is located.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>new_path</strong> (str):
new runs directory</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.execute" class="classattr">
                                        <input id="Campaign.execute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">execute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span>, </span><span class="param"><span class="n">pool</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">sequential</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.execute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.execute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.execute-459"><a href="#Campaign.execute-459"><span class="linenos">459</span></a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign.execute-460"><a href="#Campaign.execute-460"><span class="linenos">460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This will draw samples and execute the Actions on those samples.</span>
</span><span id="Campaign.execute-461"><a href="#Campaign.execute-461"><span class="linenos">461</span></a>
</span><span id="Campaign.execute-462"><a href="#Campaign.execute-462"><span class="linenos">462</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.execute-463"><a href="#Campaign.execute-463"><span class="linenos">463</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.execute-464"><a href="#Campaign.execute-464"><span class="linenos">464</span></a><span class="sd">        nsamples: int</span>
</span><span id="Campaign.execute-465"><a href="#Campaign.execute-465"><span class="linenos">465</span></a><span class="sd">            Number of samples to draw. For infinite samplers or when you want to process</span>
</span><span id="Campaign.execute-466"><a href="#Campaign.execute-466"><span class="linenos">466</span></a><span class="sd">            samples in batches.</span>
</span><span id="Campaign.execute-467"><a href="#Campaign.execute-467"><span class="linenos">467</span></a><span class="sd">        pool: Executor</span>
</span><span id="Campaign.execute-468"><a href="#Campaign.execute-468"><span class="linenos">468</span></a><span class="sd">            A pool object to be used when processing runs (e.g. instance of `ThreadPoolExecutor` or</span>
</span><span id="Campaign.execute-469"><a href="#Campaign.execute-469"><span class="linenos">469</span></a><span class="sd">            `ProcessPoolExecutor`).</span>
</span><span id="Campaign.execute-470"><a href="#Campaign.execute-470"><span class="linenos">470</span></a><span class="sd">        mark_invalid: bool</span>
</span><span id="Campaign.execute-471"><a href="#Campaign.execute-471"><span class="linenos">471</span></a><span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
</span><span id="Campaign.execute-472"><a href="#Campaign.execute-472"><span class="linenos">472</span></a><span class="sd">        sequential: bool</span>
</span><span id="Campaign.execute-473"><a href="#Campaign.execute-473"><span class="linenos">473</span></a><span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
</span><span id="Campaign.execute-474"><a href="#Campaign.execute-474"><span class="linenos">474</span></a><span class="sd">            want to avoid the concurrent module for some reason).</span>
</span><span id="Campaign.execute-475"><a href="#Campaign.execute-475"><span class="linenos">475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.execute-476"><a href="#Campaign.execute-476"><span class="linenos">476</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="Campaign.execute-477"><a href="#Campaign.execute-477"><span class="linenos">477</span></a>        <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
</span><span id="Campaign.execute-478"><a href="#Campaign.execute-478"><span class="linenos">478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span><span id="Campaign.execute-479"><a href="#Campaign.execute-479"><span class="linenos">479</span></a>        <span class="k">return</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This will draw samples and execute the Actions on those samples.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>nsamples</strong> (int):
Number of samples to draw. For infinite samplers or when you want to process
samples in batches.</li>
<li><strong>pool</strong> (Executor):
A pool object to be used when processing runs (e.g. instance of <code>ThreadPoolExecutor</code> or
<code>ProcessPoolExecutor</code>).</li>
<li><strong>mark_invalid</strong> (bool):
Mark runs that go outside the specified input parameter range as INVALID.</li>
<li><strong>sequential</strong> (bool):
Whether to process samples sequentially (sometimes more efficient or you might
want to avoid the concurrent module for some reason).</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.apply_for_each_sample" class="classattr">
                                        <input id="Campaign.apply_for_each_sample-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">apply_for_each_sample</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">actions</span>, </span><span class="param"><span class="n">status</span><span class="o">=&lt;</span><span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">:</span> <span class="mi">1</span><span class="o">&gt;</span>, </span><span class="param"><span class="n">sequential</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.apply_for_each_sample-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.apply_for_each_sample"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.apply_for_each_sample-481"><a href="#Campaign.apply_for_each_sample-481"><span class="linenos">481</span></a>    <span class="k">def</span> <span class="nf">apply_for_each_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign.apply_for_each_sample-482"><a href="#Campaign.apply_for_each_sample-482"><span class="linenos">482</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;For each run in this Campaign&#39;s run list, apply the specified action</span>
</span><span id="Campaign.apply_for_each_sample-483"><a href="#Campaign.apply_for_each_sample-483"><span class="linenos">483</span></a><span class="sd">        (an object of type Action).</span>
</span><span id="Campaign.apply_for_each_sample-484"><a href="#Campaign.apply_for_each_sample-484"><span class="linenos">484</span></a>
</span><span id="Campaign.apply_for_each_sample-485"><a href="#Campaign.apply_for_each_sample-485"><span class="linenos">485</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.apply_for_each_sample-486"><a href="#Campaign.apply_for_each_sample-486"><span class="linenos">486</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.apply_for_each_sample-487"><a href="#Campaign.apply_for_each_sample-487"><span class="linenos">487</span></a><span class="sd">        actions: Actions</span>
</span><span id="Campaign.apply_for_each_sample-488"><a href="#Campaign.apply_for_each_sample-488"><span class="linenos">488</span></a><span class="sd">            Actions to be applied to each relevant run in the database.</span>
</span><span id="Campaign.apply_for_each_sample-489"><a href="#Campaign.apply_for_each_sample-489"><span class="linenos">489</span></a><span class="sd">        status: Status</span>
</span><span id="Campaign.apply_for_each_sample-490"><a href="#Campaign.apply_for_each_sample-490"><span class="linenos">490</span></a><span class="sd">            Will apply the Actions only to those runs whose status is as specified.</span>
</span><span id="Campaign.apply_for_each_sample-491"><a href="#Campaign.apply_for_each_sample-491"><span class="linenos">491</span></a><span class="sd">        sequential: bool</span>
</span><span id="Campaign.apply_for_each_sample-492"><a href="#Campaign.apply_for_each_sample-492"><span class="linenos">492</span></a><span class="sd">            Whether to process samples sequentially (sometimes more efficient or you might</span>
</span><span id="Campaign.apply_for_each_sample-493"><a href="#Campaign.apply_for_each_sample-493"><span class="linenos">493</span></a><span class="sd">            want to avoid the concurrent module for some reason).</span>
</span><span id="Campaign.apply_for_each_sample-494"><a href="#Campaign.apply_for_each_sample-494"><span class="linenos">494</span></a>
</span><span id="Campaign.apply_for_each_sample-495"><a href="#Campaign.apply_for_each_sample-495"><span class="linenos">495</span></a><span class="sd">        Returns</span>
</span><span id="Campaign.apply_for_each_sample-496"><a href="#Campaign.apply_for_each_sample-496"><span class="linenos">496</span></a><span class="sd">        -------</span>
</span><span id="Campaign.apply_for_each_sample-497"><a href="#Campaign.apply_for_each_sample-497"><span class="linenos">497</span></a><span class="sd">        ActionPool</span>
</span><span id="Campaign.apply_for_each_sample-498"><a href="#Campaign.apply_for_each_sample-498"><span class="linenos">498</span></a><span class="sd">            An object containing ActionStatus instances to track action execution.</span>
</span><span id="Campaign.apply_for_each_sample-499"><a href="#Campaign.apply_for_each_sample-499"><span class="linenos">499</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.apply_for_each_sample-500"><a href="#Campaign.apply_for_each_sample-500"><span class="linenos">500</span></a>        <span class="c1"># Loop through all runs in this campaign with status ENCODED, and</span>
</span><span id="Campaign.apply_for_each_sample-501"><a href="#Campaign.apply_for_each_sample-501"><span class="linenos">501</span></a>        <span class="c1"># run the specified action on each run&#39;s dir</span>
</span><span id="Campaign.apply_for_each_sample-502"><a href="#Campaign.apply_for_each_sample-502"><span class="linenos">502</span></a>        <span class="k">def</span> <span class="nf">inits</span><span class="p">():</span>
</span><span id="Campaign.apply_for_each_sample-503"><a href="#Campaign.apply_for_each_sample-503"><span class="linenos">503</span></a>            <span class="k">for</span> <span class="n">run_id</span><span class="p">,</span> <span class="n">run_data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">runs</span><span class="p">(</span>
</span><span id="Campaign.apply_for_each_sample-504"><a href="#Campaign.apply_for_each_sample-504"><span class="linenos">504</span></a>                    <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]):</span>
</span><span id="Campaign.apply_for_each_sample-505"><a href="#Campaign.apply_for_each_sample-505"><span class="linenos">505</span></a>                <span class="n">previous</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Campaign.apply_for_each_sample-506"><a href="#Campaign.apply_for_each_sample-506"><span class="linenos">506</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>
</span><span id="Campaign.apply_for_each_sample-507"><a href="#Campaign.apply_for_each_sample-507"><span class="linenos">507</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;campaign_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_campaign_dir</span>
</span><span id="Campaign.apply_for_each_sample-508"><a href="#Campaign.apply_for_each_sample-508"><span class="linenos">508</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;rundir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span><span class="p">[</span><span class="s1">&#39;run_dir&#39;</span><span class="p">]</span>
</span><span id="Campaign.apply_for_each_sample-509"><a href="#Campaign.apply_for_each_sample-509"><span class="linenos">509</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;run_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_data</span>
</span><span id="Campaign.apply_for_each_sample-510"><a href="#Campaign.apply_for_each_sample-510"><span class="linenos">510</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Campaign.apply_for_each_sample-511"><a href="#Campaign.apply_for_each_sample-511"><span class="linenos">511</span></a>                <span class="n">previous</span><span class="p">[</span><span class="s1">&#39;collated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Campaign.apply_for_each_sample-512"><a href="#Campaign.apply_for_each_sample-512"><span class="linenos">512</span></a>                <span class="k">yield</span> <span class="n">previous</span>
</span><span id="Campaign.apply_for_each_sample-513"><a href="#Campaign.apply_for_each_sample-513"><span class="linenos">513</span></a>        <span class="k">return</span> <span class="n">ActionPool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">inits</span><span class="o">=</span><span class="n">inits</span><span class="p">(),</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>For each run in this Campaign's run list, apply the specified action
(an object of type Action).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>actions</strong> (Actions):
Actions to be applied to each relevant run in the database.</li>
<li><strong>status</strong> (Status):
Will apply the Actions only to those runs whose status is as specified.</li>
<li><strong>sequential</strong> (bool):
Whether to process samples sequentially (sometimes more efficient or you might
want to avoid the concurrent module for some reason).</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>ActionPool</strong>: An object containing ActionStatus instances to track action execution.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.iterate" class="classattr">
                                        <input id="Campaign.iterate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">iterate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span>, </span><span class="param"><span class="n">pool</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">sequential</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.iterate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.iterate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.iterate-515"><a href="#Campaign.iterate-515"><span class="linenos">515</span></a>    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign.iterate-516"><a href="#Campaign.iterate-516"><span class="linenos">516</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This is the equivalent of `execute` for methods that rely on the output of the</span>
</span><span id="Campaign.iterate-517"><a href="#Campaign.iterate-517"><span class="linenos">517</span></a><span class="sd">        previous sampling stage (designed for MCMC, should work for others).</span>
</span><span id="Campaign.iterate-518"><a href="#Campaign.iterate-518"><span class="linenos">518</span></a>
</span><span id="Campaign.iterate-519"><a href="#Campaign.iterate-519"><span class="linenos">519</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.iterate-520"><a href="#Campaign.iterate-520"><span class="linenos">520</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.iterate-521"><a href="#Campaign.iterate-521"><span class="linenos">521</span></a><span class="sd">        nsamples : int</span>
</span><span id="Campaign.iterate-522"><a href="#Campaign.iterate-522"><span class="linenos">522</span></a><span class="sd">            Number of samples to draw (during a single iteration).</span>
</span><span id="Campaign.iterate-523"><a href="#Campaign.iterate-523"><span class="linenos">523</span></a><span class="sd">        pool : Executor</span>
</span><span id="Campaign.iterate-524"><a href="#Campaign.iterate-524"><span class="linenos">524</span></a><span class="sd">            An Executor instance. For example ThreadPoolExecutor or a Dask Client. Defaults</span>
</span><span id="Campaign.iterate-525"><a href="#Campaign.iterate-525"><span class="linenos">525</span></a><span class="sd">            to the ThreadPoolExecutor.</span>
</span><span id="Campaign.iterate-526"><a href="#Campaign.iterate-526"><span class="linenos">526</span></a><span class="sd">        mark_invalid : bool</span>
</span><span id="Campaign.iterate-527"><a href="#Campaign.iterate-527"><span class="linenos">527</span></a><span class="sd">            Mark runs that go outside the specified input parameter range as INVALID.</span>
</span><span id="Campaign.iterate-528"><a href="#Campaign.iterate-528"><span class="linenos">528</span></a><span class="sd">        sequential: bool</span>
</span><span id="Campaign.iterate-529"><a href="#Campaign.iterate-529"><span class="linenos">529</span></a><span class="sd">            Will execute the `Actions` associated with runs sequentially. Might be more</span>
</span><span id="Campaign.iterate-530"><a href="#Campaign.iterate-530"><span class="linenos">530</span></a><span class="sd">            efficient in some situations.</span>
</span><span id="Campaign.iterate-531"><a href="#Campaign.iterate-531"><span class="linenos">531</span></a>
</span><span id="Campaign.iterate-532"><a href="#Campaign.iterate-532"><span class="linenos">532</span></a><span class="sd">        Yields</span>
</span><span id="Campaign.iterate-533"><a href="#Campaign.iterate-533"><span class="linenos">533</span></a><span class="sd">        ------</span>
</span><span id="Campaign.iterate-534"><a href="#Campaign.iterate-534"><span class="linenos">534</span></a><span class="sd">        ActionPool</span>
</span><span id="Campaign.iterate-535"><a href="#Campaign.iterate-535"><span class="linenos">535</span></a><span class="sd">            An object containing Futures instances to track action execution.</span>
</span><span id="Campaign.iterate-536"><a href="#Campaign.iterate-536"><span class="linenos">536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.iterate-537"><a href="#Campaign.iterate-537"><span class="linenos">537</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="Campaign.iterate-538"><a href="#Campaign.iterate-538"><span class="linenos">538</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">draw_samples</span><span class="p">(</span><span class="n">nsamples</span><span class="p">,</span> <span class="n">mark_invalid</span><span class="o">=</span><span class="n">mark_invalid</span><span class="p">)</span>
</span><span id="Campaign.iterate-539"><a href="#Campaign.iterate-539"><span class="linenos">539</span></a>            <span class="n">action_pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_for_each_sample</span><span class="p">(</span>
</span><span id="Campaign.iterate-540"><a href="#Campaign.iterate-540"><span class="linenos">540</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_active_app_actions</span><span class="p">,</span> <span class="n">sequential</span><span class="o">=</span><span class="n">sequential</span><span class="p">)</span>
</span><span id="Campaign.iterate-541"><a href="#Campaign.iterate-541"><span class="linenos">541</span></a>            <span class="k">yield</span> <span class="n">action_pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
</span><span id="Campaign.iterate-542"><a href="#Campaign.iterate-542"><span class="linenos">542</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Campaign.iterate-543"><a href="#Campaign.iterate-543"><span class="linenos">543</span></a>            <span class="n">invalid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_invalid_runs</span><span class="p">(</span><span class="n">last_iteration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Campaign.iterate-544"><a href="#Campaign.iterate-544"><span class="linenos">544</span></a>            <span class="n">ignored_runs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>
</span><span id="Campaign.iterate-545"><a href="#Campaign.iterate-545"><span class="linenos">545</span></a>            <span class="k">for</span> <span class="n">run_id</span> <span class="ow">in</span> <span class="n">ignored_runs</span><span class="p">:</span>
</span><span id="Campaign.iterate-546"><a href="#Campaign.iterate-546"><span class="linenos">546</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="p">)</span><span class="o">.</span>\
</span><span id="Campaign.iterate-547"><a href="#Campaign.iterate-547"><span class="linenos">547</span></a>                    <span class="nb">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">RunTable</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="n">run_id</span><span class="p">))</span><span class="o">.</span>\
</span><span id="Campaign.iterate-548"><a href="#Campaign.iterate-548"><span class="linenos">548</span></a>                    <span class="n">update</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">})</span>
</span><span id="Campaign.iterate-549"><a href="#Campaign.iterate-549"><span class="linenos">549</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This is the equivalent of <code><a href="#Campaign.execute">execute</a></code> for methods that rely on the output of the
previous sampling stage (designed for MCMC, should work for others).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>nsamples</strong> (int):
Number of samples to draw (during a single iteration).</li>
<li><strong>pool</strong> (Executor):
An Executor instance. For example ThreadPoolExecutor or a Dask Client. Defaults
to the ThreadPoolExecutor.</li>
<li><strong>mark_invalid</strong> (bool):
Mark runs that go outside the specified input parameter range as INVALID.</li>
<li><strong>sequential</strong> (bool):
Will execute the <code>Actions</code> associated with runs sequentially. Might be more
efficient in some situations.</li>
</ul>

<h6 id="yields">Yields</h6>

<ul>
<li><strong>ActionPool</strong>: An object containing Futures instances to track action execution.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.recollate" class="classattr">
                                        <input id="Campaign.recollate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">recollate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.recollate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.recollate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.recollate-551"><a href="#Campaign.recollate-551"><span class="linenos">551</span></a>    <span class="k">def</span> <span class="nf">recollate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign.recollate-552"><a href="#Campaign.recollate-552"><span class="linenos">552</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears the current collation table, changes all COLLATED status runs</span>
</span><span id="Campaign.recollate-553"><a href="#Campaign.recollate-553"><span class="linenos">553</span></a><span class="sd">           back to ENCODED, then runs collate() again</span>
</span><span id="Campaign.recollate-554"><a href="#Campaign.recollate-554"><span class="linenos">554</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.recollate-555"><a href="#Campaign.recollate-555"><span class="linenos">555</span></a>        <span class="n">collated_run_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">run_ids</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">))</span>
</span><span id="Campaign.recollate-556"><a href="#Campaign.recollate-556"><span class="linenos">556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">collated_run_ids</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
</span><span id="Campaign.recollate-557"><a href="#Campaign.recollate-557"><span class="linenos">557</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collate</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Clears the current collation table, changes all COLLATED status runs
back to ENCODED, then runs collate() again</p>
</div>


                            </div>
                            <div id="Campaign.get_collation_result" class="classattr">
                                        <input id="Campaign.get_collation_result-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_collation_result</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.get_collation_result-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.get_collation_result"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.get_collation_result-559"><a href="#Campaign.get_collation_result-559"><span class="linenos">559</span></a>    <span class="k">def</span> <span class="nf">get_collation_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign.get_collation_result-560"><a href="#Campaign.get_collation_result-560"><span class="linenos">560</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return dataframe containing all collated results</span>
</span><span id="Campaign.get_collation_result-561"><a href="#Campaign.get_collation_result-561"><span class="linenos">561</span></a>
</span><span id="Campaign.get_collation_result-562"><a href="#Campaign.get_collation_result-562"><span class="linenos">562</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.get_collation_result-563"><a href="#Campaign.get_collation_result-563"><span class="linenos">563</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.get_collation_result-564"><a href="#Campaign.get_collation_result-564"><span class="linenos">564</span></a><span class="sd">        last_iteration : bool</span>
</span><span id="Campaign.get_collation_result-565"><a href="#Campaign.get_collation_result-565"><span class="linenos">565</span></a><span class="sd">            Will only return the result of the last iteration.</span>
</span><span id="Campaign.get_collation_result-566"><a href="#Campaign.get_collation_result-566"><span class="linenos">566</span></a>
</span><span id="Campaign.get_collation_result-567"><a href="#Campaign.get_collation_result-567"><span class="linenos">567</span></a><span class="sd">        Returns</span>
</span><span id="Campaign.get_collation_result-568"><a href="#Campaign.get_collation_result-568"><span class="linenos">568</span></a><span class="sd">        -------</span>
</span><span id="Campaign.get_collation_result-569"><a href="#Campaign.get_collation_result-569"><span class="linenos">569</span></a><span class="sd">        DataFrame</span>
</span><span id="Campaign.get_collation_result-570"><a href="#Campaign.get_collation_result-570"><span class="linenos">570</span></a><span class="sd">            A DataFrame with the simulation results along with the inputs</span>
</span><span id="Campaign.get_collation_result-571"><a href="#Campaign.get_collation_result-571"><span class="linenos">571</span></a><span class="sd">            used to produce them.</span>
</span><span id="Campaign.get_collation_result-572"><a href="#Campaign.get_collation_result-572"><span class="linenos">572</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.get_collation_result-573"><a href="#Campaign.get_collation_result-573"><span class="linenos">573</span></a>        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
</span><span id="Campaign.get_collation_result-574"><a href="#Campaign.get_collation_result-574"><span class="linenos">574</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="Campaign.get_collation_result-575"><a href="#Campaign.get_collation_result-575"><span class="linenos">575</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign.get_collation_result-576"><a href="#Campaign.get_collation_result-576"><span class="linenos">576</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="Campaign.get_collation_result-577"><a href="#Campaign.get_collation_result-577"><span class="linenos">577</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span>
</span><span id="Campaign.get_collation_result-578"><a href="#Campaign.get_collation_result-578"><span class="linenos">578</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span><span id="Campaign.get_collation_result-579"><a href="#Campaign.get_collation_result-579"><span class="linenos">579</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="Campaign.get_collation_result-580"><a href="#Campaign.get_collation_result-580"><span class="linenos">580</span></a>            <span class="n">status</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">COLLATED</span><span class="p">,</span>
</span><span id="Campaign.get_collation_result-581"><a href="#Campaign.get_collation_result-581"><span class="linenos">581</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return dataframe containing all collated results</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>last_iteration</strong> (bool):
Will only return the result of the last iteration.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>DataFrame</strong>: A DataFrame with the simulation results along with the inputs
used to produce them.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.get_invalid_runs" class="classattr">
                                        <input id="Campaign.get_invalid_runs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_invalid_runs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.get_invalid_runs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.get_invalid_runs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.get_invalid_runs-583"><a href="#Campaign.get_invalid_runs-583"><span class="linenos">583</span></a>    <span class="k">def</span> <span class="nf">get_invalid_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_iteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Campaign.get_invalid_runs-584"><a href="#Campaign.get_invalid_runs-584"><span class="linenos">584</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return dataframe containing all results marked as INVALID.</span>
</span><span id="Campaign.get_invalid_runs-585"><a href="#Campaign.get_invalid_runs-585"><span class="linenos">585</span></a>
</span><span id="Campaign.get_invalid_runs-586"><a href="#Campaign.get_invalid_runs-586"><span class="linenos">586</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.get_invalid_runs-587"><a href="#Campaign.get_invalid_runs-587"><span class="linenos">587</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.get_invalid_runs-588"><a href="#Campaign.get_invalid_runs-588"><span class="linenos">588</span></a><span class="sd">        last_iteration : bool</span>
</span><span id="Campaign.get_invalid_runs-589"><a href="#Campaign.get_invalid_runs-589"><span class="linenos">589</span></a><span class="sd">            Will only return the result of the last iteration.</span>
</span><span id="Campaign.get_invalid_runs-590"><a href="#Campaign.get_invalid_runs-590"><span class="linenos">590</span></a>
</span><span id="Campaign.get_invalid_runs-591"><a href="#Campaign.get_invalid_runs-591"><span class="linenos">591</span></a><span class="sd">        Returns</span>
</span><span id="Campaign.get_invalid_runs-592"><a href="#Campaign.get_invalid_runs-592"><span class="linenos">592</span></a><span class="sd">        -------</span>
</span><span id="Campaign.get_invalid_runs-593"><a href="#Campaign.get_invalid_runs-593"><span class="linenos">593</span></a><span class="sd">        DataFrame</span>
</span><span id="Campaign.get_invalid_runs-594"><a href="#Campaign.get_invalid_runs-594"><span class="linenos">594</span></a><span class="sd">            A DataFrame with the results form simulations that were marked as INVALID.</span>
</span><span id="Campaign.get_invalid_runs-595"><a href="#Campaign.get_invalid_runs-595"><span class="linenos">595</span></a><span class="sd">            These will usually be the ones that went outside the specified parameter ranges.</span>
</span><span id="Campaign.get_invalid_runs-596"><a href="#Campaign.get_invalid_runs-596"><span class="linenos">596</span></a><span class="sd">            These still have to be accounted for in some way by some methods (e.g. MCMC).</span>
</span><span id="Campaign.get_invalid_runs-597"><a href="#Campaign.get_invalid_runs-597"><span class="linenos">597</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.get_invalid_runs-598"><a href="#Campaign.get_invalid_runs-598"><span class="linenos">598</span></a>        <span class="k">if</span> <span class="n">last_iteration</span><span class="p">:</span>
</span><span id="Campaign.get_invalid_runs-599"><a href="#Campaign.get_invalid_runs-599"><span class="linenos">599</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">iteration</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="Campaign.get_invalid_runs-600"><a href="#Campaign.get_invalid_runs-600"><span class="linenos">600</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Campaign.get_invalid_runs-601"><a href="#Campaign.get_invalid_runs-601"><span class="linenos">601</span></a>            <span class="n">iteration</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="Campaign.get_invalid_runs-602"><a href="#Campaign.get_invalid_runs-602"><span class="linenos">602</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span>
</span><span id="Campaign.get_invalid_runs-603"><a href="#Campaign.get_invalid_runs-603"><span class="linenos">603</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span><span id="Campaign.get_invalid_runs-604"><a href="#Campaign.get_invalid_runs-604"><span class="linenos">604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler_id</span><span class="p">,</span>
</span><span id="Campaign.get_invalid_runs-605"><a href="#Campaign.get_invalid_runs-605"><span class="linenos">605</span></a>            <span class="n">status</span><span class="o">=</span><span class="n">easyvvuq</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">INVALID</span><span class="p">,</span>
</span><span id="Campaign.get_invalid_runs-606"><a href="#Campaign.get_invalid_runs-606"><span class="linenos">606</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">iteration</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return dataframe containing all results marked as INVALID.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>last_iteration</strong> (bool):
Will only return the result of the last iteration.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>DataFrame</strong>: A DataFrame with the results form simulations that were marked as INVALID.
These will usually be the ones that went outside the specified parameter ranges.
These still have to be accounted for in some way by some methods (e.g. MCMC).</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.apply_analysis" class="classattr">
                                        <input id="Campaign.apply_analysis-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">apply_analysis</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">analysis</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.apply_analysis-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.apply_analysis"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.apply_analysis-608"><a href="#Campaign.apply_analysis-608"><span class="linenos">608</span></a>    <span class="k">def</span> <span class="nf">apply_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analysis</span><span class="p">):</span>
</span><span id="Campaign.apply_analysis-609"><a href="#Campaign.apply_analysis-609"><span class="linenos">609</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the `analysis` element on the output of the last run collation.</span>
</span><span id="Campaign.apply_analysis-610"><a href="#Campaign.apply_analysis-610"><span class="linenos">610</span></a>
</span><span id="Campaign.apply_analysis-611"><a href="#Campaign.apply_analysis-611"><span class="linenos">611</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.apply_analysis-612"><a href="#Campaign.apply_analysis-612"><span class="linenos">612</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.apply_analysis-613"><a href="#Campaign.apply_analysis-613"><span class="linenos">613</span></a><span class="sd">        analysis : Analysis</span>
</span><span id="Campaign.apply_analysis-614"><a href="#Campaign.apply_analysis-614"><span class="linenos">614</span></a><span class="sd">            Element that performs a VVUQ analysis on a dataframe summary of</span>
</span><span id="Campaign.apply_analysis-615"><a href="#Campaign.apply_analysis-615"><span class="linenos">615</span></a><span class="sd">            run outputs.</span>
</span><span id="Campaign.apply_analysis-616"><a href="#Campaign.apply_analysis-616"><span class="linenos">616</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.apply_analysis-617"><a href="#Campaign.apply_analysis-617"><span class="linenos">617</span></a>        <span class="c1"># Apply analysis element to most recent collation result</span>
</span><span id="Campaign.apply_analysis-618"><a href="#Campaign.apply_analysis-618"><span class="linenos">618</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">data_frame</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Run the <code>analysis</code> element on the output of the last run collation.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>analysis</strong> (Analysis):
Element that performs a VVUQ analysis on a dataframe summary of
run outputs.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.analyse" class="classattr">
                                        <input id="Campaign.analyse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">analyse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.analyse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.analyse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.analyse-620"><a href="#Campaign.analyse-620"><span class="linenos">620</span></a>    <span class="k">def</span> <span class="nf">analyse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Campaign.analyse-621"><a href="#Campaign.analyse-621"><span class="linenos">621</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;If available will call an appropriate analysis class on the collation result.</span>
</span><span id="Campaign.analyse-622"><a href="#Campaign.analyse-622"><span class="linenos">622</span></a>
</span><span id="Campaign.analyse-623"><a href="#Campaign.analyse-623"><span class="linenos">623</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.analyse-624"><a href="#Campaign.analyse-624"><span class="linenos">624</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.analyse-625"><a href="#Campaign.analyse-625"><span class="linenos">625</span></a><span class="sd">        **kwargs : dict</span>
</span><span id="Campaign.analyse-626"><a href="#Campaign.analyse-626"><span class="linenos">626</span></a><span class="sd">            Argument to the analysis class constructor (after sampler).</span>
</span><span id="Campaign.analyse-627"><a href="#Campaign.analyse-627"><span class="linenos">627</span></a>
</span><span id="Campaign.analyse-628"><a href="#Campaign.analyse-628"><span class="linenos">628</span></a><span class="sd">        Returns</span>
</span><span id="Campaign.analyse-629"><a href="#Campaign.analyse-629"><span class="linenos">629</span></a><span class="sd">        -------</span>
</span><span id="Campaign.analyse-630"><a href="#Campaign.analyse-630"><span class="linenos">630</span></a><span class="sd">        AnalysisResults</span>
</span><span id="Campaign.analyse-631"><a href="#Campaign.analyse-631"><span class="linenos">631</span></a><span class="sd">            An object representing analysis results. Can be used to interact with those results</span>
</span><span id="Campaign.analyse-632"><a href="#Campaign.analyse-632"><span class="linenos">632</span></a><span class="sd">            in some way. Plot, retrieve surrogate models and so on.</span>
</span><span id="Campaign.analyse-633"><a href="#Campaign.analyse-633"><span class="linenos">633</span></a><span class="sd">            See `easyvvuq.analysis.AnalysisResults` for further information.</span>
</span><span id="Campaign.analyse-634"><a href="#Campaign.analyse-634"><span class="linenos">634</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.analyse-635"><a href="#Campaign.analyse-635"><span class="linenos">635</span></a>        <span class="n">collation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_collation_result</span><span class="p">()</span>
</span><span id="Campaign.analyse-636"><a href="#Campaign.analyse-636"><span class="linenos">636</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Campaign.analyse-637"><a href="#Campaign.analyse-637"><span class="linenos">637</span></a>            <span class="n">analysis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="o">.</span><span class="n">analysis_class</span><span class="p">(</span><span class="n">sampler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Campaign.analyse-638"><a href="#Campaign.analyse-638"><span class="linenos">638</span></a>            <span class="k">return</span> <span class="n">analysis</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">collation_result</span><span class="p">)</span>
</span><span id="Campaign.analyse-639"><a href="#Campaign.analyse-639"><span class="linenos">639</span></a>        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
</span><span id="Campaign.analyse-640"><a href="#Campaign.analyse-640"><span class="linenos">640</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This sampler does not have a corresponding analysis class&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>If available will call an appropriate analysis class on the collation result.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>**kwargs</strong> (dict):
Argument to the analysis class constructor (after sampler).</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>AnalysisResults</strong>: An object representing analysis results. Can be used to interact with those results
in some way. Plot, retrieve surrogate models and so on.
See <code>easyvvuq.analysis.AnalysisResults</code> for further information.</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.get_last_analysis" class="classattr">
                                        <input id="Campaign.get_last_analysis-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_last_analysis</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.get_last_analysis-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.get_last_analysis"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.get_last_analysis-642"><a href="#Campaign.get_last_analysis-642"><span class="linenos">642</span></a>    <span class="k">def</span> <span class="nf">get_last_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign.get_last_analysis-643"><a href="#Campaign.get_last_analysis-643"><span class="linenos">643</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the output of the most recently run analysis element.</span>
</span><span id="Campaign.get_last_analysis-644"><a href="#Campaign.get_last_analysis-644"><span class="linenos">644</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.get_last_analysis-645"><a href="#Campaign.get_last_analysis-645"><span class="linenos">645</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Campaign.get_last_analysis-646"><a href="#Campaign.get_last_analysis-646"><span class="linenos">646</span></a>            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No last analysis output available.&quot;</span><span class="p">)</span>
</span><span id="Campaign.get_last_analysis-647"><a href="#Campaign.get_last_analysis-647"><span class="linenos">647</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_analysis</span>
</span></pre></div>


            <div class="docstring"><p>Return the output of the most recently run analysis element.</p>
</div>


                            </div>
                            <div id="Campaign.get_active_sampler" class="classattr">
                                        <input id="Campaign.get_active_sampler-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_active_sampler</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.get_active_sampler-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.get_active_sampler"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.get_active_sampler-659"><a href="#Campaign.get_active_sampler-659"><span class="linenos">659</span></a>    <span class="k">def</span> <span class="nf">get_active_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign.get_active_sampler-660"><a href="#Campaign.get_active_sampler-660"><span class="linenos">660</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the active sampler element in use by this campaign.</span>
</span><span id="Campaign.get_active_sampler-661"><a href="#Campaign.get_active_sampler-661"><span class="linenos">661</span></a>
</span><span id="Campaign.get_active_sampler-662"><a href="#Campaign.get_active_sampler-662"><span class="linenos">662</span></a><span class="sd">        Returns</span>
</span><span id="Campaign.get_active_sampler-663"><a href="#Campaign.get_active_sampler-663"><span class="linenos">663</span></a><span class="sd">        -------</span>
</span><span id="Campaign.get_active_sampler-664"><a href="#Campaign.get_active_sampler-664"><span class="linenos">664</span></a><span class="sd">        The sampler currently in use</span>
</span><span id="Campaign.get_active_sampler-665"><a href="#Campaign.get_active_sampler-665"><span class="linenos">665</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.get_active_sampler-666"><a href="#Campaign.get_active_sampler-666"><span class="linenos">666</span></a>
</span><span id="Campaign.get_active_sampler-667"><a href="#Campaign.get_active_sampler-667"><span class="linenos">667</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_sampler</span>
</span></pre></div>


            <div class="docstring"><p>Return the active sampler element in use by this campaign.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>The sampler currently in use</strong></li>
</ul>
</div>


                            </div>
                            <div id="Campaign.ignore_runs" class="classattr">
                                        <input id="Campaign.ignore_runs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ignore_runs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">list_of_run_IDs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.ignore_runs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.ignore_runs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.ignore_runs-669"><a href="#Campaign.ignore_runs-669"><span class="linenos">669</span></a>    <span class="k">def</span> <span class="nf">ignore_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
</span><span id="Campaign.ignore_runs-670"><a href="#Campaign.ignore_runs-670"><span class="linenos">670</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Flags the specified runs to be IGNORED in future collation. Note that</span>
</span><span id="Campaign.ignore_runs-671"><a href="#Campaign.ignore_runs-671"><span class="linenos">671</span></a><span class="sd">        this does NOT remove previously collated results from the collation table.</span>
</span><span id="Campaign.ignore_runs-672"><a href="#Campaign.ignore_runs-672"><span class="linenos">672</span></a><span class="sd">        For that you must refresh the collation by running recollate().</span>
</span><span id="Campaign.ignore_runs-673"><a href="#Campaign.ignore_runs-673"><span class="linenos">673</span></a>
</span><span id="Campaign.ignore_runs-674"><a href="#Campaign.ignore_runs-674"><span class="linenos">674</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.ignore_runs-675"><a href="#Campaign.ignore_runs-675"><span class="linenos">675</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.ignore_runs-676"><a href="#Campaign.ignore_runs-676"><span class="linenos">676</span></a><span class="sd">        list</span>
</span><span id="Campaign.ignore_runs-677"><a href="#Campaign.ignore_runs-677"><span class="linenos">677</span></a><span class="sd">            The list of run IDs for the runs that should be set to status IGNORED</span>
</span><span id="Campaign.ignore_runs-678"><a href="#Campaign.ignore_runs-678"><span class="linenos">678</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.ignore_runs-679"><a href="#Campaign.ignore_runs-679"><span class="linenos">679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">IGNORED</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Flags the specified runs to be IGNORED in future collation. Note that
this does NOT remove previously collated results from the collation table.
For that you must refresh the collation by running recollate().</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list</strong>: The list of run IDs for the runs that should be set to status IGNORED</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.rerun" class="classattr">
                                        <input id="Campaign.rerun-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rerun</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">list_of_run_IDs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.rerun-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.rerun"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.rerun-681"><a href="#Campaign.rerun-681"><span class="linenos">681</span></a>    <span class="k">def</span> <span class="nf">rerun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">list_of_run_IDs</span><span class="p">):</span>
</span><span id="Campaign.rerun-682"><a href="#Campaign.rerun-682"><span class="linenos">682</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the status of the specified runs to ENCODED, so that their results</span>
</span><span id="Campaign.rerun-683"><a href="#Campaign.rerun-683"><span class="linenos">683</span></a><span class="sd">        may be recollated later (presumably after extending, rerunning or otherwise</span>
</span><span id="Campaign.rerun-684"><a href="#Campaign.rerun-684"><span class="linenos">684</span></a><span class="sd">        modifying the data in the relevant run folder). Note that this method will</span>
</span><span id="Campaign.rerun-685"><a href="#Campaign.rerun-685"><span class="linenos">685</span></a><span class="sd">        NOT perform any execution - it simply flags the run in EasyVVUQ as being</span>
</span><span id="Campaign.rerun-686"><a href="#Campaign.rerun-686"><span class="linenos">686</span></a><span class="sd">        uncollated. Actual execution is (as usual) the job of the user or middleware.</span>
</span><span id="Campaign.rerun-687"><a href="#Campaign.rerun-687"><span class="linenos">687</span></a>
</span><span id="Campaign.rerun-688"><a href="#Campaign.rerun-688"><span class="linenos">688</span></a><span class="sd">        Parameters</span>
</span><span id="Campaign.rerun-689"><a href="#Campaign.rerun-689"><span class="linenos">689</span></a><span class="sd">        ----------</span>
</span><span id="Campaign.rerun-690"><a href="#Campaign.rerun-690"><span class="linenos">690</span></a><span class="sd">        list</span>
</span><span id="Campaign.rerun-691"><a href="#Campaign.rerun-691"><span class="linenos">691</span></a><span class="sd">            The list of run IDs for the runs that should be set to status ENCODED</span>
</span><span id="Campaign.rerun-692"><a href="#Campaign.rerun-692"><span class="linenos">692</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.rerun-693"><a href="#Campaign.rerun-693"><span class="linenos">693</span></a>
</span><span id="Campaign.rerun-694"><a href="#Campaign.rerun-694"><span class="linenos">694</span></a>        <span class="k">for</span> <span class="n">run_ID</span> <span class="ow">in</span> <span class="n">list_of_run_IDs</span><span class="p">:</span>
</span><span id="Campaign.rerun-695"><a href="#Campaign.rerun-695"><span class="linenos">695</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">get_run_status</span><span class="p">(</span><span class="n">run_ID</span><span class="p">)</span>
</span><span id="Campaign.rerun-696"><a href="#Campaign.rerun-696"><span class="linenos">696</span></a>            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">Status</span><span class="o">.</span><span class="n">NEW</span><span class="p">:</span>
</span><span id="Campaign.rerun-697"><a href="#Campaign.rerun-697"><span class="linenos">697</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot rerun </span><span class="si">{</span><span class="n">run_ID</span><span class="si">}</span><span class="s2"> as it has status NEW, and must&quot;</span>
</span><span id="Campaign.rerun-698"><a href="#Campaign.rerun-698"><span class="linenos">698</span></a>                       <span class="sa">f</span><span class="s2">&quot;be encoded before execution.&quot;</span><span class="p">)</span>
</span><span id="Campaign.rerun-699"><a href="#Campaign.rerun-699"><span class="linenos">699</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Campaign.rerun-700"><a href="#Campaign.rerun-700"><span class="linenos">700</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">campaign_db</span><span class="o">.</span><span class="n">set_run_statuses</span><span class="p">(</span><span class="n">list_of_run_IDs</span><span class="p">,</span> <span class="n">Status</span><span class="o">.</span><span class="n">ENCODED</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the status of the specified runs to ENCODED, so that their results
may be recollated later (presumably after extending, rerunning or otherwise
modifying the data in the relevant run folder). Note that this method will
NOT perform any execution - it simply flags the run in EasyVVUQ as being
uncollated. Actual execution is (as usual) the job of the user or middleware.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>list</strong>: The list of run IDs for the runs that should be set to status ENCODED</li>
</ul>
</div>


                            </div>
                            <div id="Campaign.get_active_app" class="classattr">
                                        <input id="Campaign.get_active_app-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_active_app</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Campaign.get_active_app-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Campaign.get_active_app"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Campaign.get_active_app-702"><a href="#Campaign.get_active_app-702"><span class="linenos">702</span></a>    <span class="k">def</span> <span class="nf">get_active_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Campaign.get_active_app-703"><a href="#Campaign.get_active_app-703"><span class="linenos">703</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a dict of information regarding the application that is currently</span>
</span><span id="Campaign.get_active_app-704"><a href="#Campaign.get_active_app-704"><span class="linenos">704</span></a><span class="sd">        set for this campaign.</span>
</span><span id="Campaign.get_active_app-705"><a href="#Campaign.get_active_app-705"><span class="linenos">705</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Campaign.get_active_app-706"><a href="#Campaign.get_active_app-706"><span class="linenos">706</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_app</span>
</span></pre></div>


            <div class="docstring"><p>Returns a dict of information regarding the application that is currently
set for this campaign.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>